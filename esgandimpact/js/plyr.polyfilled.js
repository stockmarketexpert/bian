typeof navigator==="object"&&(function(global,factory){typeof exports==='object'&&typeof module!=='undefined'?module.exports=factory():typeof define==='function'&&define.amd?define('Plyr',factory):(global=global||self,global.Plyr=factory());}(this,(function(){'use strict';(function(){if(typeof window==='undefined'){return;}
try{var ce=new window.CustomEvent('test',{cancelable:true});ce.preventDefault();if(ce.defaultPrevented!==true){throw new Error('Could not prevent default');}}catch(e){var CustomEvent=function CustomEvent(event,params){var evt,origPrevent;params=params||{};params.bubbles=!!params.bubbles;params.cancelable=!!params.cancelable;evt=document.createEvent('CustomEvent');evt.initCustomEvent(event,params.bubbles,params.cancelable,params.detail);origPrevent=evt.preventDefault;evt.preventDefault=function(){origPrevent.call(this);try{Object.defineProperty(this,'defaultPrevented',{get:function get(){return true;}});}catch(e){this.defaultPrevented=true;}};return evt;};CustomEvent.prototype=window.Event.prototype;window.CustomEvent=CustomEvent;}})();var commonjsGlobal=typeof globalThis!=='undefined'?globalThis:typeof window!=='undefined'?window:typeof global!=='undefined'?global:typeof self!=='undefined'?self:{};function createCommonjsModule(fn,module){return module={exports:{}},fn(module,module.exports),module.exports;}
var check=function(it){return it&&it.Math==Math&&it;};var global_1=check(typeof globalThis=='object'&&globalThis)||check(typeof window=='object'&&window)||check(typeof self=='object'&&self)||check(typeof commonjsGlobal=='object'&&commonjsGlobal)||Function('return this')();var fails=function(exec){try{return!!exec();}catch(error){return true;}};var descriptors=!fails(function(){return Object.defineProperty({},1,{get:function(){return 7;}})[1]!=7;});var nativePropertyIsEnumerable={}.propertyIsEnumerable;var getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor;var NASHORN_BUG=getOwnPropertyDescriptor&&!nativePropertyIsEnumerable.call({1:2},1);var f=NASHORN_BUG?function propertyIsEnumerable(V){var descriptor=getOwnPropertyDescriptor(this,V);return!!descriptor&&descriptor.enumerable;}:nativePropertyIsEnumerable;var objectPropertyIsEnumerable={f:f};var createPropertyDescriptor=function(bitmap,value){return{enumerable:!(bitmap&1),configurable:!(bitmap&2),writable:!(bitmap&4),value:value};};var toString={}.toString;var classofRaw=function(it){return toString.call(it).slice(8,-1);};var split=''.split;var indexedObject=fails(function(){return!Object('z').propertyIsEnumerable(0);})?function(it){return classofRaw(it)=='String'?split.call(it,''):Object(it);}:Object;var requireObjectCoercible=function(it){if(it==undefined)throw TypeError("Can't call method on "+it);return it;};var toIndexedObject=function(it){return indexedObject(requireObjectCoercible(it));};var isObject=function(it){return typeof it==='object'?it!==null:typeof it==='function';};var toPrimitive=function(input,PREFERRED_STRING){if(!isObject(input))return input;var fn,val;if(PREFERRED_STRING&&typeof(fn=input.toString)=='function'&&!isObject(val=fn.call(input)))return val;if(typeof(fn=input.valueOf)=='function'&&!isObject(val=fn.call(input)))return val;if(!PREFERRED_STRING&&typeof(fn=input.toString)=='function'&&!isObject(val=fn.call(input)))return val;throw TypeError("Can't convert object to primitive value");};var hasOwnProperty={}.hasOwnProperty;var has=function(it,key){return hasOwnProperty.call(it,key);};var document$1=global_1.document;var EXISTS=isObject(document$1)&&isObject(document$1.createElement);var documentCreateElement=function(it){return EXISTS?document$1.createElement(it):{};};var ie8DomDefine=!descriptors&&!fails(function(){return Object.defineProperty(documentCreateElement('div'),'a',{get:function(){return 7;}}).a!=7;});var nativeGetOwnPropertyDescriptor=Object.getOwnPropertyDescriptor;var f$1=descriptors?nativeGetOwnPropertyDescriptor:function getOwnPropertyDescriptor(O,P){O=toIndexedObject(O);P=toPrimitive(P,true);if(ie8DomDefine)try{return nativeGetOwnPropertyDescriptor(O,P);}catch(error){}
if(has(O,P))return createPropertyDescriptor(!objectPropertyIsEnumerable.f.call(O,P),O[P]);};var objectGetOwnPropertyDescriptor={f:f$1};var anObject=function(it){if(!isObject(it)){throw TypeError(String(it)+' is not an object');}return it;};var nativeDefineProperty=Object.defineProperty;var f$2=descriptors?nativeDefineProperty:function defineProperty(O,P,Attributes){anObject(O);P=toPrimitive(P,true);anObject(Attributes);if(ie8DomDefine)try{return nativeDefineProperty(O,P,Attributes);}catch(error){}
if('get'in Attributes||'set'in Attributes)throw TypeError('Accessors not supported');if('value'in Attributes)O[P]=Attributes.value;return O;};var objectDefineProperty={f:f$2};var createNonEnumerableProperty=descriptors?function(object,key,value){return objectDefineProperty.f(object,key,createPropertyDescriptor(1,value));}:function(object,key,value){object[key]=value;return object;};var setGlobal=function(key,value){try{createNonEnumerableProperty(global_1,key,value);}catch(error){global_1[key]=value;}return value;};var SHARED='__core-js_shared__';var store=global_1[SHARED]||setGlobal(SHARED,{});var sharedStore=store;var functionToString=Function.toString;if(typeof sharedStore.inspectSource!='function'){sharedStore.inspectSource=function(it){return functionToString.call(it);};}
var inspectSource=sharedStore.inspectSource;var WeakMap$1=global_1.WeakMap;var nativeWeakMap=typeof WeakMap$1==='function'&&/native code/.test(inspectSource(WeakMap$1));var isPure=false;var shared=createCommonjsModule(function(module){(module.exports=function(key,value){return sharedStore[key]||(sharedStore[key]=value!==undefined?value:{});})('versions',[]).push({version:'3.6.4',mode:'global',copyright:'Â© 2020 Denis Pushkarev (zloirock.ru)'});});var id=0;var postfix=Math.random();var uid=function(key){return 'Symbol('+String(key===undefined?'':key)+')_'+(++id+postfix).toString(36);};var keys=shared('keys');var sharedKey=function(key){return keys[key]||(keys[key]=uid(key));};var hiddenKeys={};var WeakMap$2=global_1.WeakMap;var set,get,has$1;var enforce=function(it){return has$1(it)?get(it):set(it,{});};var getterFor=function(TYPE){return function(it){var state;if(!isObject(it)||(state=get(it)).type!==TYPE){throw TypeError('Incompatible receiver, '+TYPE+' required');}return state;};};if(nativeWeakMap){var store$1=new WeakMap$2();var wmget=store$1.get;var wmhas=store$1.has;var wmset=store$1.set;set=function(it,metadata){wmset.call(store$1,it,metadata);return metadata;};get=function(it){return wmget.call(store$1,it)||{};};has$1=function(it){return wmhas.call(store$1,it);};}else{var STATE=sharedKey('state');hiddenKeys[STATE]=true;set=function(it,metadata){createNonEnumerableProperty(it,STATE,metadata);return metadata;};get=function(it){return has(it,STATE)?it[STATE]:{};};has$1=function(it){return has(it,STATE);};}
var internalState={set:set,get:get,has:has$1,enforce:enforce,getterFor:getterFor};var redefine=createCommonjsModule(function(module){var getInternalState=internalState.get;var enforceInternalState=internalState.enforce;var TEMPLATE=String(String).split('String');(module.exports=function(O,key,value,options){var unsafe=options?!!options.unsafe:false;var simple=options?!!options.enumerable:false;var noTargetGet=options?!!options.noTargetGet:false;if(typeof value=='function'){if(typeof key=='string'&&!has(value,'name'))createNonEnumerableProperty(value,'name',key);enforceInternalState(value).source=TEMPLATE.join(typeof key=='string'?key:'');}
if(O===global_1){if(simple)O[key]=value;else setGlobal(key,value);return;}else if(!unsafe){delete O[key];}else if(!noTargetGet&&O[key]){simple=true;}
if(simple)O[key]=value;else createNonEnumerableProperty(O,key,value);})(Function.prototype,'toString',function toString(){return typeof this=='function'&&getInternalState(this).source||inspectSource(this);});});var path=global_1;var aFunction=function(variable){return typeof variable=='function'?variable:undefined;};var getBuiltIn=function(namespace,method){return arguments.length<2?aFunction(path[namespace])||aFunction(global_1[namespace]):path[namespace]&&path[namespace][method]||global_1[namespace]&&global_1[namespace][method];};var ceil=Math.ceil;var floor=Math.floor;var toInteger=function(argument){return isNaN(argument=+argument)?0:(argument>0?floor:ceil)(argument);};var min=Math.min;var toLength=function(argument){return argument>0?min(toInteger(argument),0x1FFFFFFFFFFFFF):0;};var max=Math.max;var min$1=Math.min;var toAbsoluteIndex=function(index,length){var integer=toInteger(index);return integer<0?max(integer+length,0):min$1(integer,length);};var createMethod=function(IS_INCLUDES){return function($this,el,fromIndex){var O=toIndexedObject($this);var length=toLength(O.length);var index=toAbsoluteIndex(fromIndex,length);var value;if(IS_INCLUDES&&el!=el)while(length>index){value=O[index++];if(value!=value)return true;}else for(;length>index;index++){if((IS_INCLUDES||index in O)&&O[index]===el)return IS_INCLUDES||index||0;}return!IS_INCLUDES&&-1;};};var arrayIncludes={includes:createMethod(true),indexOf:createMethod(false)};var indexOf=arrayIncludes.indexOf;var objectKeysInternal=function(object,names){var O=toIndexedObject(object);var i=0;var result=[];var key;for(key in O)!has(hiddenKeys,key)&&has(O,key)&&result.push(key);while(names.length>i)if(has(O,key=names[i++])){~indexOf(result,key)||result.push(key);}
return result;};var enumBugKeys=['constructor','hasOwnProperty','isPrototypeOf','propertyIsEnumerable','toLocaleString','toString','valueOf'];var hiddenKeys$1=enumBugKeys.concat('length','prototype');var f$3=Object.getOwnPropertyNames||function getOwnPropertyNames(O){return objectKeysInternal(O,hiddenKeys$1);};var objectGetOwnPropertyNames={f:f$3};var f$4=Object.getOwnPropertySymbols;var objectGetOwnPropertySymbols={f:f$4};var ownKeys=getBuiltIn('Reflect','ownKeys')||function ownKeys(it){var keys=objectGetOwnPropertyNames.f(anObject(it));var getOwnPropertySymbols=objectGetOwnPropertySymbols.f;return getOwnPropertySymbols?keys.concat(getOwnPropertySymbols(it)):keys;};var copyConstructorProperties=function(target,source){var keys=ownKeys(source);var defineProperty=objectDefineProperty.f;var getOwnPropertyDescriptor=objectGetOwnPropertyDescriptor.f;for(var i=0;i<keys.length;i++){var key=keys[i];if(!has(target,key))defineProperty(target,key,getOwnPropertyDescriptor(source,key));}};var replacement=/#|\.prototype\./;var isForced=function(feature,detection){var value=data[normalize(feature)];return value==POLYFILL?true:value==NATIVE?false:typeof detection=='function'?fails(detection):!!detection;};var normalize=isForced.normalize=function(string){return String(string).replace(replacement,'.').toLowerCase();};var data=isForced.data={};var NATIVE=isForced.NATIVE='N';var POLYFILL=isForced.POLYFILL='P';var isForced_1=isForced;var getOwnPropertyDescriptor$1=objectGetOwnPropertyDescriptor.f;var _export=function(options,source){var TARGET=options.target;var GLOBAL=options.global;var STATIC=options.stat;var FORCED,target,key,targetProperty,sourceProperty,descriptor;if(GLOBAL){target=global_1;}else if(STATIC){target=global_1[TARGET]||setGlobal(TARGET,{});}else{target=(global_1[TARGET]||{}).prototype;}
if(target)for(key in source){sourceProperty=source[key];if(options.noTargetGet){descriptor=getOwnPropertyDescriptor$1(target,key);targetProperty=descriptor&&descriptor.value;}else targetProperty=target[key];FORCED=isForced_1(GLOBAL?key:TARGET+(STATIC?'.':'#')+key,options.forced);if(!FORCED&&targetProperty!==undefined){if(typeof sourceProperty===typeof targetProperty)continue;copyConstructorProperties(sourceProperty,targetProperty);}
if(options.sham||(targetProperty&&targetProperty.sham)){createNonEnumerableProperty(sourceProperty,'sham',true);}
redefine(target,key,sourceProperty,options);}};var nativeSymbol=!!Object.getOwnPropertySymbols&&!fails(function(){return!String(Symbol());});var useSymbolAsUid=nativeSymbol&&!Symbol.sham&&typeof Symbol.iterator=='symbol';var isArray=Array.isArray||function isArray(arg){return classofRaw(arg)=='Array';};var toObject=function(argument){return Object(requireObjectCoercible(argument));};var objectKeys=Object.keys||function keys(O){return objectKeysInternal(O,enumBugKeys);};var objectDefineProperties=descriptors?Object.defineProperties:function defineProperties(O,Properties){anObject(O);var keys=objectKeys(Properties);var length=keys.length;var index=0;var key;while(length>index)objectDefineProperty.f(O,key=keys[index++],Properties[key]);return O;};var html=getBuiltIn('document','documentElement');var GT='>';var LT='<';var PROTOTYPE='prototype';var SCRIPT='script';var IE_PROTO=sharedKey('IE_PROTO');var EmptyConstructor=function(){};var scriptTag=function(content){return LT+SCRIPT+GT+content+LT+'/'+SCRIPT+GT;};var NullProtoObjectViaActiveX=function(activeXDocument){activeXDocument.write(scriptTag(''));activeXDocument.close();var temp=activeXDocument.parentWindow.Object;activeXDocument=null;return temp;};var NullProtoObjectViaIFrame=function(){var iframe=documentCreateElement('iframe');var JS='java'+SCRIPT+':';var iframeDocument;iframe.style.display='none';html.appendChild(iframe);iframe.src=String(JS);iframeDocument=iframe.contentWindow.document;iframeDocument.open();iframeDocument.write(scriptTag('document.F=Object'));iframeDocument.close();return iframeDocument.F;};var activeXDocument;var NullProtoObject=function(){try{activeXDocument=document.domain&&new ActiveXObject('htmlfile');}catch(error){}
NullProtoObject=activeXDocument?NullProtoObjectViaActiveX(activeXDocument):NullProtoObjectViaIFrame();var length=enumBugKeys.length;while(length--)delete NullProtoObject[PROTOTYPE][enumBugKeys[length]];return NullProtoObject();};hiddenKeys[IE_PROTO]=true;var objectCreate=Object.create||function create(O,Properties){var result;if(O!==null){EmptyConstructor[PROTOTYPE]=anObject(O);result=new EmptyConstructor();EmptyConstructor[PROTOTYPE]=null;result[IE_PROTO]=O;}else result=NullProtoObject();return Properties===undefined?result:objectDefineProperties(result,Properties);};var nativeGetOwnPropertyNames=objectGetOwnPropertyNames.f;var toString$1={}.toString;var windowNames=typeof window=='object'&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];var getWindowNames=function(it){try{return nativeGetOwnPropertyNames(it);}catch(error){return windowNames.slice();}};var f$5=function getOwnPropertyNames(it){return windowNames&&toString$1.call(it)=='[object Window]'?getWindowNames(it):nativeGetOwnPropertyNames(toIndexedObject(it));};var objectGetOwnPropertyNamesExternal={f:f$5};var WellKnownSymbolsStore=shared('wks');var Symbol$1=global_1.Symbol;var createWellKnownSymbol=useSymbolAsUid?Symbol$1:Symbol$1&&Symbol$1.withoutSetter||uid;var wellKnownSymbol=function(name){if(!has(WellKnownSymbolsStore,name)){if(nativeSymbol&&has(Symbol$1,name))WellKnownSymbolsStore[name]=Symbol$1[name];else WellKnownSymbolsStore[name]=createWellKnownSymbol('Symbol.'+name);}return WellKnownSymbolsStore[name];};var f$6=wellKnownSymbol;var wellKnownSymbolWrapped={f:f$6};var defineProperty=objectDefineProperty.f;var defineWellKnownSymbol=function(NAME){var Symbol=path.Symbol||(path.Symbol={});if(!has(Symbol,NAME))defineProperty(Symbol,NAME,{value:wellKnownSymbolWrapped.f(NAME)});};var defineProperty$1=objectDefineProperty.f;var TO_STRING_TAG=wellKnownSymbol('toStringTag');var setToStringTag=function(it,TAG,STATIC){if(it&&!has(it=STATIC?it:it.prototype,TO_STRING_TAG)){defineProperty$1(it,TO_STRING_TAG,{configurable:true,value:TAG});}};var aFunction$1=function(it){if(typeof it!='function'){throw TypeError(String(it)+' is not a function');}return it;};var functionBindContext=function(fn,that,length){aFunction$1(fn);if(that===undefined)return fn;switch(length){case 0:return function(){return fn.call(that);};case 1:return function(a){return fn.call(that,a);};case 2:return function(a,b){return fn.call(that,a,b);};case 3:return function(a,b,c){return fn.call(that,a,b,c);};}
return function(){return fn.apply(that,arguments);};};var SPECIES=wellKnownSymbol('species');var arraySpeciesCreate=function(originalArray,length){var C;if(isArray(originalArray)){C=originalArray.constructor;if(typeof C=='function'&&(C===Array||isArray(C.prototype)))C=undefined;else if(isObject(C)){C=C[SPECIES];if(C===null)C=undefined;}}return new(C===undefined?Array:C)(length===0?0:length);};var push=[].push;var createMethod$1=function(TYPE){var IS_MAP=TYPE==1;var IS_FILTER=TYPE==2;var IS_SOME=TYPE==3;var IS_EVERY=TYPE==4;var IS_FIND_INDEX=TYPE==6;var NO_HOLES=TYPE==5||IS_FIND_INDEX;return function($this,callbackfn,that,specificCreate){var O=toObject($this);var self=indexedObject(O);var boundFunction=functionBindContext(callbackfn,that,3);var length=toLength(self.length);var index=0;var create=specificCreate||arraySpeciesCreate;var target=IS_MAP?create($this,length):IS_FILTER?create($this,0):undefined;var value,result;for(;length>index;index++)if(NO_HOLES||index in self){value=self[index];result=boundFunction(value,index,O);if(TYPE){if(IS_MAP)target[index]=result;else if(result)switch(TYPE){case 3:return true;case 5:return value;case 6:return index;case 2:push.call(target,value);}else if(IS_EVERY)return false;}}
return IS_FIND_INDEX?-1:IS_SOME||IS_EVERY?IS_EVERY:target;};};var arrayIteration={forEach:createMethod$1(0),map:createMethod$1(1),filter:createMethod$1(2),some:createMethod$1(3),every:createMethod$1(4),find:createMethod$1(5),findIndex:createMethod$1(6)};var $forEach=arrayIteration.forEach;var HIDDEN=sharedKey('hidden');var SYMBOL='Symbol';var PROTOTYPE$1='prototype';var TO_PRIMITIVE=wellKnownSymbol('toPrimitive');var setInternalState=internalState.set;var getInternalState=internalState.getterFor(SYMBOL);var ObjectPrototype=Object[PROTOTYPE$1];var $Symbol=global_1.Symbol;var $stringify=getBuiltIn('JSON','stringify');var nativeGetOwnPropertyDescriptor$1=objectGetOwnPropertyDescriptor.f;var nativeDefineProperty$1=objectDefineProperty.f;var nativeGetOwnPropertyNames$1=objectGetOwnPropertyNamesExternal.f;var nativePropertyIsEnumerable$1=objectPropertyIsEnumerable.f;var AllSymbols=shared('symbols');var ObjectPrototypeSymbols=shared('op-symbols');var StringToSymbolRegistry=shared('string-to-symbol-registry');var SymbolToStringRegistry=shared('symbol-to-string-registry');var WellKnownSymbolsStore$1=shared('wks');var QObject=global_1.QObject;var USE_SETTER=!QObject||!QObject[PROTOTYPE$1]||!QObject[PROTOTYPE$1].findChild;var setSymbolDescriptor=descriptors&&fails(function(){return objectCreate(nativeDefineProperty$1({},'a',{get:function(){return nativeDefineProperty$1(this,'a',{value:7}).a;}})).a!=7;})?function(O,P,Attributes){var ObjectPrototypeDescriptor=nativeGetOwnPropertyDescriptor$1(ObjectPrototype,P);if(ObjectPrototypeDescriptor)delete ObjectPrototype[P];nativeDefineProperty$1(O,P,Attributes);if(ObjectPrototypeDescriptor&&O!==ObjectPrototype){nativeDefineProperty$1(ObjectPrototype,P,ObjectPrototypeDescriptor);}}:nativeDefineProperty$1;var wrap=function(tag,description){var symbol=AllSymbols[tag]=objectCreate($Symbol[PROTOTYPE$1]);setInternalState(symbol,{type:SYMBOL,tag:tag,description:description});if(!descriptors)symbol.description=description;return symbol;};var isSymbol=useSymbolAsUid?function(it){return typeof it=='symbol';}:function(it){return Object(it)instanceof $Symbol;};var $defineProperty=function defineProperty(O,P,Attributes){if(O===ObjectPrototype)$defineProperty(ObjectPrototypeSymbols,P,Attributes);anObject(O);var key=toPrimitive(P,true);anObject(Attributes);if(has(AllSymbols,key)){if(!Attributes.enumerable){if(!has(O,HIDDEN))nativeDefineProperty$1(O,HIDDEN,createPropertyDescriptor(1,{}));O[HIDDEN][key]=true;}else{if(has(O,HIDDEN)&&O[HIDDEN][key])O[HIDDEN][key]=false;Attributes=objectCreate(Attributes,{enumerable:createPropertyDescriptor(0,false)});}return setSymbolDescriptor(O,key,Attributes);}return nativeDefineProperty$1(O,key,Attributes);};var $defineProperties=function defineProperties(O,Properties){anObject(O);var properties=toIndexedObject(Properties);var keys=objectKeys(properties).concat($getOwnPropertySymbols(properties));$forEach(keys,function(key){if(!descriptors||$propertyIsEnumerable.call(properties,key))$defineProperty(O,key,properties[key]);});return O;};var $create=function create(O,Properties){return Properties===undefined?objectCreate(O):$defineProperties(objectCreate(O),Properties);};var $propertyIsEnumerable=function propertyIsEnumerable(V){var P=toPrimitive(V,true);var enumerable=nativePropertyIsEnumerable$1.call(this,P);if(this===ObjectPrototype&&has(AllSymbols,P)&&!has(ObjectPrototypeSymbols,P))return false;return enumerable||!has(this,P)||!has(AllSymbols,P)||has(this,HIDDEN)&&this[HIDDEN][P]?enumerable:true;};var $getOwnPropertyDescriptor=function getOwnPropertyDescriptor(O,P){var it=toIndexedObject(O);var key=toPrimitive(P,true);if(it===ObjectPrototype&&has(AllSymbols,key)&&!has(ObjectPrototypeSymbols,key))return;var descriptor=nativeGetOwnPropertyDescriptor$1(it,key);if(descriptor&&has(AllSymbols,key)&&!(has(it,HIDDEN)&&it[HIDDEN][key])){descriptor.enumerable=true;}
return descriptor;};var $getOwnPropertyNames=function getOwnPropertyNames(O){var names=nativeGetOwnPropertyNames$1(toIndexedObject(O));var result=[];$forEach(names,function(key){if(!has(AllSymbols,key)&&!has(hiddenKeys,key))result.push(key);});return result;};var $getOwnPropertySymbols=function getOwnPropertySymbols(O){var IS_OBJECT_PROTOTYPE=O===ObjectPrototype;var names=nativeGetOwnPropertyNames$1(IS_OBJECT_PROTOTYPE?ObjectPrototypeSymbols:toIndexedObject(O));var result=[];$forEach(names,function(key){if(has(AllSymbols,key)&&(!IS_OBJECT_PROTOTYPE||has(ObjectPrototype,key))){result.push(AllSymbols[key]);}});return result;};if(!nativeSymbol){$Symbol=function Symbol(){if(this instanceof $Symbol)throw TypeError('Symbol is not a constructor');var description=!arguments.length||arguments[0]===undefined?undefined:String(arguments[0]);var tag=uid(description);var setter=function(value){if(this===ObjectPrototype)setter.call(ObjectPrototypeSymbols,value);if(has(this,HIDDEN)&&has(this[HIDDEN],tag))this[HIDDEN][tag]=false;setSymbolDescriptor(this,tag,createPropertyDescriptor(1,value));};if(descriptors&&USE_SETTER)setSymbolDescriptor(ObjectPrototype,tag,{configurable:true,set:setter});return wrap(tag,description);};redefine($Symbol[PROTOTYPE$1],'toString',function toString(){return getInternalState(this).tag;});redefine($Symbol,'withoutSetter',function(description){return wrap(uid(description),description);});objectPropertyIsEnumerable.f=$propertyIsEnumerable;objectDefineProperty.f=$defineProperty;objectGetOwnPropertyDescriptor.f=$getOwnPropertyDescriptor;objectGetOwnPropertyNames.f=objectGetOwnPropertyNamesExternal.f=$getOwnPropertyNames;objectGetOwnPropertySymbols.f=$getOwnPropertySymbols;wellKnownSymbolWrapped.f=function(name){return wrap(wellKnownSymbol(name),name);};if(descriptors){nativeDefineProperty$1($Symbol[PROTOTYPE$1],'description',{configurable:true,get:function description(){return getInternalState(this).description;}});{redefine(ObjectPrototype,'propertyIsEnumerable',$propertyIsEnumerable,{unsafe:true});}}}
_export({global:true,wrap:true,forced:!nativeSymbol,sham:!nativeSymbol},{Symbol:$Symbol});$forEach(objectKeys(WellKnownSymbolsStore$1),function(name){defineWellKnownSymbol(name);});_export({target:SYMBOL,stat:true,forced:!nativeSymbol},{'for':function(key){var string=String(key);if(has(StringToSymbolRegistry,string))return StringToSymbolRegistry[string];var symbol=$Symbol(string);StringToSymbolRegistry[string]=symbol;SymbolToStringRegistry[symbol]=string;return symbol;},keyFor:function keyFor(sym){if(!isSymbol(sym))throw TypeError(sym+' is not a symbol');if(has(SymbolToStringRegistry,sym))return SymbolToStringRegistry[sym];},useSetter:function(){USE_SETTER=true;},useSimple:function(){USE_SETTER=false;}});_export({target:'Object',stat:true,forced:!nativeSymbol,sham:!descriptors},{create:$create,defineProperty:$defineProperty,defineProperties:$defineProperties,getOwnPropertyDescriptor:$getOwnPropertyDescriptor});_export({target:'Object',stat:true,forced:!nativeSymbol},{getOwnPropertyNames:$getOwnPropertyNames,getOwnPropertySymbols:$getOwnPropertySymbols});_export({target:'Object',stat:true,forced:fails(function(){objectGetOwnPropertySymbols.f(1);})},{getOwnPropertySymbols:function getOwnPropertySymbols(it){return objectGetOwnPropertySymbols.f(toObject(it));}});if($stringify){var FORCED_JSON_STRINGIFY=!nativeSymbol||fails(function(){var symbol=$Symbol();return $stringify([symbol])!='[null]'||$stringify({a:symbol})!='{}'||$stringify(Object(symbol))!='{}';});_export({target:'JSON',stat:true,forced:FORCED_JSON_STRINGIFY},{stringify:function stringify(it,replacer,space){var args=[it];var index=1;var $replacer;while(arguments.length>index)args.push(arguments[index++]);$replacer=replacer;if(!isObject(replacer)&&it===undefined||isSymbol(it))return;if(!isArray(replacer))replacer=function(key,value){if(typeof $replacer=='function')value=$replacer.call(this,key,value);if(!isSymbol(value))return value;};args[1]=replacer;return $stringify.apply(null,args);}});}
if(!$Symbol[PROTOTYPE$1][TO_PRIMITIVE]){createNonEnumerableProperty($Symbol[PROTOTYPE$1],TO_PRIMITIVE,$Symbol[PROTOTYPE$1].valueOf);}
setToStringTag($Symbol,SYMBOL);hiddenKeys[HIDDEN]=true;var defineProperty$2=objectDefineProperty.f;var NativeSymbol=global_1.Symbol;if(descriptors&&typeof NativeSymbol=='function'&&(!('description'in NativeSymbol.prototype)||NativeSymbol().description!==undefined)){var EmptyStringDescriptionStore={};var SymbolWrapper=function Symbol(){var description=arguments.length<1||arguments[0]===undefined?undefined:String(arguments[0]);var result=this instanceof SymbolWrapper?new NativeSymbol(description):description===undefined?NativeSymbol():NativeSymbol(description);if(description==='')EmptyStringDescriptionStore[result]=true;return result;};copyConstructorProperties(SymbolWrapper,NativeSymbol);var symbolPrototype=SymbolWrapper.prototype=NativeSymbol.prototype;symbolPrototype.constructor=SymbolWrapper;var symbolToString=symbolPrototype.toString;var native=String(NativeSymbol('test'))=='Symbol(test)';var regexp=/^Symbol\((.*)\)[^)]+$/;defineProperty$2(symbolPrototype,'description',{configurable:true,get:function description(){var symbol=isObject(this)?this.valueOf():this;var string=symbolToString.call(symbol);if(has(EmptyStringDescriptionStore,symbol))return '';var desc=native?string.slice(7,-1):string.replace(regexp,'$1');return desc===''?undefined:desc;}});_export({global:true,forced:true},{Symbol:SymbolWrapper});}
defineWellKnownSymbol('iterator');var arrayMethodIsStrict=function(METHOD_NAME,argument){var method=[][METHOD_NAME];return!!method&&fails(function(){method.call(null,argument||function(){throw 1;},1);});};var defineProperty$3=Object.defineProperty;var cache={};var thrower=function(it){throw it;};var arrayMethodUsesToLength=function(METHOD_NAME,options){if(has(cache,METHOD_NAME))return cache[METHOD_NAME];if(!options)options={};var method=[][METHOD_NAME];var ACCESSORS=has(options,'ACCESSORS')?options.ACCESSORS:false;var argument0=has(options,0)?options[0]:thrower;var argument1=has(options,1)?options[1]:undefined;return cache[METHOD_NAME]=!!method&&!fails(function(){if(ACCESSORS&&!descriptors)return true;var O={length:-1};if(ACCESSORS)defineProperty$3(O,1,{enumerable:true,get:thrower});else O[1]=1;method.call(O,argument0,argument1);});};var $forEach$1=arrayIteration.forEach;var STRICT_METHOD=arrayMethodIsStrict('forEach');var USES_TO_LENGTH=arrayMethodUsesToLength('forEach');var arrayForEach=(!STRICT_METHOD||!USES_TO_LENGTH)?function forEach(callbackfn){return $forEach$1(this,callbackfn,arguments.length>1?arguments[1]:undefined);}:[].forEach;_export({target:'Array',proto:true,forced:[].forEach!=arrayForEach},{forEach:arrayForEach});var $indexOf=arrayIncludes.indexOf;var nativeIndexOf=[].indexOf;var NEGATIVE_ZERO=!!nativeIndexOf&&1/[1].indexOf(1,-0)<0;var STRICT_METHOD$1=arrayMethodIsStrict('indexOf');var USES_TO_LENGTH$1=arrayMethodUsesToLength('indexOf',{ACCESSORS:true,1:0});_export({target:'Array',proto:true,forced:NEGATIVE_ZERO||!STRICT_METHOD$1||!USES_TO_LENGTH$1},{indexOf:function indexOf(searchElement){return NEGATIVE_ZERO?nativeIndexOf.apply(this,arguments)||0:$indexOf(this,searchElement,arguments.length>1?arguments[1]:undefined);}});var UNSCOPABLES=wellKnownSymbol('unscopables');var ArrayPrototype=Array.prototype;if(ArrayPrototype[UNSCOPABLES]==undefined){objectDefineProperty.f(ArrayPrototype,UNSCOPABLES,{configurable:true,value:objectCreate(null)});}
var addToUnscopables=function(key){ArrayPrototype[UNSCOPABLES][key]=true;};var iterators={};var correctPrototypeGetter=!fails(function(){function F(){}
F.prototype.constructor=null;return Object.getPrototypeOf(new F())!==F.prototype;});var IE_PROTO$1=sharedKey('IE_PROTO');var ObjectPrototype$1=Object.prototype;var objectGetPrototypeOf=correctPrototypeGetter?Object.getPrototypeOf:function(O){O=toObject(O);if(has(O,IE_PROTO$1))return O[IE_PROTO$1];if(typeof O.constructor=='function'&&O instanceof O.constructor){return O.constructor.prototype;}return O instanceof Object?ObjectPrototype$1:null;};var ITERATOR=wellKnownSymbol('iterator');var BUGGY_SAFARI_ITERATORS=false;var returnThis=function(){return this;};var IteratorPrototype,PrototypeOfArrayIteratorPrototype,arrayIterator;if([].keys){arrayIterator=[].keys();if(!('next'in arrayIterator))BUGGY_SAFARI_ITERATORS=true;else{PrototypeOfArrayIteratorPrototype=objectGetPrototypeOf(objectGetPrototypeOf(arrayIterator));if(PrototypeOfArrayIteratorPrototype!==Object.prototype)IteratorPrototype=PrototypeOfArrayIteratorPrototype;}}
if(IteratorPrototype==undefined)IteratorPrototype={};if(!has(IteratorPrototype,ITERATOR)){createNonEnumerableProperty(IteratorPrototype,ITERATOR,returnThis);}
var iteratorsCore={IteratorPrototype:IteratorPrototype,BUGGY_SAFARI_ITERATORS:BUGGY_SAFARI_ITERATORS};var IteratorPrototype$1=iteratorsCore.IteratorPrototype;var returnThis$1=function(){return this;};var createIteratorConstructor=function(IteratorConstructor,NAME,next){var TO_STRING_TAG=NAME+' Iterator';IteratorConstructor.prototype=objectCreate(IteratorPrototype$1,{next:createPropertyDescriptor(1,next)});setToStringTag(IteratorConstructor,TO_STRING_TAG,false);iterators[TO_STRING_TAG]=returnThis$1;return IteratorConstructor;};var aPossiblePrototype=function(it){if(!isObject(it)&&it!==null){throw TypeError("Can't set "+String(it)+' as a prototype');}return it;};var objectSetPrototypeOf=Object.setPrototypeOf||('__proto__'in{}?function(){var CORRECT_SETTER=false;var test={};var setter;try{setter=Object.getOwnPropertyDescriptor(Object.prototype,'__proto__').set;setter.call(test,[]);CORRECT_SETTER=test instanceof Array;}catch(error){}
return function setPrototypeOf(O,proto){anObject(O);aPossiblePrototype(proto);if(CORRECT_SETTER)setter.call(O,proto);else O.__proto__=proto;return O;};}():undefined);var IteratorPrototype$2=iteratorsCore.IteratorPrototype;var BUGGY_SAFARI_ITERATORS$1=iteratorsCore.BUGGY_SAFARI_ITERATORS;var ITERATOR$1=wellKnownSymbol('iterator');var KEYS='keys';var VALUES='values';var ENTRIES='entries';var returnThis$2=function(){return this;};var defineIterator=function(Iterable,NAME,IteratorConstructor,next,DEFAULT,IS_SET,FORCED){createIteratorConstructor(IteratorConstructor,NAME,next);var getIterationMethod=function(KIND){if(KIND===DEFAULT&&defaultIterator)return defaultIterator;if(!BUGGY_SAFARI_ITERATORS$1&&KIND in IterablePrototype)return IterablePrototype[KIND];switch(KIND){case KEYS:return function keys(){return new IteratorConstructor(this,KIND);};case VALUES:return function values(){return new IteratorConstructor(this,KIND);};case ENTRIES:return function entries(){return new IteratorConstructor(this,KIND);};}return function(){return new IteratorConstructor(this);};};var TO_STRING_TAG=NAME+' Iterator';var INCORRECT_VALUES_NAME=false;var IterablePrototype=Iterable.prototype;var nativeIterator=IterablePrototype[ITERATOR$1]||IterablePrototype['@@iterator']||DEFAULT&&IterablePrototype[DEFAULT];var defaultIterator=!BUGGY_SAFARI_ITERATORS$1&&nativeIterator||getIterationMethod(DEFAULT);var anyNativeIterator=NAME=='Array'?IterablePrototype.entries||nativeIterator:nativeIterator;var CurrentIteratorPrototype,methods,KEY;if(anyNativeIterator){CurrentIteratorPrototype=objectGetPrototypeOf(anyNativeIterator.call(new Iterable()));if(IteratorPrototype$2!==Object.prototype&&CurrentIteratorPrototype.next){if(objectGetPrototypeOf(CurrentIteratorPrototype)!==IteratorPrototype$2){if(objectSetPrototypeOf){objectSetPrototypeOf(CurrentIteratorPrototype,IteratorPrototype$2);}else if(typeof CurrentIteratorPrototype[ITERATOR$1]!='function'){createNonEnumerableProperty(CurrentIteratorPrototype,ITERATOR$1,returnThis$2);}}
setToStringTag(CurrentIteratorPrototype,TO_STRING_TAG,true);}}
if(DEFAULT==VALUES&&nativeIterator&&nativeIterator.name!==VALUES){INCORRECT_VALUES_NAME=true;defaultIterator=function values(){return nativeIterator.call(this);};}
if(IterablePrototype[ITERATOR$1]!==defaultIterator){createNonEnumerableProperty(IterablePrototype,ITERATOR$1,defaultIterator);}
iterators[NAME]=defaultIterator;if(DEFAULT){methods={values:getIterationMethod(VALUES),keys:IS_SET?defaultIterator:getIterationMethod(KEYS),entries:getIterationMethod(ENTRIES)};if(FORCED)for(KEY in methods){if(BUGGY_SAFARI_ITERATORS$1||INCORRECT_VALUES_NAME||!(KEY in IterablePrototype)){redefine(IterablePrototype,KEY,methods[KEY]);}}else _export({target:NAME,proto:true,forced:BUGGY_SAFARI_ITERATORS$1||INCORRECT_VALUES_NAME},methods);}
return methods;};var ARRAY_ITERATOR='Array Iterator';var setInternalState$1=internalState.set;var getInternalState$1=internalState.getterFor(ARRAY_ITERATOR);var es_array_iterator=defineIterator(Array,'Array',function(iterated,kind){setInternalState$1(this,{type:ARRAY_ITERATOR,target:toIndexedObject(iterated),index:0,kind:kind});},function(){var state=getInternalState$1(this);var target=state.target;var kind=state.kind;var index=state.index++;if(!target||index>=target.length){state.target=undefined;return{value:undefined,done:true};}
if(kind=='keys')return{value:index,done:false};if(kind=='values')return{value:target[index],done:false};return{value:[index,target[index]],done:false};},'values');iterators.Arguments=iterators.Array;addToUnscopables('keys');addToUnscopables('values');addToUnscopables('entries');var nativeJoin=[].join;var ES3_STRINGS=indexedObject!=Object;var STRICT_METHOD$2=arrayMethodIsStrict('join',',');_export({target:'Array',proto:true,forced:ES3_STRINGS||!STRICT_METHOD$2},{join:function join(separator){return nativeJoin.call(toIndexedObject(this),separator===undefined?',':separator);}});var createProperty=function(object,key,value){var propertyKey=toPrimitive(key);if(propertyKey in object)objectDefineProperty.f(object,propertyKey,createPropertyDescriptor(0,value));else object[propertyKey]=value;};var engineUserAgent=getBuiltIn('navigator','userAgent')||'';var process=global_1.process;var versions=process&&process.versions;var v8=versions&&versions.v8;var match,version;if(v8){match=v8.split('.');version=match[0]+match[1];}else if(engineUserAgent){match=engineUserAgent.match(/Edge\/(\d+)/);if(!match||match[1]>=74){match=engineUserAgent.match(/Chrome\/(\d+)/);if(match)version=match[1];}}
var engineV8Version=version&&+version;var SPECIES$1=wellKnownSymbol('species');var arrayMethodHasSpeciesSupport=function(METHOD_NAME){return engineV8Version>=51||!fails(function(){var array=[];var constructor=array.constructor={};constructor[SPECIES$1]=function(){return{foo:1};};return array[METHOD_NAME](Boolean).foo!==1;});};var HAS_SPECIES_SUPPORT=arrayMethodHasSpeciesSupport('slice');var USES_TO_LENGTH$2=arrayMethodUsesToLength('slice',{ACCESSORS:true,0:0,1:2});var SPECIES$2=wellKnownSymbol('species');var nativeSlice=[].slice;var max$1=Math.max;_export({target:'Array',proto:true,forced:!HAS_SPECIES_SUPPORT||!USES_TO_LENGTH$2},{slice:function slice(start,end){var O=toIndexedObject(this);var length=toLength(O.length);var k=toAbsoluteIndex(start,length);var fin=toAbsoluteIndex(end===undefined?length:end,length);var Constructor,result,n;if(isArray(O)){Constructor=O.constructor;if(typeof Constructor=='function'&&(Constructor===Array||isArray(Constructor.prototype))){Constructor=undefined;}else if(isObject(Constructor)){Constructor=Constructor[SPECIES$2];if(Constructor===null)Constructor=undefined;}
if(Constructor===Array||Constructor===undefined){return nativeSlice.call(O,k,fin);}}
result=new(Constructor===undefined?Array:Constructor)(max$1(fin-k,0));for(n=0;k<fin;k++,n++)if(k in O)createProperty(result,n,O[k]);result.length=n;return result;}});var TO_STRING_TAG$1=wellKnownSymbol('toStringTag');var test={};test[TO_STRING_TAG$1]='z';var toStringTagSupport=String(test)==='[object z]';var TO_STRING_TAG$2=wellKnownSymbol('toStringTag');var CORRECT_ARGUMENTS=classofRaw(function(){return arguments;}())=='Arguments';var tryGet=function(it,key){try{return it[key];}catch(error){}};var classof=toStringTagSupport?classofRaw:function(it){var O,tag,result;return it===undefined?'Undefined':it===null?'Null':typeof(tag=tryGet(O=Object(it),TO_STRING_TAG$2))=='string'?tag:CORRECT_ARGUMENTS?classofRaw(O):(result=classofRaw(O))=='Object'&&typeof O.callee=='function'?'Arguments':result;};var objectToString=toStringTagSupport?{}.toString:function toString(){return '[object '+classof(this)+']';};if(!toStringTagSupport){redefine(Object.prototype,'toString',objectToString,{unsafe:true});}
var regexpFlags=function(){var that=anObject(this);var result='';if(that.global)result+='g';if(that.ignoreCase)result+='i';if(that.multiline)result+='m';if(that.dotAll)result+='s';if(that.unicode)result+='u';if(that.sticky)result+='y';return result;};function RE(s,f){return RegExp(s,f);}
var UNSUPPORTED_Y=fails(function(){var re=RE('a','y');re.lastIndex=2;return re.exec('abcd')!=null;});var BROKEN_CARET=fails(function(){var re=RE('^r','gy');re.lastIndex=2;return re.exec('str')!=null;});var regexpStickyHelpers={UNSUPPORTED_Y:UNSUPPORTED_Y,BROKEN_CARET:BROKEN_CARET};var nativeExec=RegExp.prototype.exec;var nativeReplace=String.prototype.replace;var patchedExec=nativeExec;var UPDATES_LAST_INDEX_WRONG=(function(){var re1=/a/;var re2=/b*/g;nativeExec.call(re1,'a');nativeExec.call(re2,'a');return re1.lastIndex!==0||re2.lastIndex!==0;})();var UNSUPPORTED_Y$1=regexpStickyHelpers.UNSUPPORTED_Y||regexpStickyHelpers.BROKEN_CARET;var NPCG_INCLUDED=/()??/.exec('')[1]!==undefined;var PATCH=UPDATES_LAST_INDEX_WRONG||NPCG_INCLUDED||UNSUPPORTED_Y$1;if(PATCH){patchedExec=function exec(str){var re=this;var lastIndex,reCopy,match,i;var sticky=UNSUPPORTED_Y$1&&re.sticky;var flags=regexpFlags.call(re);var source=re.source;var charsAdded=0;var strCopy=str;if(sticky){flags=flags.replace('y','');if(flags.indexOf('g')===-1){flags+='g';}
strCopy=String(str).slice(re.lastIndex);if(re.lastIndex>0&&(!re.multiline||re.multiline&&str[re.lastIndex-1]!=='\n')){source='(?: '+source+')';strCopy=' '+strCopy;charsAdded++;}
reCopy=new RegExp('^(?:'+source+')',flags);}
if(NPCG_INCLUDED){reCopy=new RegExp('^'+source+'$(?!\\s)',flags);}
if(UPDATES_LAST_INDEX_WRONG)lastIndex=re.lastIndex;match=nativeExec.call(sticky?reCopy:re,strCopy);if(sticky){if(match){match.input=match.input.slice(charsAdded);match[0]=match[0].slice(charsAdded);match.index=re.lastIndex;re.lastIndex+=match[0].length;}else re.lastIndex=0;}else if(UPDATES_LAST_INDEX_WRONG&&match){re.lastIndex=re.global?match.index+match[0].length:lastIndex;}
if(NPCG_INCLUDED&&match&&match.length>1){nativeReplace.call(match[0],reCopy,function(){for(i=1;i<arguments.length-2;i++){if(arguments[i]===undefined)match[i]=undefined;}});}
return match;};}
var regexpExec=patchedExec;_export({target:'RegExp',proto:true,forced:/./.exec!==regexpExec},{exec:regexpExec});var TO_STRING='toString';var RegExpPrototype=RegExp.prototype;var nativeToString=RegExpPrototype[TO_STRING];var NOT_GENERIC=fails(function(){return nativeToString.call({source:'a',flags:'b'})!='/a/b';});var INCORRECT_NAME=nativeToString.name!=TO_STRING;if(NOT_GENERIC||INCORRECT_NAME){redefine(RegExp.prototype,TO_STRING,function toString(){var R=anObject(this);var p=String(R.source);var rf=R.flags;var f=String(rf===undefined&&R instanceof RegExp&&!('flags'in RegExpPrototype)?regexpFlags.call(R):rf);return '/'+p+'/'+f;},{unsafe:true});}
var createMethod$2=function(CONVERT_TO_STRING){return function($this,pos){var S=String(requireObjectCoercible($this));var position=toInteger(pos);var size=S.length;var first,second;if(position<0||position>=size)return CONVERT_TO_STRING?'':undefined;first=S.charCodeAt(position);return first<0xD800||first>0xDBFF||position+1===size||(second=S.charCodeAt(position+1))<0xDC00||second>0xDFFF?CONVERT_TO_STRING?S.charAt(position):first:CONVERT_TO_STRING?S.slice(position,position+2):(first-0xD800<<10)+(second-0xDC00)+0x10000;};};var stringMultibyte={codeAt:createMethod$2(false),charAt:createMethod$2(true)};var charAt=stringMultibyte.charAt;var STRING_ITERATOR='String Iterator';var setInternalState$2=internalState.set;var getInternalState$2=internalState.getterFor(STRING_ITERATOR);defineIterator(String,'String',function(iterated){setInternalState$2(this,{type:STRING_ITERATOR,string:String(iterated),index:0});},function next(){var state=getInternalState$2(this);var string=state.string;var index=state.index;var point;if(index>=string.length)return{value:undefined,done:true};point=charAt(string,index);state.index+=point.length;return{value:point,done:false};});var SPECIES$3=wellKnownSymbol('species');var REPLACE_SUPPORTS_NAMED_GROUPS=!fails(function(){var re=/./;re.exec=function(){var result=[];result.groups={a:'7'};return result;};return ''.replace(re,'$<a>')!=='7';});var REPLACE_KEEPS_$0=(function(){return 'a'.replace(/./,'$0')==='$0';})();var REPLACE=wellKnownSymbol('replace');var REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE=(function(){if(/./[REPLACE]){return /./[REPLACE]('a','$0')==='';}
return false;})();var SPLIT_WORKS_WITH_OVERWRITTEN_EXEC=!fails(function(){var re=/(?:)/;var originalExec=re.exec;re.exec=function(){return originalExec.apply(this,arguments);};var result='ab'.split(re);return result.length!==2||result[0]!=='a'||result[1]!=='b';});var fixRegexpWellKnownSymbolLogic=function(KEY,length,exec,sham){var SYMBOL=wellKnownSymbol(KEY);var DELEGATES_TO_SYMBOL=!fails(function(){var O={};O[SYMBOL]=function(){return 7;};return ''[KEY](O)!=7;});var DELEGATES_TO_EXEC=DELEGATES_TO_SYMBOL&&!fails(function(){var execCalled=false;var re=/a/;if(KEY==='split'){re={};re.constructor={};re.constructor[SPECIES$3]=function(){return re;};re.flags='';re[SYMBOL]=/./[SYMBOL];}
re.exec=function(){execCalled=true;return null;};re[SYMBOL]('');return!execCalled;});if(!DELEGATES_TO_SYMBOL||!DELEGATES_TO_EXEC||(KEY==='replace'&&!(REPLACE_SUPPORTS_NAMED_GROUPS&&REPLACE_KEEPS_$0&&!REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE))||(KEY==='split'&&!SPLIT_WORKS_WITH_OVERWRITTEN_EXEC)){var nativeRegExpMethod=/./[SYMBOL];var methods=exec(SYMBOL,''[KEY],function(nativeMethod,regexp,str,arg2,forceStringMethod){if(regexp.exec===regexpExec){if(DELEGATES_TO_SYMBOL&&!forceStringMethod){return{done:true,value:nativeRegExpMethod.call(regexp,str,arg2)};}
return{done:true,value:nativeMethod.call(str,regexp,arg2)};}
return{done:false};},{REPLACE_KEEPS_$0:REPLACE_KEEPS_$0,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE});var stringMethod=methods[0];var regexMethod=methods[1];redefine(String.prototype,KEY,stringMethod);redefine(RegExp.prototype,SYMBOL,length==2?function(string,arg){return regexMethod.call(string,this,arg);}:function(string){return regexMethod.call(string,this);});}
if(sham)createNonEnumerableProperty(RegExp.prototype[SYMBOL],'sham',true);};var charAt$1=stringMultibyte.charAt;var advanceStringIndex=function(S,index,unicode){return index+(unicode?charAt$1(S,index).length:1);};var regexpExecAbstract=function(R,S){var exec=R.exec;if(typeof exec==='function'){var result=exec.call(R,S);if(typeof result!=='object'){throw TypeError('RegExp exec method returned something other than an Object or null');}
return result;}
if(classofRaw(R)!=='RegExp'){throw TypeError('RegExp#exec called on incompatible receiver');}
return regexpExec.call(R,S);};var max$2=Math.max;var min$2=Math.min;var floor$1=Math.floor;var SUBSTITUTION_SYMBOLS=/\$([$&'`]|\d\d?|<[^>]*>)/g;var SUBSTITUTION_SYMBOLS_NO_NAMED=/\$([$&'`]|\d\d?)/g;var maybeToString=function(it){return it===undefined?it:String(it);};fixRegexpWellKnownSymbolLogic('replace',2,function(REPLACE,nativeReplace,maybeCallNative,reason){var REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE=reason.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE;var REPLACE_KEEPS_$0=reason.REPLACE_KEEPS_$0;var UNSAFE_SUBSTITUTE=REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE?'$':'$0';return[function replace(searchValue,replaceValue){var O=requireObjectCoercible(this);var replacer=searchValue==undefined?undefined:searchValue[REPLACE];return replacer!==undefined?replacer.call(searchValue,O,replaceValue):nativeReplace.call(String(O),searchValue,replaceValue);},function(regexp,replaceValue){if((!REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE&&REPLACE_KEEPS_$0)||(typeof replaceValue==='string'&&replaceValue.indexOf(UNSAFE_SUBSTITUTE)===-1)){var res=maybeCallNative(nativeReplace,regexp,this,replaceValue);if(res.done)return res.value;}
var rx=anObject(regexp);var S=String(this);var functionalReplace=typeof replaceValue==='function';if(!functionalReplace)replaceValue=String(replaceValue);var global=rx.global;if(global){var fullUnicode=rx.unicode;rx.lastIndex=0;}
var results=[];while(true){var result=regexpExecAbstract(rx,S);if(result===null)break;results.push(result);if(!global)break;var matchStr=String(result[0]);if(matchStr==='')rx.lastIndex=advanceStringIndex(S,toLength(rx.lastIndex),fullUnicode);}
var accumulatedResult='';var nextSourcePosition=0;for(var i=0;i<results.length;i++){result=results[i];var matched=String(result[0]);var position=max$2(min$2(toInteger(result.index),S.length),0);var captures=[];for(var j=1;j<result.length;j++)captures.push(maybeToString(result[j]));var namedCaptures=result.groups;if(functionalReplace){var replacerArgs=[matched].concat(captures,position,S);if(namedCaptures!==undefined)replacerArgs.push(namedCaptures);var replacement=String(replaceValue.apply(undefined,replacerArgs));}else{replacement=getSubstitution(matched,S,position,captures,namedCaptures,replaceValue);}
if(position>=nextSourcePosition){accumulatedResult+=S.slice(nextSourcePosition,position)+replacement;nextSourcePosition=position+matched.length;}}
return accumulatedResult+S.slice(nextSourcePosition);}];function getSubstitution(matched,str,position,captures,namedCaptures,replacement){var tailPos=position+matched.length;var m=captures.length;var symbols=SUBSTITUTION_SYMBOLS_NO_NAMED;if(namedCaptures!==undefined){namedCaptures=toObject(namedCaptures);symbols=SUBSTITUTION_SYMBOLS;}
return nativeReplace.call(replacement,symbols,function(match,ch){var capture;switch(ch.charAt(0)){case '$':return '$';case '&':return matched;case '`':return str.slice(0,position);case "'":return str.slice(tailPos);case '<':capture=namedCaptures[ch.slice(1,-1)];break;default:var n=+ch;if(n===0)return match;if(n>m){var f=floor$1(n/10);if(f===0)return match;if(f<=m)return captures[f-1]===undefined?ch.charAt(1):captures[f-1]+ch.charAt(1);return match;}
capture=captures[n-1];}
return capture===undefined?'':capture;});}});var sameValue=Object.is||function is(x,y){return x===y?x!==0||1/x===1/y:x!=x&&y!=y;};fixRegexpWellKnownSymbolLogic('search',1,function(SEARCH,nativeSearch,maybeCallNative){return[function search(regexp){var O=requireObjectCoercible(this);var searcher=regexp==undefined?undefined:regexp[SEARCH];return searcher!==undefined?searcher.call(regexp,O):new RegExp(regexp)[SEARCH](String(O));},function(regexp){var res=maybeCallNative(nativeSearch,regexp,this);if(res.done)return res.value;var rx=anObject(regexp);var S=String(this);var previousLastIndex=rx.lastIndex;if(!sameValue(previousLastIndex,0))rx.lastIndex=0;var result=regexpExecAbstract(rx,S);if(!sameValue(rx.lastIndex,previousLastIndex))rx.lastIndex=previousLastIndex;return result===null?-1:result.index;}];});var MATCH=wellKnownSymbol('match');var isRegexp=function(it){var isRegExp;return isObject(it)&&((isRegExp=it[MATCH])!==undefined?!!isRegExp:classofRaw(it)=='RegExp');};var SPECIES$4=wellKnownSymbol('species');var speciesConstructor=function(O,defaultConstructor){var C=anObject(O).constructor;var S;return C===undefined||(S=anObject(C)[SPECIES$4])==undefined?defaultConstructor:aFunction$1(S);};var arrayPush=[].push;var min$3=Math.min;var MAX_UINT32=0xFFFFFFFF;var SUPPORTS_Y=!fails(function(){return!RegExp(MAX_UINT32,'y');});fixRegexpWellKnownSymbolLogic('split',2,function(SPLIT,nativeSplit,maybeCallNative){var internalSplit;if('abbc'.split(/(b)*/)[1]=='c'||'test'.split(/(?:)/,-1).length!=4||'ab'.split(/(?:ab)*/).length!=2||'.'.split(/(.?)(.?)/).length!=4||'.'.split(/()()/).length>1||''.split(/.?/).length){internalSplit=function(separator,limit){var string=String(requireObjectCoercible(this));var lim=limit===undefined?MAX_UINT32:limit>>>0;if(lim===0)return[];if(separator===undefined)return[string];if(!isRegexp(separator)){return nativeSplit.call(string,separator,lim);}
var output=[];var flags=(separator.ignoreCase?'i':'')+
(separator.multiline?'m':'')+
(separator.unicode?'u':'')+
(separator.sticky?'y':'');var lastLastIndex=0;var separatorCopy=new RegExp(separator.source,flags+'g');var match,lastIndex,lastLength;while(match=regexpExec.call(separatorCopy,string)){lastIndex=separatorCopy.lastIndex;if(lastIndex>lastLastIndex){output.push(string.slice(lastLastIndex,match.index));if(match.length>1&&match.index<string.length)arrayPush.apply(output,match.slice(1));lastLength=match[0].length;lastLastIndex=lastIndex;if(output.length>=lim)break;}
if(separatorCopy.lastIndex===match.index)separatorCopy.lastIndex++;}
if(lastLastIndex===string.length){if(lastLength||!separatorCopy.test(''))output.push('');}else output.push(string.slice(lastLastIndex));return output.length>lim?output.slice(0,lim):output;};}else if('0'.split(undefined,0).length){internalSplit=function(separator,limit){return separator===undefined&&limit===0?[]:nativeSplit.call(this,separator,limit);};}else internalSplit=nativeSplit;return[function split(separator,limit){var O=requireObjectCoercible(this);var splitter=separator==undefined?undefined:separator[SPLIT];return splitter!==undefined?splitter.call(separator,O,limit):internalSplit.call(String(O),separator,limit);},function(regexp,limit){var res=maybeCallNative(internalSplit,regexp,this,limit,internalSplit!==nativeSplit);if(res.done)return res.value;var rx=anObject(regexp);var S=String(this);var C=speciesConstructor(rx,RegExp);var unicodeMatching=rx.unicode;var flags=(rx.ignoreCase?'i':'')+
(rx.multiline?'m':'')+
(rx.unicode?'u':'')+
(SUPPORTS_Y?'y':'g');var splitter=new C(SUPPORTS_Y?rx:'^(?:'+rx.source+')',flags);var lim=limit===undefined?MAX_UINT32:limit>>>0;if(lim===0)return[];if(S.length===0)return regexpExecAbstract(splitter,S)===null?[S]:[];var p=0;var q=0;var A=[];while(q<S.length){splitter.lastIndex=SUPPORTS_Y?q:0;var z=regexpExecAbstract(splitter,SUPPORTS_Y?S:S.slice(q));var e;if(z===null||(e=min$3(toLength(splitter.lastIndex+(SUPPORTS_Y?0:q)),S.length))===p){q=advanceStringIndex(S,q,unicodeMatching);}else{A.push(S.slice(p,q));if(A.length===lim)return A;for(var i=1;i<=z.length-1;i++){A.push(z[i]);if(A.length===lim)return A;}
q=p=e;}}
A.push(S.slice(p));return A;}];},!SUPPORTS_Y);var domIterables={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0};for(var COLLECTION_NAME in domIterables){var Collection=global_1[COLLECTION_NAME];var CollectionPrototype=Collection&&Collection.prototype;if(CollectionPrototype&&CollectionPrototype.forEach!==arrayForEach)try{createNonEnumerableProperty(CollectionPrototype,'forEach',arrayForEach);}catch(error){CollectionPrototype.forEach=arrayForEach;}}
var ITERATOR$2=wellKnownSymbol('iterator');var TO_STRING_TAG$3=wellKnownSymbol('toStringTag');var ArrayValues=es_array_iterator.values;for(var COLLECTION_NAME$1 in domIterables){var Collection$1=global_1[COLLECTION_NAME$1];var CollectionPrototype$1=Collection$1&&Collection$1.prototype;if(CollectionPrototype$1){if(CollectionPrototype$1[ITERATOR$2]!==ArrayValues)try{createNonEnumerableProperty(CollectionPrototype$1,ITERATOR$2,ArrayValues);}catch(error){CollectionPrototype$1[ITERATOR$2]=ArrayValues;}
if(!CollectionPrototype$1[TO_STRING_TAG$3]){createNonEnumerableProperty(CollectionPrototype$1,TO_STRING_TAG$3,COLLECTION_NAME$1);}
if(domIterables[COLLECTION_NAME$1])for(var METHOD_NAME in es_array_iterator){if(CollectionPrototype$1[METHOD_NAME]!==es_array_iterator[METHOD_NAME])try{createNonEnumerableProperty(CollectionPrototype$1,METHOD_NAME,es_array_iterator[METHOD_NAME]);}catch(error){CollectionPrototype$1[METHOD_NAME]=es_array_iterator[METHOD_NAME];}}}}
var ITERATOR$3=wellKnownSymbol('iterator');var nativeUrl=!fails(function(){var url=new URL('b?a=1&b=2&c=3','http://a');var searchParams=url.searchParams;var result='';url.pathname='c%20d';searchParams.forEach(function(value,key){searchParams['delete']('b');result+=key+value;});return(isPure&&!url.toJSON)||!searchParams.sort||url.href!=='http://a/c%20d?a=1&c=3'||searchParams.get('c')!=='3'||String(new URLSearchParams('?a=1'))!=='a=1'||!searchParams[ITERATOR$3]||new URL('https://a@b').username!=='a'||new URLSearchParams(new URLSearchParams('a=b')).get('a')!=='b'||new URL('http://ÑÐµÑÑ').host!=='xn--e1aybc'||new URL('http://a#Ð±').hash!=='#%D0%B1'||result!=='a1c3'||new URL('http://x',undefined).host!=='x';});var anInstance=function(it,Constructor,name){if(!(it instanceof Constructor)){throw TypeError('Incorrect '+(name?name+' ':'')+'invocation');}return it;};var nativeAssign=Object.assign;var defineProperty$4=Object.defineProperty;var objectAssign=!nativeAssign||fails(function(){if(descriptors&&nativeAssign({b:1},nativeAssign(defineProperty$4({},'a',{enumerable:true,get:function(){defineProperty$4(this,'b',{value:3,enumerable:false});}}),{b:2})).b!==1)return true;var A={};var B={};var symbol=Symbol();var alphabet='abcdefghijklmnopqrst';A[symbol]=7;alphabet.split('').forEach(function(chr){B[chr]=chr;});return nativeAssign({},A)[symbol]!=7||objectKeys(nativeAssign({},B)).join('')!=alphabet;})?function assign(target,source){var T=toObject(target);var argumentsLength=arguments.length;var index=1;var getOwnPropertySymbols=objectGetOwnPropertySymbols.f;var propertyIsEnumerable=objectPropertyIsEnumerable.f;while(argumentsLength>index){var S=indexedObject(arguments[index++]);var keys=getOwnPropertySymbols?objectKeys(S).concat(getOwnPropertySymbols(S)):objectKeys(S);var length=keys.length;var j=0;var key;while(length>j){key=keys[j++];if(!descriptors||propertyIsEnumerable.call(S,key))T[key]=S[key];}}return T;}:nativeAssign;var callWithSafeIterationClosing=function(iterator,fn,value,ENTRIES){try{return ENTRIES?fn(anObject(value)[0],value[1]):fn(value);}catch(error){var returnMethod=iterator['return'];if(returnMethod!==undefined)anObject(returnMethod.call(iterator));throw error;}};var ITERATOR$4=wellKnownSymbol('iterator');var ArrayPrototype$1=Array.prototype;var isArrayIteratorMethod=function(it){return it!==undefined&&(iterators.Array===it||ArrayPrototype$1[ITERATOR$4]===it);};var ITERATOR$5=wellKnownSymbol('iterator');var getIteratorMethod=function(it){if(it!=undefined)return it[ITERATOR$5]||it['@@iterator']||iterators[classof(it)];};var arrayFrom=function from(arrayLike){var O=toObject(arrayLike);var C=typeof this=='function'?this:Array;var argumentsLength=arguments.length;var mapfn=argumentsLength>1?arguments[1]:undefined;var mapping=mapfn!==undefined;var iteratorMethod=getIteratorMethod(O);var index=0;var length,result,step,iterator,next,value;if(mapping)mapfn=functionBindContext(mapfn,argumentsLength>2?arguments[2]:undefined,2);if(iteratorMethod!=undefined&&!(C==Array&&isArrayIteratorMethod(iteratorMethod))){iterator=iteratorMethod.call(O);next=iterator.next;result=new C();for(;!(step=next.call(iterator)).done;index++){value=mapping?callWithSafeIterationClosing(iterator,mapfn,[step.value,index],true):step.value;createProperty(result,index,value);}}else{length=toLength(O.length);result=new C(length);for(;length>index;index++){value=mapping?mapfn(O[index],index):O[index];createProperty(result,index,value);}}
result.length=index;return result;};var maxInt=2147483647;var base=36;var tMin=1;var tMax=26;var skew=38;var damp=700;var initialBias=72;var initialN=128;var delimiter='-';var regexNonASCII=/[^\0-\u007E]/;var regexSeparators=/[.\u3002\uFF0E\uFF61]/g;var OVERFLOW_ERROR='Overflow: input needs wider integers to process';var baseMinusTMin=base-tMin;var floor$2=Math.floor;var stringFromCharCode=String.fromCharCode;var ucs2decode=function(string){var output=[];var counter=0;var length=string.length;while(counter<length){var value=string.charCodeAt(counter++);if(value>=0xD800&&value<=0xDBFF&&counter<length){var extra=string.charCodeAt(counter++);if((extra&0xFC00)==0xDC00){output.push(((value&0x3FF)<<10)+(extra&0x3FF)+0x10000);}else{output.push(value);counter--;}}else{output.push(value);}}
return output;};var digitToBasic=function(digit){return digit+22+75*(digit<26);};var adapt=function(delta,numPoints,firstTime){var k=0;delta=firstTime?floor$2(delta/damp):delta>>1;delta+=floor$2(delta/numPoints);for(;delta>baseMinusTMin*tMax>>1;k+=base){delta=floor$2(delta/baseMinusTMin);}
return floor$2(k+(baseMinusTMin+1)*delta/(delta+skew));};var encode=function(input){var output=[];input=ucs2decode(input);var inputLength=input.length;var n=initialN;var delta=0;var bias=initialBias;var i,currentValue;for(i=0;i<input.length;i++){currentValue=input[i];if(currentValue<0x80){output.push(stringFromCharCode(currentValue));}}
var basicLength=output.length;var handledCPCount=basicLength;if(basicLength){output.push(delimiter);}
while(handledCPCount<inputLength){var m=maxInt;for(i=0;i<input.length;i++){currentValue=input[i];if(currentValue>=n&&currentValue<m){m=currentValue;}}
var handledCPCountPlusOne=handledCPCount+1;if(m-n>floor$2((maxInt-delta)/handledCPCountPlusOne)){throw RangeError(OVERFLOW_ERROR);}
delta+=(m-n)*handledCPCountPlusOne;n=m;for(i=0;i<input.length;i++){currentValue=input[i];if(currentValue<n&&++delta>maxInt){throw RangeError(OVERFLOW_ERROR);}
if(currentValue==n){var q=delta;for(var k=base;;k+=base){var t=k<=bias?tMin:(k>=bias+tMax?tMax:k-bias);if(q<t)break;var qMinusT=q-t;var baseMinusT=base-t;output.push(stringFromCharCode(digitToBasic(t+qMinusT%baseMinusT)));q=floor$2(qMinusT/baseMinusT);}
output.push(stringFromCharCode(digitToBasic(q)));bias=adapt(delta,handledCPCountPlusOne,handledCPCount==basicLength);delta=0;++handledCPCount;}}
++delta;++n;}
return output.join('');};var stringPunycodeToAscii=function(input){var encoded=[];var labels=input.toLowerCase().replace(regexSeparators,'\u002E').split('.');var i,label;for(i=0;i<labels.length;i++){label=labels[i];encoded.push(regexNonASCII.test(label)?'xn--'+encode(label):label);}
return encoded.join('.');};var redefineAll=function(target,src,options){for(var key in src)redefine(target,key,src[key],options);return target;};var getIterator=function(it){var iteratorMethod=getIteratorMethod(it);if(typeof iteratorMethod!='function'){throw TypeError(String(it)+' is not iterable');}return anObject(iteratorMethod.call(it));};var $fetch=getBuiltIn('fetch');var Headers=getBuiltIn('Headers');var ITERATOR$6=wellKnownSymbol('iterator');var URL_SEARCH_PARAMS='URLSearchParams';var URL_SEARCH_PARAMS_ITERATOR=URL_SEARCH_PARAMS+'Iterator';var setInternalState$3=internalState.set;var getInternalParamsState=internalState.getterFor(URL_SEARCH_PARAMS);var getInternalIteratorState=internalState.getterFor(URL_SEARCH_PARAMS_ITERATOR);var plus=/\+/g;var sequences=Array(4);var percentSequence=function(bytes){return sequences[bytes-1]||(sequences[bytes-1]=RegExp('((?:%[\\da-f]{2}){'+bytes+'})','gi'));};var percentDecode=function(sequence){try{return decodeURIComponent(sequence);}catch(error){return sequence;}};var deserialize=function(it){var result=it.replace(plus,' ');var bytes=4;try{return decodeURIComponent(result);}catch(error){while(bytes){result=result.replace(percentSequence(bytes--),percentDecode);}
return result;}};var find=/[!'()~]|%20/g;var replace={'!':'%21',"'":'%27','(':'%28',')':'%29','~':'%7E','%20':'+'};var replacer=function(match){return replace[match];};var serialize=function(it){return encodeURIComponent(it).replace(find,replacer);};var parseSearchParams=function(result,query){if(query){var attributes=query.split('&');var index=0;var attribute,entry;while(index<attributes.length){attribute=attributes[index++];if(attribute.length){entry=attribute.split('=');result.push({key:deserialize(entry.shift()),value:deserialize(entry.join('='))});}}}};var updateSearchParams=function(query){this.entries.length=0;parseSearchParams(this.entries,query);};var validateArgumentsLength=function(passed,required){if(passed<required)throw TypeError('Not enough arguments');};var URLSearchParamsIterator=createIteratorConstructor(function Iterator(params,kind){setInternalState$3(this,{type:URL_SEARCH_PARAMS_ITERATOR,iterator:getIterator(getInternalParamsState(params).entries),kind:kind});},'Iterator',function next(){var state=getInternalIteratorState(this);var kind=state.kind;var step=state.iterator.next();var entry=step.value;if(!step.done){step.value=kind==='keys'?entry.key:kind==='values'?entry.value:[entry.key,entry.value];}return step;});var URLSearchParamsConstructor=function URLSearchParams(){anInstance(this,URLSearchParamsConstructor,URL_SEARCH_PARAMS);var init=arguments.length>0?arguments[0]:undefined;var that=this;var entries=[];var iteratorMethod,iterator,next,step,entryIterator,entryNext,first,second,key;setInternalState$3(that,{type:URL_SEARCH_PARAMS,entries:entries,updateURL:function(){},updateSearchParams:updateSearchParams});if(init!==undefined){if(isObject(init)){iteratorMethod=getIteratorMethod(init);if(typeof iteratorMethod==='function'){iterator=iteratorMethod.call(init);next=iterator.next;while(!(step=next.call(iterator)).done){entryIterator=getIterator(anObject(step.value));entryNext=entryIterator.next;if((first=entryNext.call(entryIterator)).done||(second=entryNext.call(entryIterator)).done||!entryNext.call(entryIterator).done)throw TypeError('Expected sequence with length 2');entries.push({key:first.value+'',value:second.value+''});}}else for(key in init)if(has(init,key))entries.push({key:key,value:init[key]+''});}else{parseSearchParams(entries,typeof init==='string'?init.charAt(0)==='?'?init.slice(1):init:init+'');}}};var URLSearchParamsPrototype=URLSearchParamsConstructor.prototype;redefineAll(URLSearchParamsPrototype,{append:function append(name,value){validateArgumentsLength(arguments.length,2);var state=getInternalParamsState(this);state.entries.push({key:name+'',value:value+''});state.updateURL();},'delete':function(name){validateArgumentsLength(arguments.length,1);var state=getInternalParamsState(this);var entries=state.entries;var key=name+'';var index=0;while(index<entries.length){if(entries[index].key===key)entries.splice(index,1);else index++;}
state.updateURL();},get:function get(name){validateArgumentsLength(arguments.length,1);var entries=getInternalParamsState(this).entries;var key=name+'';var index=0;for(;index<entries.length;index++){if(entries[index].key===key)return entries[index].value;}
return null;},getAll:function getAll(name){validateArgumentsLength(arguments.length,1);var entries=getInternalParamsState(this).entries;var key=name+'';var result=[];var index=0;for(;index<entries.length;index++){if(entries[index].key===key)result.push(entries[index].value);}
return result;},has:function has(name){validateArgumentsLength(arguments.length,1);var entries=getInternalParamsState(this).entries;var key=name+'';var index=0;while(index<entries.length){if(entries[index++].key===key)return true;}
return false;},set:function set(name,value){validateArgumentsLength(arguments.length,1);var state=getInternalParamsState(this);var entries=state.entries;var found=false;var key=name+'';var val=value+'';var index=0;var entry;for(;index<entries.length;index++){entry=entries[index];if(entry.key===key){if(found)entries.splice(index--,1);else{found=true;entry.value=val;}}}
if(!found)entries.push({key:key,value:val});state.updateURL();},sort:function sort(){var state=getInternalParamsState(this);var entries=state.entries;var slice=entries.slice();var entry,entriesIndex,sliceIndex;entries.length=0;for(sliceIndex=0;sliceIndex<slice.length;sliceIndex++){entry=slice[sliceIndex];for(entriesIndex=0;entriesIndex<sliceIndex;entriesIndex++){if(entries[entriesIndex].key>entry.key){entries.splice(entriesIndex,0,entry);break;}}
if(entriesIndex===sliceIndex)entries.push(entry);}
state.updateURL();},forEach:function forEach(callback){var entries=getInternalParamsState(this).entries;var boundFunction=functionBindContext(callback,arguments.length>1?arguments[1]:undefined,3);var index=0;var entry;while(index<entries.length){entry=entries[index++];boundFunction(entry.value,entry.key,this);}},keys:function keys(){return new URLSearchParamsIterator(this,'keys');},values:function values(){return new URLSearchParamsIterator(this,'values');},entries:function entries(){return new URLSearchParamsIterator(this,'entries');}},{enumerable:true});redefine(URLSearchParamsPrototype,ITERATOR$6,URLSearchParamsPrototype.entries);redefine(URLSearchParamsPrototype,'toString',function toString(){var entries=getInternalParamsState(this).entries;var result=[];var index=0;var entry;while(index<entries.length){entry=entries[index++];result.push(serialize(entry.key)+'='+serialize(entry.value));}return result.join('&');},{enumerable:true});setToStringTag(URLSearchParamsConstructor,URL_SEARCH_PARAMS);_export({global:true,forced:!nativeUrl},{URLSearchParams:URLSearchParamsConstructor});if(!nativeUrl&&typeof $fetch=='function'&&typeof Headers=='function'){_export({global:true,enumerable:true,forced:true},{fetch:function fetch(input){var args=[input];var init,body,headers;if(arguments.length>1){init=arguments[1];if(isObject(init)){body=init.body;if(classof(body)===URL_SEARCH_PARAMS){headers=init.headers?new Headers(init.headers):new Headers();if(!headers.has('content-type')){headers.set('content-type','application/x-www-form-urlencoded;charset=UTF-8');}
init=objectCreate(init,{body:createPropertyDescriptor(0,String(body)),headers:createPropertyDescriptor(0,headers)});}}
args.push(init);}return $fetch.apply(this,args);}});}
var web_urlSearchParams={URLSearchParams:URLSearchParamsConstructor,getState:getInternalParamsState};var codeAt=stringMultibyte.codeAt;var NativeURL=global_1.URL;var URLSearchParams$1=web_urlSearchParams.URLSearchParams;var getInternalSearchParamsState=web_urlSearchParams.getState;var setInternalState$4=internalState.set;var getInternalURLState=internalState.getterFor('URL');var floor$3=Math.floor;var pow=Math.pow;var INVALID_AUTHORITY='Invalid authority';var INVALID_SCHEME='Invalid scheme';var INVALID_HOST='Invalid host';var INVALID_PORT='Invalid port';var ALPHA=/[A-Za-z]/;var ALPHANUMERIC=/[\d+\-.A-Za-z]/;var DIGIT=/\d/;var HEX_START=/^(0x|0X)/;var OCT=/^[0-7]+$/;var DEC=/^\d+$/;var HEX=/^[\dA-Fa-f]+$/;var FORBIDDEN_HOST_CODE_POINT=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/;var FORBIDDEN_HOST_CODE_POINT_EXCLUDING_PERCENT=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/;var LEADING_AND_TRAILING_C0_CONTROL_OR_SPACE=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g;var TAB_AND_NEW_LINE=/[\u0009\u000A\u000D]/g;var EOF;var parseHost=function(url,input){var result,codePoints,index;if(input.charAt(0)=='['){if(input.charAt(input.length-1)!=']')return INVALID_HOST;result=parseIPv6(input.slice(1,-1));if(!result)return INVALID_HOST;url.host=result;}else if(!isSpecial(url)){if(FORBIDDEN_HOST_CODE_POINT_EXCLUDING_PERCENT.test(input))return INVALID_HOST;result='';codePoints=arrayFrom(input);for(index=0;index<codePoints.length;index++){result+=percentEncode(codePoints[index],C0ControlPercentEncodeSet);}
url.host=result;}else{input=stringPunycodeToAscii(input);if(FORBIDDEN_HOST_CODE_POINT.test(input))return INVALID_HOST;result=parseIPv4(input);if(result===null)return INVALID_HOST;url.host=result;}};var parseIPv4=function(input){var parts=input.split('.');var partsLength,numbers,index,part,radix,number,ipv4;if(parts.length&&parts[parts.length-1]==''){parts.pop();}
partsLength=parts.length;if(partsLength>4)return input;numbers=[];for(index=0;index<partsLength;index++){part=parts[index];if(part=='')return input;radix=10;if(part.length>1&&part.charAt(0)=='0'){radix=HEX_START.test(part)?16:8;part=part.slice(radix==8?1:2);}
if(part===''){number=0;}else{if(!(radix==10?DEC:radix==8?OCT:HEX).test(part))return input;number=parseInt(part,radix);}
numbers.push(number);}
for(index=0;index<partsLength;index++){number=numbers[index];if(index==partsLength-1){if(number>=pow(256,5-partsLength))return null;}else if(number>255)return null;}
ipv4=numbers.pop();for(index=0;index<numbers.length;index++){ipv4+=numbers[index]*pow(256,3-index);}
return ipv4;};var parseIPv6=function(input){var address=[0,0,0,0,0,0,0,0];var pieceIndex=0;var compress=null;var pointer=0;var value,length,numbersSeen,ipv4Piece,number,swaps,swap;var char=function(){return input.charAt(pointer);};if(char()==':'){if(input.charAt(1)!=':')return;pointer+=2;pieceIndex++;compress=pieceIndex;}
while(char()){if(pieceIndex==8)return;if(char()==':'){if(compress!==null)return;pointer++;pieceIndex++;compress=pieceIndex;continue;}
value=length=0;while(length<4&&HEX.test(char())){value=value*16+parseInt(char(),16);pointer++;length++;}
if(char()=='.'){if(length==0)return;pointer-=length;if(pieceIndex>6)return;numbersSeen=0;while(char()){ipv4Piece=null;if(numbersSeen>0){if(char()=='.'&&numbersSeen<4)pointer++;else return;}
if(!DIGIT.test(char()))return;while(DIGIT.test(char())){number=parseInt(char(),10);if(ipv4Piece===null)ipv4Piece=number;else if(ipv4Piece==0)return;else ipv4Piece=ipv4Piece*10+number;if(ipv4Piece>255)return;pointer++;}
address[pieceIndex]=address[pieceIndex]*256+ipv4Piece;numbersSeen++;if(numbersSeen==2||numbersSeen==4)pieceIndex++;}
if(numbersSeen!=4)return;break;}else if(char()==':'){pointer++;if(!char())return;}else if(char())return;address[pieceIndex++]=value;}
if(compress!==null){swaps=pieceIndex-compress;pieceIndex=7;while(pieceIndex!=0&&swaps>0){swap=address[pieceIndex];address[pieceIndex--]=address[compress+swaps-1];address[compress+--swaps]=swap;}}else if(pieceIndex!=8)return;return address;};var findLongestZeroSequence=function(ipv6){var maxIndex=null;var maxLength=1;var currStart=null;var currLength=0;var index=0;for(;index<8;index++){if(ipv6[index]!==0){if(currLength>maxLength){maxIndex=currStart;maxLength=currLength;}
currStart=null;currLength=0;}else{if(currStart===null)currStart=index;++currLength;}}
if(currLength>maxLength){maxIndex=currStart;maxLength=currLength;}
return maxIndex;};var serializeHost=function(host){var result,index,compress,ignore0;if(typeof host=='number'){result=[];for(index=0;index<4;index++){result.unshift(host%256);host=floor$3(host/256);}return result.join('.');}else if(typeof host=='object'){result='';compress=findLongestZeroSequence(host);for(index=0;index<8;index++){if(ignore0&&host[index]===0)continue;if(ignore0)ignore0=false;if(compress===index){result+=index?':':'::';ignore0=true;}else{result+=host[index].toString(16);if(index<7)result+=':';}}
return '['+result+']';}return host;};var C0ControlPercentEncodeSet={};var fragmentPercentEncodeSet=objectAssign({},C0ControlPercentEncodeSet,{' ':1,'"':1,'<':1,'>':1,'`':1});var pathPercentEncodeSet=objectAssign({},fragmentPercentEncodeSet,{'#':1,'?':1,'{':1,'}':1});var userinfoPercentEncodeSet=objectAssign({},pathPercentEncodeSet,{'/':1,':':1,';':1,'=':1,'@':1,'[':1,'\\':1,']':1,'^':1,'|':1});var percentEncode=function(char,set){var code=codeAt(char,0);return code>0x20&&code<0x7F&&!has(set,char)?char:encodeURIComponent(char);};var specialSchemes={ftp:21,file:null,http:80,https:443,ws:80,wss:443};var isSpecial=function(url){return has(specialSchemes,url.scheme);};var includesCredentials=function(url){return url.username!=''||url.password!='';};var cannotHaveUsernamePasswordPort=function(url){return!url.host||url.cannotBeABaseURL||url.scheme=='file';};var isWindowsDriveLetter=function(string,normalized){var second;return string.length==2&&ALPHA.test(string.charAt(0))&&((second=string.charAt(1))==':'||(!normalized&&second=='|'));};var startsWithWindowsDriveLetter=function(string){var third;return string.length>1&&isWindowsDriveLetter(string.slice(0,2))&&(string.length==2||((third=string.charAt(2))==='/'||third==='\\'||third==='?'||third==='#'));};var shortenURLsPath=function(url){var path=url.path;var pathSize=path.length;if(pathSize&&(url.scheme!='file'||pathSize!=1||!isWindowsDriveLetter(path[0],true))){path.pop();}};var isSingleDot=function(segment){return segment==='.'||segment.toLowerCase()==='%2e';};var isDoubleDot=function(segment){segment=segment.toLowerCase();return segment==='..'||segment==='%2e.'||segment==='.%2e'||segment==='%2e%2e';};var SCHEME_START={};var SCHEME={};var NO_SCHEME={};var SPECIAL_RELATIVE_OR_AUTHORITY={};var PATH_OR_AUTHORITY={};var RELATIVE={};var RELATIVE_SLASH={};var SPECIAL_AUTHORITY_SLASHES={};var SPECIAL_AUTHORITY_IGNORE_SLASHES={};var AUTHORITY={};var HOST={};var HOSTNAME={};var PORT={};var FILE={};var FILE_SLASH={};var FILE_HOST={};var PATH_START={};var PATH={};var CANNOT_BE_A_BASE_URL_PATH={};var QUERY={};var FRAGMENT={};var parseURL=function(url,input,stateOverride,base){var state=stateOverride||SCHEME_START;var pointer=0;var buffer='';var seenAt=false;var seenBracket=false;var seenPasswordToken=false;var codePoints,char,bufferCodePoints,failure;if(!stateOverride){url.scheme='';url.username='';url.password='';url.host=null;url.port=null;url.path=[];url.query=null;url.fragment=null;url.cannotBeABaseURL=false;input=input.replace(LEADING_AND_TRAILING_C0_CONTROL_OR_SPACE,'');}
input=input.replace(TAB_AND_NEW_LINE,'');codePoints=arrayFrom(input);while(pointer<=codePoints.length){char=codePoints[pointer];switch(state){case SCHEME_START:if(char&&ALPHA.test(char)){buffer+=char.toLowerCase();state=SCHEME;}else if(!stateOverride){state=NO_SCHEME;continue;}else return INVALID_SCHEME;break;case SCHEME:if(char&&(ALPHANUMERIC.test(char)||char=='+'||char=='-'||char=='.')){buffer+=char.toLowerCase();}else if(char==':'){if(stateOverride&&((isSpecial(url)!=has(specialSchemes,buffer))||(buffer=='file'&&(includesCredentials(url)||url.port!==null))||(url.scheme=='file'&&!url.host)))return;url.scheme=buffer;if(stateOverride){if(isSpecial(url)&&specialSchemes[url.scheme]==url.port)url.port=null;return;}
buffer='';if(url.scheme=='file'){state=FILE;}else if(isSpecial(url)&&base&&base.scheme==url.scheme){state=SPECIAL_RELATIVE_OR_AUTHORITY;}else if(isSpecial(url)){state=SPECIAL_AUTHORITY_SLASHES;}else if(codePoints[pointer+1]=='/'){state=PATH_OR_AUTHORITY;pointer++;}else{url.cannotBeABaseURL=true;url.path.push('');state=CANNOT_BE_A_BASE_URL_PATH;}}else if(!stateOverride){buffer='';state=NO_SCHEME;pointer=0;continue;}else return INVALID_SCHEME;break;case NO_SCHEME:if(!base||(base.cannotBeABaseURL&&char!='#'))return INVALID_SCHEME;if(base.cannotBeABaseURL&&char=='#'){url.scheme=base.scheme;url.path=base.path.slice();url.query=base.query;url.fragment='';url.cannotBeABaseURL=true;state=FRAGMENT;break;}
state=base.scheme=='file'?FILE:RELATIVE;continue;case SPECIAL_RELATIVE_OR_AUTHORITY:if(char=='/'&&codePoints[pointer+1]=='/'){state=SPECIAL_AUTHORITY_IGNORE_SLASHES;pointer++;}else{state=RELATIVE;continue;}break;case PATH_OR_AUTHORITY:if(char=='/'){state=AUTHORITY;break;}else{state=PATH;continue;}
case RELATIVE:url.scheme=base.scheme;if(char==EOF){url.username=base.username;url.password=base.password;url.host=base.host;url.port=base.port;url.path=base.path.slice();url.query=base.query;}else if(char=='/'||(char=='\\'&&isSpecial(url))){state=RELATIVE_SLASH;}else if(char=='?'){url.username=base.username;url.password=base.password;url.host=base.host;url.port=base.port;url.path=base.path.slice();url.query='';state=QUERY;}else if(char=='#'){url.username=base.username;url.password=base.password;url.host=base.host;url.port=base.port;url.path=base.path.slice();url.query=base.query;url.fragment='';state=FRAGMENT;}else{url.username=base.username;url.password=base.password;url.host=base.host;url.port=base.port;url.path=base.path.slice();url.path.pop();state=PATH;continue;}break;case RELATIVE_SLASH:if(isSpecial(url)&&(char=='/'||char=='\\')){state=SPECIAL_AUTHORITY_IGNORE_SLASHES;}else if(char=='/'){state=AUTHORITY;}else{url.username=base.username;url.password=base.password;url.host=base.host;url.port=base.port;state=PATH;continue;}break;case SPECIAL_AUTHORITY_SLASHES:state=SPECIAL_AUTHORITY_IGNORE_SLASHES;if(char!='/'||buffer.charAt(pointer+1)!='/')continue;pointer++;break;case SPECIAL_AUTHORITY_IGNORE_SLASHES:if(char!='/'&&char!='\\'){state=AUTHORITY;continue;}break;case AUTHORITY:if(char=='@'){if(seenAt)buffer='%40'+buffer;seenAt=true;bufferCodePoints=arrayFrom(buffer);for(var i=0;i<bufferCodePoints.length;i++){var codePoint=bufferCodePoints[i];if(codePoint==':'&&!seenPasswordToken){seenPasswordToken=true;continue;}
var encodedCodePoints=percentEncode(codePoint,userinfoPercentEncodeSet);if(seenPasswordToken)url.password+=encodedCodePoints;else url.username+=encodedCodePoints;}
buffer='';}else if(char==EOF||char=='/'||char=='?'||char=='#'||(char=='\\'&&isSpecial(url))){if(seenAt&&buffer=='')return INVALID_AUTHORITY;pointer-=arrayFrom(buffer).length+1;buffer='';state=HOST;}else buffer+=char;break;case HOST:case HOSTNAME:if(stateOverride&&url.scheme=='file'){state=FILE_HOST;continue;}else if(char==':'&&!seenBracket){if(buffer=='')return INVALID_HOST;failure=parseHost(url,buffer);if(failure)return failure;buffer='';state=PORT;if(stateOverride==HOSTNAME)return;}else if(char==EOF||char=='/'||char=='?'||char=='#'||(char=='\\'&&isSpecial(url))){if(isSpecial(url)&&buffer=='')return INVALID_HOST;if(stateOverride&&buffer==''&&(includesCredentials(url)||url.port!==null))return;failure=parseHost(url,buffer);if(failure)return failure;buffer='';state=PATH_START;if(stateOverride)return;continue;}else{if(char=='[')seenBracket=true;else if(char==']')seenBracket=false;buffer+=char;}break;case PORT:if(DIGIT.test(char)){buffer+=char;}else if(char==EOF||char=='/'||char=='?'||char=='#'||(char=='\\'&&isSpecial(url))||stateOverride){if(buffer!=''){var port=parseInt(buffer,10);if(port>0xFFFF)return INVALID_PORT;url.port=(isSpecial(url)&&port===specialSchemes[url.scheme])?null:port;buffer='';}
if(stateOverride)return;state=PATH_START;continue;}else return INVALID_PORT;break;case FILE:url.scheme='file';if(char=='/'||char=='\\')state=FILE_SLASH;else if(base&&base.scheme=='file'){if(char==EOF){url.host=base.host;url.path=base.path.slice();url.query=base.query;}else if(char=='?'){url.host=base.host;url.path=base.path.slice();url.query='';state=QUERY;}else if(char=='#'){url.host=base.host;url.path=base.path.slice();url.query=base.query;url.fragment='';state=FRAGMENT;}else{if(!startsWithWindowsDriveLetter(codePoints.slice(pointer).join(''))){url.host=base.host;url.path=base.path.slice();shortenURLsPath(url);}
state=PATH;continue;}}else{state=PATH;continue;}break;case FILE_SLASH:if(char=='/'||char=='\\'){state=FILE_HOST;break;}
if(base&&base.scheme=='file'&&!startsWithWindowsDriveLetter(codePoints.slice(pointer).join(''))){if(isWindowsDriveLetter(base.path[0],true))url.path.push(base.path[0]);else url.host=base.host;}
state=PATH;continue;case FILE_HOST:if(char==EOF||char=='/'||char=='\\'||char=='?'||char=='#'){if(!stateOverride&&isWindowsDriveLetter(buffer)){state=PATH;}else if(buffer==''){url.host='';if(stateOverride)return;state=PATH_START;}else{failure=parseHost(url,buffer);if(failure)return failure;if(url.host=='localhost')url.host='';if(stateOverride)return;buffer='';state=PATH_START;}continue;}else buffer+=char;break;case PATH_START:if(isSpecial(url)){state=PATH;if(char!='/'&&char!='\\')continue;}else if(!stateOverride&&char=='?'){url.query='';state=QUERY;}else if(!stateOverride&&char=='#'){url.fragment='';state=FRAGMENT;}else if(char!=EOF){state=PATH;if(char!='/')continue;}break;case PATH:if(char==EOF||char=='/'||(char=='\\'&&isSpecial(url))||(!stateOverride&&(char=='?'||char=='#'))){if(isDoubleDot(buffer)){shortenURLsPath(url);if(char!='/'&&!(char=='\\'&&isSpecial(url))){url.path.push('');}}else if(isSingleDot(buffer)){if(char!='/'&&!(char=='\\'&&isSpecial(url))){url.path.push('');}}else{if(url.scheme=='file'&&!url.path.length&&isWindowsDriveLetter(buffer)){if(url.host)url.host='';buffer=buffer.charAt(0)+':';}
url.path.push(buffer);}
buffer='';if(url.scheme=='file'&&(char==EOF||char=='?'||char=='#')){while(url.path.length>1&&url.path[0]===''){url.path.shift();}}
if(char=='?'){url.query='';state=QUERY;}else if(char=='#'){url.fragment='';state=FRAGMENT;}}else{buffer+=percentEncode(char,pathPercentEncodeSet);}break;case CANNOT_BE_A_BASE_URL_PATH:if(char=='?'){url.query='';state=QUERY;}else if(char=='#'){url.fragment='';state=FRAGMENT;}else if(char!=EOF){url.path[0]+=percentEncode(char,C0ControlPercentEncodeSet);}break;case QUERY:if(!stateOverride&&char=='#'){url.fragment='';state=FRAGMENT;}else if(char!=EOF){if(char=="'"&&isSpecial(url))url.query+='%27';else if(char=='#')url.query+='%23';else url.query+=percentEncode(char,C0ControlPercentEncodeSet);}break;case FRAGMENT:if(char!=EOF)url.fragment+=percentEncode(char,fragmentPercentEncodeSet);break;}
pointer++;}};var URLConstructor=function URL(url){var that=anInstance(this,URLConstructor,'URL');var base=arguments.length>1?arguments[1]:undefined;var urlString=String(url);var state=setInternalState$4(that,{type:'URL'});var baseState,failure;if(base!==undefined){if(base instanceof URLConstructor)baseState=getInternalURLState(base);else{failure=parseURL(baseState={},String(base));if(failure)throw TypeError(failure);}}
failure=parseURL(state,urlString,null,baseState);if(failure)throw TypeError(failure);var searchParams=state.searchParams=new URLSearchParams$1();var searchParamsState=getInternalSearchParamsState(searchParams);searchParamsState.updateSearchParams(state.query);searchParamsState.updateURL=function(){state.query=String(searchParams)||null;};if(!descriptors){that.href=serializeURL.call(that);that.origin=getOrigin.call(that);that.protocol=getProtocol.call(that);that.username=getUsername.call(that);that.password=getPassword.call(that);that.host=getHost.call(that);that.hostname=getHostname.call(that);that.port=getPort.call(that);that.pathname=getPathname.call(that);that.search=getSearch.call(that);that.searchParams=getSearchParams.call(that);that.hash=getHash.call(that);}};var URLPrototype=URLConstructor.prototype;var serializeURL=function(){var url=getInternalURLState(this);var scheme=url.scheme;var username=url.username;var password=url.password;var host=url.host;var port=url.port;var path=url.path;var query=url.query;var fragment=url.fragment;var output=scheme+':';if(host!==null){output+='//';if(includesCredentials(url)){output+=username+(password?':'+password:'')+'@';}
output+=serializeHost(host);if(port!==null)output+=':'+port;}else if(scheme=='file')output+='//';output+=url.cannotBeABaseURL?path[0]:path.length?'/'+path.join('/'):'';if(query!==null)output+='?'+query;if(fragment!==null)output+='#'+fragment;return output;};var getOrigin=function(){var url=getInternalURLState(this);var scheme=url.scheme;var port=url.port;if(scheme=='blob')try{return new URL(scheme.path[0]).origin;}catch(error){return 'null';}
if(scheme=='file'||!isSpecial(url))return 'null';return scheme+'://'+serializeHost(url.host)+(port!==null?':'+port:'');};var getProtocol=function(){return getInternalURLState(this).scheme+':';};var getUsername=function(){return getInternalURLState(this).username;};var getPassword=function(){return getInternalURLState(this).password;};var getHost=function(){var url=getInternalURLState(this);var host=url.host;var port=url.port;return host===null?'':port===null?serializeHost(host):serializeHost(host)+':'+port;};var getHostname=function(){var host=getInternalURLState(this).host;return host===null?'':serializeHost(host);};var getPort=function(){var port=getInternalURLState(this).port;return port===null?'':String(port);};var getPathname=function(){var url=getInternalURLState(this);var path=url.path;return url.cannotBeABaseURL?path[0]:path.length?'/'+path.join('/'):'';};var getSearch=function(){var query=getInternalURLState(this).query;return query?'?'+query:'';};var getSearchParams=function(){return getInternalURLState(this).searchParams;};var getHash=function(){var fragment=getInternalURLState(this).fragment;return fragment?'#'+fragment:'';};var accessorDescriptor=function(getter,setter){return{get:getter,set:setter,configurable:true,enumerable:true};};if(descriptors){objectDefineProperties(URLPrototype,{href:accessorDescriptor(serializeURL,function(href){var url=getInternalURLState(this);var urlString=String(href);var failure=parseURL(url,urlString);if(failure)throw TypeError(failure);getInternalSearchParamsState(url.searchParams).updateSearchParams(url.query);}),origin:accessorDescriptor(getOrigin),protocol:accessorDescriptor(getProtocol,function(protocol){var url=getInternalURLState(this);parseURL(url,String(protocol)+':',SCHEME_START);}),username:accessorDescriptor(getUsername,function(username){var url=getInternalURLState(this);var codePoints=arrayFrom(String(username));if(cannotHaveUsernamePasswordPort(url))return;url.username='';for(var i=0;i<codePoints.length;i++){url.username+=percentEncode(codePoints[i],userinfoPercentEncodeSet);}}),password:accessorDescriptor(getPassword,function(password){var url=getInternalURLState(this);var codePoints=arrayFrom(String(password));if(cannotHaveUsernamePasswordPort(url))return;url.password='';for(var i=0;i<codePoints.length;i++){url.password+=percentEncode(codePoints[i],userinfoPercentEncodeSet);}}),host:accessorDescriptor(getHost,function(host){var url=getInternalURLState(this);if(url.cannotBeABaseURL)return;parseURL(url,String(host),HOST);}),hostname:accessorDescriptor(getHostname,function(hostname){var url=getInternalURLState(this);if(url.cannotBeABaseURL)return;parseURL(url,String(hostname),HOSTNAME);}),port:accessorDescriptor(getPort,function(port){var url=getInternalURLState(this);if(cannotHaveUsernamePasswordPort(url))return;port=String(port);if(port=='')url.port=null;else parseURL(url,port,PORT);}),pathname:accessorDescriptor(getPathname,function(pathname){var url=getInternalURLState(this);if(url.cannotBeABaseURL)return;url.path=[];parseURL(url,pathname+'',PATH_START);}),search:accessorDescriptor(getSearch,function(search){var url=getInternalURLState(this);search=String(search);if(search==''){url.query=null;}else{if('?'==search.charAt(0))search=search.slice(1);url.query='';parseURL(url,search,QUERY);}
getInternalSearchParamsState(url.searchParams).updateSearchParams(url.query);}),searchParams:accessorDescriptor(getSearchParams),hash:accessorDescriptor(getHash,function(hash){var url=getInternalURLState(this);hash=String(hash);if(hash==''){url.fragment=null;return;}
if('#'==hash.charAt(0))hash=hash.slice(1);url.fragment='';parseURL(url,hash,FRAGMENT);})});}
redefine(URLPrototype,'toJSON',function toJSON(){return serializeURL.call(this);},{enumerable:true});redefine(URLPrototype,'toString',function toString(){return serializeURL.call(this);},{enumerable:true});if(NativeURL){var nativeCreateObjectURL=NativeURL.createObjectURL;var nativeRevokeObjectURL=NativeURL.revokeObjectURL;if(nativeCreateObjectURL)redefine(URLConstructor,'createObjectURL',function createObjectURL(blob){return nativeCreateObjectURL.apply(NativeURL,arguments);});if(nativeRevokeObjectURL)redefine(URLConstructor,'revokeObjectURL',function revokeObjectURL(url){return nativeRevokeObjectURL.apply(NativeURL,arguments);});}
setToStringTag(URLConstructor,'URL');_export({global:true,forced:!nativeUrl,sham:!descriptors},{URL:URLConstructor});function _typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function(obj){return typeof obj;};}else{_typeof=function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}
return _typeof(obj);}
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}
function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}
function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}
function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}
return obj;}
function ownKeys$1(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}
return keys;}
function _objectSpread2(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys$1(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys$1(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}
return target;}
function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest();}
function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread();}
function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2;}}
function _arrayWithHoles(arr){if(Array.isArray(arr))return arr;}
function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter);}
function _iterableToArrayLimit(arr,i){if(!(Symbol.iterator in Object(arr)||Object.prototype.toString.call(arr)==="[object Arguments]")){return;}
var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break;}}catch(err){_d=true;_e=err;}finally{try{if(!_n&&_i["return"]!=null)_i["return"]();}finally{if(_d)throw _e;}}
return _arr;}
function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance");}
function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance");}
(function(global){var checkIfIteratorIsSupported=function checkIfIteratorIsSupported(){try{return!!Symbol.iterator;}catch(error){return false;}};var iteratorSupported=checkIfIteratorIsSupported();var createIterator=function createIterator(items){var iterator={next:function next(){var value=items.shift();return{done:value===void 0,value:value};}};if(iteratorSupported){iterator[Symbol.iterator]=function(){return iterator;};}
return iterator;};var serializeParam=function serializeParam(value){return encodeURIComponent(value).replace(/%20/g,'+');};var deserializeParam=function deserializeParam(value){return decodeURIComponent(String(value).replace(/\+/g,' '));};var polyfillURLSearchParams=function polyfillURLSearchParams(){var URLSearchParams=function URLSearchParams(searchString){Object.defineProperty(this,'_entries',{writable:true,value:{}});var typeofSearchString=_typeof(searchString);if(typeofSearchString==='undefined');else if(typeofSearchString==='string'){if(searchString!==''){this._fromString(searchString);}}else if(searchString instanceof URLSearchParams){var _this=this;searchString.forEach(function(value,name){_this.append(name,value);});}else if(searchString!==null&&typeofSearchString==='object'){if(Object.prototype.toString.call(searchString)==='[object Array]'){for(var i=0;i<searchString.length;i++){var entry=searchString[i];if(Object.prototype.toString.call(entry)==='[object Array]'||entry.length!==2){this.append(entry[0],entry[1]);}else{throw new TypeError('Expected [string, any] as entry at index '+i+' of URLSearchParams\'s input');}}}else{for(var key in searchString){if(searchString.hasOwnProperty(key)){this.append(key,searchString[key]);}}}}else{throw new TypeError('Unsupported input\'s type for URLSearchParams');}};var proto=URLSearchParams.prototype;proto.append=function(name,value){if(name in this._entries){this._entries[name].push(String(value));}else{this._entries[name]=[String(value)];}};proto.delete=function(name){delete this._entries[name];};proto.get=function(name){return name in this._entries?this._entries[name][0]:null;};proto.getAll=function(name){return name in this._entries?this._entries[name].slice(0):[];};proto.has=function(name){return name in this._entries;};proto.set=function(name,value){this._entries[name]=[String(value)];};proto.forEach=function(callback,thisArg){var entries;for(var name in this._entries){if(this._entries.hasOwnProperty(name)){entries=this._entries[name];for(var i=0;i<entries.length;i++){callback.call(thisArg,entries[i],name,this);}}}};proto.keys=function(){var items=[];this.forEach(function(value,name){items.push(name);});return createIterator(items);};proto.values=function(){var items=[];this.forEach(function(value){items.push(value);});return createIterator(items);};proto.entries=function(){var items=[];this.forEach(function(value,name){items.push([name,value]);});return createIterator(items);};if(iteratorSupported){proto[Symbol.iterator]=proto.entries;}
proto.toString=function(){var searchArray=[];this.forEach(function(value,name){searchArray.push(serializeParam(name)+'='+serializeParam(value));});return searchArray.join('&');};global.URLSearchParams=URLSearchParams;};var checkIfURLSearchParamsSupported=function checkIfURLSearchParamsSupported(){try{var URLSearchParams=global.URLSearchParams;return new URLSearchParams('?a=1').toString()==='a=1'&&typeof URLSearchParams.prototype.set==='function';}catch(e){return false;}};if(!checkIfURLSearchParamsSupported()){polyfillURLSearchParams();}
var proto=global.URLSearchParams.prototype;if(typeof proto.sort!=='function'){proto.sort=function(){var _this=this;var items=[];this.forEach(function(value,name){items.push([name,value]);if(!_this._entries){_this.delete(name);}});items.sort(function(a,b){if(a[0]<b[0]){return-1;}else if(a[0]>b[0]){return+1;}else{return 0;}});if(_this._entries){_this._entries={};}
for(var i=0;i<items.length;i++){this.append(items[i][0],items[i][1]);}};}
if(typeof proto._fromString!=='function'){Object.defineProperty(proto,'_fromString',{enumerable:false,configurable:false,writable:false,value:function value(searchString){if(this._entries){this._entries={};}else{var keys=[];this.forEach(function(value,name){keys.push(name);});for(var i=0;i<keys.length;i++){this.delete(keys[i]);}}
searchString=searchString.replace(/^\?/,'');var attributes=searchString.split('&');var attribute;for(var i=0;i<attributes.length;i++){attribute=attributes[i].split('=');this.append(deserializeParam(attribute[0]),attribute.length>1?deserializeParam(attribute[1]):'');}}});}})(typeof commonjsGlobal!=='undefined'?commonjsGlobal:typeof window!=='undefined'?window:typeof self!=='undefined'?self:commonjsGlobal);(function(global){var checkIfURLIsSupported=function checkIfURLIsSupported(){try{var u=new global.URL('b','http://a');u.pathname='c d';return u.href==='http://a/c%20d'&&u.searchParams;}catch(e){return false;}};var polyfillURL=function polyfillURL(){var _URL=global.URL;var URL=function URL(url,base){if(typeof url!=='string')url=String(url);var doc=document,baseElement;if(base&&(global.location===void 0||base!==global.location.href)){doc=document.implementation.createHTMLDocument('');baseElement=doc.createElement('base');baseElement.href=base;doc.head.appendChild(baseElement);try{if(baseElement.href.indexOf(base)!==0)throw new Error(baseElement.href);}catch(err){throw new Error('URL unable to set base '+base+' due to '+err);}}
var anchorElement=doc.createElement('a');anchorElement.href=url;if(baseElement){doc.body.appendChild(anchorElement);anchorElement.href=anchorElement.href;}
if(anchorElement.protocol===':'||!/:/.test(anchorElement.href)){throw new TypeError('Invalid URL');}
Object.defineProperty(this,'_anchorElement',{value:anchorElement});var searchParams=new global.URLSearchParams(this.search);var enableSearchUpdate=true;var enableSearchParamsUpdate=true;var _this=this;['append','delete','set'].forEach(function(methodName){var method=searchParams[methodName];searchParams[methodName]=function(){method.apply(searchParams,arguments);if(enableSearchUpdate){enableSearchParamsUpdate=false;_this.search=searchParams.toString();enableSearchParamsUpdate=true;}};});Object.defineProperty(this,'searchParams',{value:searchParams,enumerable:true});var search=void 0;Object.defineProperty(this,'_updateSearchParams',{enumerable:false,configurable:false,writable:false,value:function value(){if(this.search!==search){search=this.search;if(enableSearchParamsUpdate){enableSearchUpdate=false;this.searchParams._fromString(this.search);enableSearchUpdate=true;}}}});};var proto=URL.prototype;var linkURLWithAnchorAttribute=function linkURLWithAnchorAttribute(attributeName){Object.defineProperty(proto,attributeName,{get:function get(){return this._anchorElement[attributeName];},set:function set(value){this._anchorElement[attributeName]=value;},enumerable:true});};['hash','host','hostname','port','protocol'].forEach(function(attributeName){linkURLWithAnchorAttribute(attributeName);});Object.defineProperty(proto,'search',{get:function get(){return this._anchorElement['search'];},set:function set(value){this._anchorElement['search']=value;this._updateSearchParams();},enumerable:true});Object.defineProperties(proto,{'toString':{get:function get(){var _this=this;return function(){return _this.href;};}},'href':{get:function get(){return this._anchorElement.href.replace(/\?$/,'');},set:function set(value){this._anchorElement.href=value;this._updateSearchParams();},enumerable:true},'pathname':{get:function get(){return this._anchorElement.pathname.replace(/(^\/?)/,'/');},set:function set(value){this._anchorElement.pathname=value;},enumerable:true},'origin':{get:function get(){var expectedPort={'http:':80,'https:':443,'ftp:':21}[this._anchorElement.protocol];var addPortToOrigin=this._anchorElement.port!=expectedPort&&this._anchorElement.port!=='';return this._anchorElement.protocol+'//'+this._anchorElement.hostname+(addPortToOrigin?':'+this._anchorElement.port:'');},enumerable:true},'password':{get:function get(){return '';},set:function set(value){},enumerable:true},'username':{get:function get(){return '';},set:function set(value){},enumerable:true}});URL.createObjectURL=function(blob){return _URL.createObjectURL.apply(_URL,arguments);};URL.revokeObjectURL=function(url){return _URL.revokeObjectURL.apply(_URL,arguments);};global.URL=URL;};if(!checkIfURLIsSupported()){polyfillURL();}
if(global.location!==void 0&&!('origin'in global.location)){var getOrigin=function getOrigin(){return global.location.protocol+'//'+global.location.hostname+(global.location.port?':'+global.location.port:'');};try{Object.defineProperty(global.location,'origin',{get:getOrigin,enumerable:true});}catch(e){setInterval(function(){global.location.origin=getOrigin();},100);}}})(typeof commonjsGlobal!=='undefined'?commonjsGlobal:typeof window!=='undefined'?window:typeof self!=='undefined'?self:commonjsGlobal);var IS_CONCAT_SPREADABLE=wellKnownSymbol('isConcatSpreadable');var MAX_SAFE_INTEGER=0x1FFFFFFFFFFFFF;var MAXIMUM_ALLOWED_INDEX_EXCEEDED='Maximum allowed index exceeded';var IS_CONCAT_SPREADABLE_SUPPORT=engineV8Version>=51||!fails(function(){var array=[];array[IS_CONCAT_SPREADABLE]=false;return array.concat()[0]!==array;});var SPECIES_SUPPORT=arrayMethodHasSpeciesSupport('concat');var isConcatSpreadable=function(O){if(!isObject(O))return false;var spreadable=O[IS_CONCAT_SPREADABLE];return spreadable!==undefined?!!spreadable:isArray(O);};var FORCED=!IS_CONCAT_SPREADABLE_SUPPORT||!SPECIES_SUPPORT;_export({target:'Array',proto:true,forced:FORCED},{concat:function concat(arg){var O=toObject(this);var A=arraySpeciesCreate(O,0);var n=0;var i,k,length,len,E;for(i=-1,length=arguments.length;i<length;i++){E=i===-1?O:arguments[i];if(isConcatSpreadable(E)){len=toLength(E.length);if(n+len>MAX_SAFE_INTEGER)throw TypeError(MAXIMUM_ALLOWED_INDEX_EXCEEDED);for(k=0;k<len;k++,n++)if(k in E)createProperty(A,n,E[k]);}else{if(n>=MAX_SAFE_INTEGER)throw TypeError(MAXIMUM_ALLOWED_INDEX_EXCEEDED);createProperty(A,n++,E);}}
A.length=n;return A;}});var $filter=arrayIteration.filter;var HAS_SPECIES_SUPPORT$1=arrayMethodHasSpeciesSupport('filter');var USES_TO_LENGTH$3=arrayMethodUsesToLength('filter');_export({target:'Array',proto:true,forced:!HAS_SPECIES_SUPPORT$1||!USES_TO_LENGTH$3},{filter:function filter(callbackfn){return $filter(this,callbackfn,arguments.length>1?arguments[1]:undefined);}});var $find=arrayIteration.find;var FIND='find';var SKIPS_HOLES=true;var USES_TO_LENGTH$4=arrayMethodUsesToLength(FIND);if(FIND in[])Array(1)[FIND](function(){SKIPS_HOLES=false;});_export({target:'Array',proto:true,forced:SKIPS_HOLES||!USES_TO_LENGTH$4},{find:function find(callbackfn){return $find(this,callbackfn,arguments.length>1?arguments[1]:undefined);}});addToUnscopables(FIND);var ITERATOR$7=wellKnownSymbol('iterator');var SAFE_CLOSING=false;try{var called=0;var iteratorWithReturn={next:function(){return{done:!!called++};},'return':function(){SAFE_CLOSING=true;}};iteratorWithReturn[ITERATOR$7]=function(){return this;};Array.from(iteratorWithReturn,function(){throw 2;});}catch(error){}
var checkCorrectnessOfIteration=function(exec,SKIP_CLOSING){if(!SKIP_CLOSING&&!SAFE_CLOSING)return false;var ITERATION_SUPPORT=false;try{var object={};object[ITERATOR$7]=function(){return{next:function(){return{done:ITERATION_SUPPORT=true};}};};exec(object);}catch(error){}
return ITERATION_SUPPORT;};var INCORRECT_ITERATION=!checkCorrectnessOfIteration(function(iterable){Array.from(iterable);});_export({target:'Array',stat:true,forced:INCORRECT_ITERATION},{from:arrayFrom});var $includes=arrayIncludes.includes;var USES_TO_LENGTH$5=arrayMethodUsesToLength('indexOf',{ACCESSORS:true,1:0});_export({target:'Array',proto:true,forced:!USES_TO_LENGTH$5},{includes:function includes(el){return $includes(this,el,arguments.length>1?arguments[1]:undefined);}});addToUnscopables('includes');var $map=arrayIteration.map;var HAS_SPECIES_SUPPORT$2=arrayMethodHasSpeciesSupport('map');var USES_TO_LENGTH$6=arrayMethodUsesToLength('map');_export({target:'Array',proto:true,forced:!HAS_SPECIES_SUPPORT$2||!USES_TO_LENGTH$6},{map:function map(callbackfn){return $map(this,callbackfn,arguments.length>1?arguments[1]:undefined);}});var inheritIfRequired=function($this,dummy,Wrapper){var NewTarget,NewTargetPrototype;if(objectSetPrototypeOf&&typeof(NewTarget=dummy.constructor)=='function'&&NewTarget!==Wrapper&&isObject(NewTargetPrototype=NewTarget.prototype)&&NewTargetPrototype!==Wrapper.prototype)objectSetPrototypeOf($this,NewTargetPrototype);return $this;};var whitespaces='\u0009\u000A\u000B\u000C\u000D\u0020\u00A0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF';var whitespace='['+whitespaces+']';var ltrim=RegExp('^'+whitespace+whitespace+'*');var rtrim=RegExp(whitespace+whitespace+'*$');var createMethod$3=function(TYPE){return function($this){var string=String(requireObjectCoercible($this));if(TYPE&1)string=string.replace(ltrim,'');if(TYPE&2)string=string.replace(rtrim,'');return string;};};var stringTrim={start:createMethod$3(1),end:createMethod$3(2),trim:createMethod$3(3)};var getOwnPropertyNames=objectGetOwnPropertyNames.f;var getOwnPropertyDescriptor$2=objectGetOwnPropertyDescriptor.f;var defineProperty$5=objectDefineProperty.f;var trim=stringTrim.trim;var NUMBER='Number';var NativeNumber=global_1[NUMBER];var NumberPrototype=NativeNumber.prototype;var BROKEN_CLASSOF=classofRaw(objectCreate(NumberPrototype))==NUMBER;var toNumber=function(argument){var it=toPrimitive(argument,false);var first,third,radix,maxCode,digits,length,index,code;if(typeof it=='string'&&it.length>2){it=trim(it);first=it.charCodeAt(0);if(first===43||first===45){third=it.charCodeAt(2);if(third===88||third===120)return NaN;}else if(first===48){switch(it.charCodeAt(1)){case 66:case 98:radix=2;maxCode=49;break;case 79:case 111:radix=8;maxCode=55;break;default:return+it;}
digits=it.slice(2);length=digits.length;for(index=0;index<length;index++){code=digits.charCodeAt(index);if(code<48||code>maxCode)return NaN;}return parseInt(digits,radix);}}return+it;};if(isForced_1(NUMBER,!NativeNumber(' 0o1')||!NativeNumber('0b1')||NativeNumber('+0x1'))){var NumberWrapper=function Number(value){var it=arguments.length<1?0:value;var dummy=this;return dummy instanceof NumberWrapper&&(BROKEN_CLASSOF?fails(function(){NumberPrototype.valueOf.call(dummy);}):classofRaw(dummy)!=NUMBER)?inheritIfRequired(new NativeNumber(toNumber(it)),dummy,NumberWrapper):toNumber(it);};for(var keys$1=descriptors?getOwnPropertyNames(NativeNumber):('MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,'+
'EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,'+
'MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger').split(','),j=0,key;keys$1.length>j;j++){if(has(NativeNumber,key=keys$1[j])&&!has(NumberWrapper,key)){defineProperty$5(NumberWrapper,key,getOwnPropertyDescriptor$2(NativeNumber,key));}}
NumberWrapper.prototype=NumberPrototype;NumberPrototype.constructor=NumberWrapper;redefine(global_1,NUMBER,NumberWrapper);}
var FAILS_ON_PRIMITIVES=fails(function(){objectKeys(1);});_export({target:'Object',stat:true,forced:FAILS_ON_PRIMITIVES},{keys:function keys(it){return objectKeys(toObject(it));}});var notARegexp=function(it){if(isRegexp(it)){throw TypeError("The method doesn't accept regular expressions");}return it;};var MATCH$1=wellKnownSymbol('match');var correctIsRegexpLogic=function(METHOD_NAME){var regexp=/./;try{'/./'[METHOD_NAME](regexp);}catch(e){try{regexp[MATCH$1]=false;return '/./'[METHOD_NAME](regexp);}catch(f){}}return false;};_export({target:'String',proto:true,forced:!correctIsRegexpLogic('includes')},{includes:function includes(searchString){return!!~String(requireObjectCoercible(this)).indexOf(notARegexp(searchString),arguments.length>1?arguments[1]:undefined);}});var freezing=!fails(function(){return Object.isExtensible(Object.preventExtensions({}));});var internalMetadata=createCommonjsModule(function(module){var defineProperty=objectDefineProperty.f;var METADATA=uid('meta');var id=0;var isExtensible=Object.isExtensible||function(){return true;};var setMetadata=function(it){defineProperty(it,METADATA,{value:{objectID:'O'+ ++id,weakData:{}}});};var fastKey=function(it,create){if(!isObject(it))return typeof it=='symbol'?it:(typeof it=='string'?'S':'P')+it;if(!has(it,METADATA)){if(!isExtensible(it))return 'F';if(!create)return 'E';setMetadata(it);}return it[METADATA].objectID;};var getWeakData=function(it,create){if(!has(it,METADATA)){if(!isExtensible(it))return true;if(!create)return false;setMetadata(it);}return it[METADATA].weakData;};var onFreeze=function(it){if(freezing&&meta.REQUIRED&&isExtensible(it)&&!has(it,METADATA))setMetadata(it);return it;};var meta=module.exports={REQUIRED:false,fastKey:fastKey,getWeakData:getWeakData,onFreeze:onFreeze};hiddenKeys[METADATA]=true;});var internalMetadata_1=internalMetadata.REQUIRED;var internalMetadata_2=internalMetadata.fastKey;var internalMetadata_3=internalMetadata.getWeakData;var internalMetadata_4=internalMetadata.onFreeze;var iterate_1=createCommonjsModule(function(module){var Result=function(stopped,result){this.stopped=stopped;this.result=result;};var iterate=module.exports=function(iterable,fn,that,AS_ENTRIES,IS_ITERATOR){var boundFunction=functionBindContext(fn,that,AS_ENTRIES?2:1);var iterator,iterFn,index,length,result,next,step;if(IS_ITERATOR){iterator=iterable;}else{iterFn=getIteratorMethod(iterable);if(typeof iterFn!='function')throw TypeError('Target is not iterable');if(isArrayIteratorMethod(iterFn)){for(index=0,length=toLength(iterable.length);length>index;index++){result=AS_ENTRIES?boundFunction(anObject(step=iterable[index])[0],step[1]):boundFunction(iterable[index]);if(result&&result instanceof Result)return result;}return new Result(false);}
iterator=iterFn.call(iterable);}
next=iterator.next;while(!(step=next.call(iterator)).done){result=callWithSafeIterationClosing(iterator,boundFunction,step.value,AS_ENTRIES);if(typeof result=='object'&&result&&result instanceof Result)return result;}return new Result(false);};iterate.stop=function(result){return new Result(true,result);};});var collection=function(CONSTRUCTOR_NAME,wrapper,common){var IS_MAP=CONSTRUCTOR_NAME.indexOf('Map')!==-1;var IS_WEAK=CONSTRUCTOR_NAME.indexOf('Weak')!==-1;var ADDER=IS_MAP?'set':'add';var NativeConstructor=global_1[CONSTRUCTOR_NAME];var NativePrototype=NativeConstructor&&NativeConstructor.prototype;var Constructor=NativeConstructor;var exported={};var fixMethod=function(KEY){var nativeMethod=NativePrototype[KEY];redefine(NativePrototype,KEY,KEY=='add'?function add(value){nativeMethod.call(this,value===0?0:value);return this;}:KEY=='delete'?function(key){return IS_WEAK&&!isObject(key)?false:nativeMethod.call(this,key===0?0:key);}:KEY=='get'?function get(key){return IS_WEAK&&!isObject(key)?undefined:nativeMethod.call(this,key===0?0:key);}:KEY=='has'?function has(key){return IS_WEAK&&!isObject(key)?false:nativeMethod.call(this,key===0?0:key);}:function set(key,value){nativeMethod.call(this,key===0?0:key,value);return this;});};if(isForced_1(CONSTRUCTOR_NAME,typeof NativeConstructor!='function'||!(IS_WEAK||NativePrototype.forEach&&!fails(function(){new NativeConstructor().entries().next();})))){Constructor=common.getConstructor(wrapper,CONSTRUCTOR_NAME,IS_MAP,ADDER);internalMetadata.REQUIRED=true;}else if(isForced_1(CONSTRUCTOR_NAME,true)){var instance=new Constructor();var HASNT_CHAINING=instance[ADDER](IS_WEAK?{}:-0,1)!=instance;var THROWS_ON_PRIMITIVES=fails(function(){instance.has(1);});var ACCEPT_ITERABLES=checkCorrectnessOfIteration(function(iterable){new NativeConstructor(iterable);});var BUGGY_ZERO=!IS_WEAK&&fails(function(){var $instance=new NativeConstructor();var index=5;while(index--)$instance[ADDER](index,index);return!$instance.has(-0);});if(!ACCEPT_ITERABLES){Constructor=wrapper(function(dummy,iterable){anInstance(dummy,Constructor,CONSTRUCTOR_NAME);var that=inheritIfRequired(new NativeConstructor(),dummy,Constructor);if(iterable!=undefined)iterate_1(iterable,that[ADDER],that,IS_MAP);return that;});Constructor.prototype=NativePrototype;NativePrototype.constructor=Constructor;}
if(THROWS_ON_PRIMITIVES||BUGGY_ZERO){fixMethod('delete');fixMethod('has');IS_MAP&&fixMethod('get');}
if(BUGGY_ZERO||HASNT_CHAINING)fixMethod(ADDER);if(IS_WEAK&&NativePrototype.clear)delete NativePrototype.clear;}
exported[CONSTRUCTOR_NAME]=Constructor;_export({global:true,forced:Constructor!=NativeConstructor},exported);setToStringTag(Constructor,CONSTRUCTOR_NAME);if(!IS_WEAK)common.setStrong(Constructor,CONSTRUCTOR_NAME,IS_MAP);return Constructor;};var getWeakData=internalMetadata.getWeakData;var setInternalState$5=internalState.set;var internalStateGetterFor=internalState.getterFor;var find$1=arrayIteration.find;var findIndex=arrayIteration.findIndex;var id$1=0;var uncaughtFrozenStore=function(store){return store.frozen||(store.frozen=new UncaughtFrozenStore());};var UncaughtFrozenStore=function(){this.entries=[];};var findUncaughtFrozen=function(store,key){return find$1(store.entries,function(it){return it[0]===key;});};UncaughtFrozenStore.prototype={get:function(key){var entry=findUncaughtFrozen(this,key);if(entry)return entry[1];},has:function(key){return!!findUncaughtFrozen(this,key);},set:function(key,value){var entry=findUncaughtFrozen(this,key);if(entry)entry[1]=value;else this.entries.push([key,value]);},'delete':function(key){var index=findIndex(this.entries,function(it){return it[0]===key;});if(~index)this.entries.splice(index,1);return!!~index;}};var collectionWeak={getConstructor:function(wrapper,CONSTRUCTOR_NAME,IS_MAP,ADDER){var C=wrapper(function(that,iterable){anInstance(that,C,CONSTRUCTOR_NAME);setInternalState$5(that,{type:CONSTRUCTOR_NAME,id:id$1++,frozen:undefined});if(iterable!=undefined)iterate_1(iterable,that[ADDER],that,IS_MAP);});var getInternalState=internalStateGetterFor(CONSTRUCTOR_NAME);var define=function(that,key,value){var state=getInternalState(that);var data=getWeakData(anObject(key),true);if(data===true)uncaughtFrozenStore(state).set(key,value);else data[state.id]=value;return that;};redefineAll(C.prototype,{'delete':function(key){var state=getInternalState(this);if(!isObject(key))return false;var data=getWeakData(key);if(data===true)return uncaughtFrozenStore(state)['delete'](key);return data&&has(data,state.id)&&delete data[state.id];},has:function has$1(key){var state=getInternalState(this);if(!isObject(key))return false;var data=getWeakData(key);if(data===true)return uncaughtFrozenStore(state).has(key);return data&&has(data,state.id);}});redefineAll(C.prototype,IS_MAP?{get:function get(key){var state=getInternalState(this);if(isObject(key)){var data=getWeakData(key);if(data===true)return uncaughtFrozenStore(state).get(key);return data?data[state.id]:undefined;}},set:function set(key,value){return define(this,key,value);}}:{add:function add(value){return define(this,value,true);}});return C;}};var es_weakMap=createCommonjsModule(function(module){var enforceIternalState=internalState.enforce;var IS_IE11=!global_1.ActiveXObject&&'ActiveXObject'in global_1;var isExtensible=Object.isExtensible;var InternalWeakMap;var wrapper=function(init){return function WeakMap(){return init(this,arguments.length?arguments[0]:undefined);};};var $WeakMap=module.exports=collection('WeakMap',wrapper,collectionWeak);if(nativeWeakMap&&IS_IE11){InternalWeakMap=collectionWeak.getConstructor(wrapper,'WeakMap',true);internalMetadata.REQUIRED=true;var WeakMapPrototype=$WeakMap.prototype;var nativeDelete=WeakMapPrototype['delete'];var nativeHas=WeakMapPrototype.has;var nativeGet=WeakMapPrototype.get;var nativeSet=WeakMapPrototype.set;redefineAll(WeakMapPrototype,{'delete':function(key){if(isObject(key)&&!isExtensible(key)){var state=enforceIternalState(this);if(!state.frozen)state.frozen=new InternalWeakMap();return nativeDelete.call(this,key)||state.frozen['delete'](key);}return nativeDelete.call(this,key);},has:function has(key){if(isObject(key)&&!isExtensible(key)){var state=enforceIternalState(this);if(!state.frozen)state.frozen=new InternalWeakMap();return nativeHas.call(this,key)||state.frozen.has(key);}return nativeHas.call(this,key);},get:function get(key){if(isObject(key)&&!isExtensible(key)){var state=enforceIternalState(this);if(!state.frozen)state.frozen=new InternalWeakMap();return nativeHas.call(this,key)?nativeGet.call(this,key):state.frozen.get(key);}return nativeGet.call(this,key);},set:function set(key,value){if(isObject(key)&&!isExtensible(key)){var state=enforceIternalState(this);if(!state.frozen)state.frozen=new InternalWeakMap();nativeHas.call(this,key)?nativeSet.call(this,key,value):state.frozen.set(key,value);}else nativeSet.call(this,key,value);return this;}});}});var $every=arrayIteration.every;var STRICT_METHOD$3=arrayMethodIsStrict('every');var USES_TO_LENGTH$7=arrayMethodUsesToLength('every');_export({target:'Array',proto:true,forced:!STRICT_METHOD$3||!USES_TO_LENGTH$7},{every:function every(callbackfn){return $every(this,callbackfn,arguments.length>1?arguments[1]:undefined);}});_export({target:'Object',stat:true,forced:Object.assign!==objectAssign},{assign:objectAssign});var non='\u200B\u0085\u180E';var stringTrimForced=function(METHOD_NAME){return fails(function(){return!!whitespaces[METHOD_NAME]()||non[METHOD_NAME]()!=non||whitespaces[METHOD_NAME].name!==METHOD_NAME;});};var $trim=stringTrim.trim;_export({target:'String',proto:true,forced:stringTrimForced('trim')},{trim:function trim(){return $trim(this);}});var $some=arrayIteration.some;var STRICT_METHOD$4=arrayMethodIsStrict('some');var USES_TO_LENGTH$8=arrayMethodUsesToLength('some');_export({target:'Array',proto:true,forced:!STRICT_METHOD$4||!USES_TO_LENGTH$8},{some:function some(callbackfn){return $some(this,callbackfn,arguments.length>1?arguments[1]:undefined);}});var thisNumberValue=function(value){if(typeof value!='number'&&classofRaw(value)!='Number'){throw TypeError('Incorrect invocation');}
return+value;};var stringRepeat=''.repeat||function repeat(count){var str=String(requireObjectCoercible(this));var result='';var n=toInteger(count);if(n<0||n==Infinity)throw RangeError('Wrong number of repetitions');for(;n>0;(n>>>=1)&&(str+=str))if(n&1)result+=str;return result;};var nativeToFixed=1.0.toFixed;var floor$4=Math.floor;var pow$1=function(x,n,acc){return n===0?acc:n%2===1?pow$1(x,n-1,acc*x):pow$1(x*x,n/2,acc);};var log=function(x){var n=0;var x2=x;while(x2>=4096){n+=12;x2/=4096;}
while(x2>=2){n+=1;x2/=2;}return n;};var FORCED$1=nativeToFixed&&(0.00008.toFixed(3)!=='0.000'||0.9.toFixed(0)!=='1'||1.255.toFixed(2)!=='1.25'||1000000000000000128.0.toFixed(0)!=='1000000000000000128')||!fails(function(){nativeToFixed.call({});});_export({target:'Number',proto:true,forced:FORCED$1},{toFixed:function toFixed(fractionDigits){var number=thisNumberValue(this);var fractDigits=toInteger(fractionDigits);var data=[0,0,0,0,0,0];var sign='';var result='0';var e,z,j,k;var multiply=function(n,c){var index=-1;var c2=c;while(++index<6){c2+=n*data[index];data[index]=c2%1e7;c2=floor$4(c2/1e7);}};var divide=function(n){var index=6;var c=0;while(--index>=0){c+=data[index];data[index]=floor$4(c/n);c=(c%n)*1e7;}};var dataToString=function(){var index=6;var s='';while(--index>=0){if(s!==''||index===0||data[index]!==0){var t=String(data[index]);s=s===''?t:s+stringRepeat.call('0',7-t.length)+t;}}return s;};if(fractDigits<0||fractDigits>20)throw RangeError('Incorrect fraction digits');if(number!=number)return 'NaN';if(number<=-1e21||number>=1e21)return String(number);if(number<0){sign='-';number=-number;}
if(number>1e-21){e=log(number*pow$1(2,69,1))-69;z=e<0?number*pow$1(2,-e,1):number/pow$1(2,e,1);z*=0x10000000000000;e=52-e;if(e>0){multiply(0,z);j=fractDigits;while(j>=7){multiply(1e7,0);j-=7;}
multiply(pow$1(10,j,1),0);j=e-1;while(j>=23){divide(1<<23);j-=23;}
divide(1<<j);multiply(1,1);divide(2);result=dataToString();}else{multiply(0,z);multiply(1<<-e,0);result=dataToString()+stringRepeat.call('0',fractDigits);}}
if(fractDigits>0){k=result.length;result=sign+(k<=fractDigits?'0.'+stringRepeat.call('0',fractDigits-k)+result:result.slice(0,k-fractDigits)+'.'+result.slice(k-fractDigits));}else{result=sign+result;}return result;}});var propertyIsEnumerable=objectPropertyIsEnumerable.f;var createMethod$4=function(TO_ENTRIES){return function(it){var O=toIndexedObject(it);var keys=objectKeys(O);var length=keys.length;var i=0;var result=[];var key;while(length>i){key=keys[i++];if(!descriptors||propertyIsEnumerable.call(O,key)){result.push(TO_ENTRIES?[key,O[key]]:O[key]);}}
return result;};};var objectToArray={entries:createMethod$4(true),values:createMethod$4(false)};var $entries=objectToArray.entries;_export({target:'Object',stat:true},{entries:function entries(O){return $entries(O);}});var $values=objectToArray.values;_export({target:'Object',stat:true},{values:function values(O){return $values(O);}});var defaults={addCSS:true,thumbWidth:15,watch:true};function matches(element,selector){function match(){return Array.from(document.querySelectorAll(selector)).includes(this);}
var matches=match;return matches.call(element,selector);}
function trigger(element,type){if(!element||!type){return;}
var event=new Event(type);element.dispatchEvent(event);}
_export({target:'Number',stat:true},{isNaN:function isNaN(number){return number!=number;}});var getConstructor=function getConstructor(input){return input!==null&&typeof input!=='undefined'?input.constructor:null;};var instanceOf=function instanceOf(input,constructor){return Boolean(input&&constructor&&input instanceof constructor);};var isNullOrUndefined=function isNullOrUndefined(input){return input===null||typeof input==='undefined';};var isObject$1=function isObject(input){return getConstructor(input)===Object;};var isNumber=function isNumber(input){return getConstructor(input)===Number&&!Number.isNaN(input);};var isString=function isString(input){return getConstructor(input)===String;};var isBoolean=function isBoolean(input){return getConstructor(input)===Boolean;};var isFunction=function isFunction(input){return getConstructor(input)===Function;};var isArray$1=function isArray(input){return Array.isArray(input);};var isNodeList=function isNodeList(input){return instanceOf(input,NodeList);};var isElement=function isElement(input){return instanceOf(input,Element);};var isEvent=function isEvent(input){return instanceOf(input,Event);};var isEmpty=function isEmpty(input){return isNullOrUndefined(input)||(isString(input)||isArray$1(input)||isNodeList(input))&&!input.length||isObject$1(input)&&!Object.keys(input).length;};var is={nullOrUndefined:isNullOrUndefined,object:isObject$1,number:isNumber,string:isString,boolean:isBoolean,function:isFunction,array:isArray$1,nodeList:isNodeList,element:isElement,event:isEvent,empty:isEmpty};fixRegexpWellKnownSymbolLogic('match',1,function(MATCH,nativeMatch,maybeCallNative){return[function match(regexp){var O=requireObjectCoercible(this);var matcher=regexp==undefined?undefined:regexp[MATCH];return matcher!==undefined?matcher.call(regexp,O):new RegExp(regexp)[MATCH](String(O));},function(regexp){var res=maybeCallNative(nativeMatch,regexp,this);if(res.done)return res.value;var rx=anObject(regexp);var S=String(this);if(!rx.global)return regexpExecAbstract(rx,S);var fullUnicode=rx.unicode;rx.lastIndex=0;var A=[];var n=0;var result;while((result=regexpExecAbstract(rx,S))!==null){var matchStr=String(result[0]);A[n]=matchStr;if(matchStr==='')rx.lastIndex=advanceStringIndex(S,toLength(rx.lastIndex),fullUnicode);n++;}
return n===0?null:A;}];});function getDecimalPlaces(value){var match="".concat(value).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);if(!match){return 0;}
return Math.max(0,(match[1]?match[1].length:0)-(match[2]?+match[2]:0));}
function round(number,step){if(step<1){var places=getDecimalPlaces(step);return parseFloat(number.toFixed(places));}
return Math.round(number/step)*step;}
var RangeTouch=function(){function RangeTouch(target,options){_classCallCheck(this,RangeTouch);if(is.element(target)){this.element=target;}else if(is.string(target)){this.element=document.querySelector(target);}
if(!is.element(this.element)||!is.empty(this.element.rangeTouch)){return;}
this.config=Object.assign({},defaults,options);this.init();}
_createClass(RangeTouch,[{key:"init",value:function init(){if(!RangeTouch.enabled){return;}
if(this.config.addCSS){this.element.style.userSelect='none';this.element.style.webKitUserSelect='none';this.element.style.touchAction='manipulation';}
this.listeners(true);this.element.rangeTouch=this;}},{key:"destroy",value:function destroy(){if(!RangeTouch.enabled){return;}
this.listeners(false);this.element.rangeTouch=null;}},{key:"listeners",value:function listeners(toggle){var _this=this;var method=toggle?'addEventListener':'removeEventListener';['touchstart','touchmove','touchend'].forEach(function(type){_this.element[method](type,function(event){return _this.set(event);},false);});}},{key:"get",value:function get(event){if(!RangeTouch.enabled||!is.event(event)){return null;}
var input=event.target;var touch=event.changedTouches[0];var min=parseFloat(input.getAttribute('min'))||0;var max=parseFloat(input.getAttribute('max'))||100;var step=parseFloat(input.getAttribute('step'))||1;var delta=max-min;var percent;var clientRect=input.getBoundingClientRect();var thumbWidth=100/clientRect.width*(this.config.thumbWidth/2)/100;percent=100/clientRect.width*(touch.clientX-clientRect.left);if(percent<0){percent=0;}else if(percent>100){percent=100;}
if(percent<50){percent-=(100-percent*2)*thumbWidth;}else if(percent>50){percent+=(percent-50)*2*thumbWidth;}
return min+round(delta*(percent/100),step);}},{key:"set",value:function set(event){if(!RangeTouch.enabled||!is.event(event)||event.target.disabled){return;}
event.preventDefault();event.target.value=this.get(event);trigger(event.target,event.type==='touchend'?'change':'input');}}],[{key:"setup",value:function setup(target){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var targets=null;if(is.empty(target)||is.string(target)){targets=Array.from(document.querySelectorAll(is.string(target)?target:'input[type="range"]'));}else if(is.element(target)){targets=[target];}else if(is.nodeList(target)){targets=Array.from(target);}else if(is.array(target)){targets=target.filter(is.element);}
if(is.empty(targets)){return null;}
var config=Object.assign({},defaults,options);if(is.string(target)&&config.watch){var observer=new MutationObserver(function(mutations){Array.from(mutations).forEach(function(mutation){Array.from(mutation.addedNodes).forEach(function(node){if(!is.element(node)||!matches(node,target)){return;}
var range=new RangeTouch(node,config);});});});observer.observe(document.body,{childList:true,subtree:true});}
return targets.map(function(t){return new RangeTouch(t,options);});}},{key:"enabled",get:function get(){return 'ontouchstart'in document.documentElement;}}]);return RangeTouch;}();var nativePromiseConstructor=global_1.Promise;var SPECIES$5=wellKnownSymbol('species');var setSpecies=function(CONSTRUCTOR_NAME){var Constructor=getBuiltIn(CONSTRUCTOR_NAME);var defineProperty=objectDefineProperty.f;if(descriptors&&Constructor&&!Constructor[SPECIES$5]){defineProperty(Constructor,SPECIES$5,{configurable:true,get:function(){return this;}});}};var engineIsIos=/(iphone|ipod|ipad).*applewebkit/i.test(engineUserAgent);var location=global_1.location;var set$1=global_1.setImmediate;var clear=global_1.clearImmediate;var process$1=global_1.process;var MessageChannel=global_1.MessageChannel;var Dispatch=global_1.Dispatch;var counter=0;var queue={};var ONREADYSTATECHANGE='onreadystatechange';var defer,channel,port;var run=function(id){if(queue.hasOwnProperty(id)){var fn=queue[id];delete queue[id];fn();}};var runner=function(id){return function(){run(id);};};var listener=function(event){run(event.data);};var post=function(id){global_1.postMessage(id+'',location.protocol+'//'+location.host);};if(!set$1||!clear){set$1=function setImmediate(fn){var args=[];var i=1;while(arguments.length>i)args.push(arguments[i++]);queue[++counter]=function(){(typeof fn=='function'?fn:Function(fn)).apply(undefined,args);};defer(counter);return counter;};clear=function clearImmediate(id){delete queue[id];};if(classofRaw(process$1)=='process'){defer=function(id){process$1.nextTick(runner(id));};}else if(Dispatch&&Dispatch.now){defer=function(id){Dispatch.now(runner(id));};}else if(MessageChannel&&!engineIsIos){channel=new MessageChannel();port=channel.port2;channel.port1.onmessage=listener;defer=functionBindContext(port.postMessage,port,1);}else if(global_1.addEventListener&&typeof postMessage=='function'&&!global_1.importScripts&&!fails(post)){defer=post;global_1.addEventListener('message',listener,false);}else if(ONREADYSTATECHANGE in documentCreateElement('script')){defer=function(id){html.appendChild(documentCreateElement('script'))[ONREADYSTATECHANGE]=function(){html.removeChild(this);run(id);};};}else{defer=function(id){setTimeout(runner(id),0);};}}
var task={set:set$1,clear:clear};var getOwnPropertyDescriptor$3=objectGetOwnPropertyDescriptor.f;var macrotask=task.set;var MutationObserver$1=global_1.MutationObserver||global_1.WebKitMutationObserver;var process$2=global_1.process;var Promise$1=global_1.Promise;var IS_NODE=classofRaw(process$2)=='process';var queueMicrotaskDescriptor=getOwnPropertyDescriptor$3(global_1,'queueMicrotask');var queueMicrotask=queueMicrotaskDescriptor&&queueMicrotaskDescriptor.value;var flush,head,last,notify,toggle,node,promise,then;if(!queueMicrotask){flush=function(){var parent,fn;if(IS_NODE&&(parent=process$2.domain))parent.exit();while(head){fn=head.fn;head=head.next;try{fn();}catch(error){if(head)notify();else last=undefined;throw error;}}last=undefined;if(parent)parent.enter();};if(IS_NODE){notify=function(){process$2.nextTick(flush);};}else if(MutationObserver$1&&!engineIsIos){toggle=true;node=document.createTextNode('');new MutationObserver$1(flush).observe(node,{characterData:true});notify=function(){node.data=toggle=!toggle;};}else if(Promise$1&&Promise$1.resolve){promise=Promise$1.resolve(undefined);then=promise.then;notify=function(){then.call(promise,flush);};}else{notify=function(){macrotask.call(global_1,flush);};}}
var microtask=queueMicrotask||function(fn){var task={fn:fn,next:undefined};if(last)last.next=task;if(!head){head=task;notify();}last=task;};var PromiseCapability=function(C){var resolve,reject;this.promise=new C(function($$resolve,$$reject){if(resolve!==undefined||reject!==undefined)throw TypeError('Bad Promise constructor');resolve=$$resolve;reject=$$reject;});this.resolve=aFunction$1(resolve);this.reject=aFunction$1(reject);};var f$7=function(C){return new PromiseCapability(C);};var newPromiseCapability={f:f$7};var promiseResolve=function(C,x){anObject(C);if(isObject(x)&&x.constructor===C)return x;var promiseCapability=newPromiseCapability.f(C);var resolve=promiseCapability.resolve;resolve(x);return promiseCapability.promise;};var hostReportErrors=function(a,b){var console=global_1.console;if(console&&console.error){arguments.length===1?console.error(a):console.error(a,b);}};var perform=function(exec){try{return{error:false,value:exec()};}catch(error){return{error:true,value:error};}};var task$1=task.set;var SPECIES$6=wellKnownSymbol('species');var PROMISE='Promise';var getInternalState$3=internalState.get;var setInternalState$6=internalState.set;var getInternalPromiseState=internalState.getterFor(PROMISE);var PromiseConstructor=nativePromiseConstructor;var TypeError$1=global_1.TypeError;var document$2=global_1.document;var process$3=global_1.process;var $fetch$1=getBuiltIn('fetch');var newPromiseCapability$1=newPromiseCapability.f;var newGenericPromiseCapability=newPromiseCapability$1;var IS_NODE$1=classofRaw(process$3)=='process';var DISPATCH_EVENT=!!(document$2&&document$2.createEvent&&global_1.dispatchEvent);var UNHANDLED_REJECTION='unhandledrejection';var REJECTION_HANDLED='rejectionhandled';var PENDING=0;var FULFILLED=1;var REJECTED=2;var HANDLED=1;var UNHANDLED=2;var Internal,OwnPromiseCapability,PromiseWrapper,nativeThen;var FORCED$2=isForced_1(PROMISE,function(){var GLOBAL_CORE_JS_PROMISE=inspectSource(PromiseConstructor)!==String(PromiseConstructor);if(!GLOBAL_CORE_JS_PROMISE){if(engineV8Version===66)return true;if(!IS_NODE$1&&typeof PromiseRejectionEvent!='function')return true;}
if(engineV8Version>=51&&/native code/.test(PromiseConstructor))return false;var promise=PromiseConstructor.resolve(1);var FakePromise=function(exec){exec(function(){},function(){});};var constructor=promise.constructor={};constructor[SPECIES$6]=FakePromise;return!(promise.then(function(){})instanceof FakePromise);});var INCORRECT_ITERATION$1=FORCED$2||!checkCorrectnessOfIteration(function(iterable){PromiseConstructor.all(iterable)['catch'](function(){});});var isThenable=function(it){var then;return isObject(it)&&typeof(then=it.then)=='function'?then:false;};var notify$1=function(promise,state,isReject){if(state.notified)return;state.notified=true;var chain=state.reactions;microtask(function(){var value=state.value;var ok=state.state==FULFILLED;var index=0;while(chain.length>index){var reaction=chain[index++];var handler=ok?reaction.ok:reaction.fail;var resolve=reaction.resolve;var reject=reaction.reject;var domain=reaction.domain;var result,then,exited;try{if(handler){if(!ok){if(state.rejection===UNHANDLED)onHandleUnhandled(promise,state);state.rejection=HANDLED;}
if(handler===true)result=value;else{if(domain)domain.enter();result=handler(value);if(domain){domain.exit();exited=true;}}
if(result===reaction.promise){reject(TypeError$1('Promise-chain cycle'));}else if(then=isThenable(result)){then.call(result,resolve,reject);}else resolve(result);}else reject(value);}catch(error){if(domain&&!exited)domain.exit();reject(error);}}
state.reactions=[];state.notified=false;if(isReject&&!state.rejection)onUnhandled(promise,state);});};var dispatchEvent=function(name,promise,reason){var event,handler;if(DISPATCH_EVENT){event=document$2.createEvent('Event');event.promise=promise;event.reason=reason;event.initEvent(name,false,true);global_1.dispatchEvent(event);}else event={promise:promise,reason:reason};if(handler=global_1['on'+name])handler(event);else if(name===UNHANDLED_REJECTION)hostReportErrors('Unhandled promise rejection',reason);};var onUnhandled=function(promise,state){task$1.call(global_1,function(){var value=state.value;var IS_UNHANDLED=isUnhandled(state);var result;if(IS_UNHANDLED){result=perform(function(){if(IS_NODE$1){process$3.emit('unhandledRejection',value,promise);}else dispatchEvent(UNHANDLED_REJECTION,promise,value);});state.rejection=IS_NODE$1||isUnhandled(state)?UNHANDLED:HANDLED;if(result.error)throw result.value;}});};var isUnhandled=function(state){return state.rejection!==HANDLED&&!state.parent;};var onHandleUnhandled=function(promise,state){task$1.call(global_1,function(){if(IS_NODE$1){process$3.emit('rejectionHandled',promise);}else dispatchEvent(REJECTION_HANDLED,promise,state.value);});};var bind=function(fn,promise,state,unwrap){return function(value){fn(promise,state,value,unwrap);};};var internalReject=function(promise,state,value,unwrap){if(state.done)return;state.done=true;if(unwrap)state=unwrap;state.value=value;state.state=REJECTED;notify$1(promise,state,true);};var internalResolve=function(promise,state,value,unwrap){if(state.done)return;state.done=true;if(unwrap)state=unwrap;try{if(promise===value)throw TypeError$1("Promise can't be resolved itself");var then=isThenable(value);if(then){microtask(function(){var wrapper={done:false};try{then.call(value,bind(internalResolve,promise,wrapper,state),bind(internalReject,promise,wrapper,state));}catch(error){internalReject(promise,wrapper,error,state);}});}else{state.value=value;state.state=FULFILLED;notify$1(promise,state,false);}}catch(error){internalReject(promise,{done:false},error,state);}};if(FORCED$2){PromiseConstructor=function Promise(executor){anInstance(this,PromiseConstructor,PROMISE);aFunction$1(executor);Internal.call(this);var state=getInternalState$3(this);try{executor(bind(internalResolve,this,state),bind(internalReject,this,state));}catch(error){internalReject(this,state,error);}};Internal=function Promise(executor){setInternalState$6(this,{type:PROMISE,done:false,notified:false,parent:false,reactions:[],rejection:false,state:PENDING,value:undefined});};Internal.prototype=redefineAll(PromiseConstructor.prototype,{then:function then(onFulfilled,onRejected){var state=getInternalPromiseState(this);var reaction=newPromiseCapability$1(speciesConstructor(this,PromiseConstructor));reaction.ok=typeof onFulfilled=='function'?onFulfilled:true;reaction.fail=typeof onRejected=='function'&&onRejected;reaction.domain=IS_NODE$1?process$3.domain:undefined;state.parent=true;state.reactions.push(reaction);if(state.state!=PENDING)notify$1(this,state,false);return reaction.promise;},'catch':function(onRejected){return this.then(undefined,onRejected);}});OwnPromiseCapability=function(){var promise=new Internal();var state=getInternalState$3(promise);this.promise=promise;this.resolve=bind(internalResolve,promise,state);this.reject=bind(internalReject,promise,state);};newPromiseCapability.f=newPromiseCapability$1=function(C){return C===PromiseConstructor||C===PromiseWrapper?new OwnPromiseCapability(C):newGenericPromiseCapability(C);};if(typeof nativePromiseConstructor=='function'){nativeThen=nativePromiseConstructor.prototype.then;redefine(nativePromiseConstructor.prototype,'then',function then(onFulfilled,onRejected){var that=this;return new PromiseConstructor(function(resolve,reject){nativeThen.call(that,resolve,reject);}).then(onFulfilled,onRejected);},{unsafe:true});if(typeof $fetch$1=='function')_export({global:true,enumerable:true,forced:true},{fetch:function fetch(input){return promiseResolve(PromiseConstructor,$fetch$1.apply(global_1,arguments));}});}}
_export({global:true,wrap:true,forced:FORCED$2},{Promise:PromiseConstructor});setToStringTag(PromiseConstructor,PROMISE,false);setSpecies(PROMISE);PromiseWrapper=getBuiltIn(PROMISE);_export({target:PROMISE,stat:true,forced:FORCED$2},{reject:function reject(r){var capability=newPromiseCapability$1(this);capability.reject.call(undefined,r);return capability.promise;}});_export({target:PROMISE,stat:true,forced:FORCED$2},{resolve:function resolve(x){return promiseResolve(this,x);}});_export({target:PROMISE,stat:true,forced:INCORRECT_ITERATION$1},{all:function all(iterable){var C=this;var capability=newPromiseCapability$1(C);var resolve=capability.resolve;var reject=capability.reject;var result=perform(function(){var $promiseResolve=aFunction$1(C.resolve);var values=[];var counter=0;var remaining=1;iterate_1(iterable,function(promise){var index=counter++;var alreadyCalled=false;values.push(undefined);remaining++;$promiseResolve.call(C,promise).then(function(value){if(alreadyCalled)return;alreadyCalled=true;values[index]=value;--remaining||resolve(values);},reject);});--remaining||resolve(values);});if(result.error)reject(result.value);return capability.promise;},race:function race(iterable){var C=this;var capability=newPromiseCapability$1(C);var reject=capability.reject;var result=perform(function(){var $promiseResolve=aFunction$1(C.resolve);iterate_1(iterable,function(promise){$promiseResolve.call(C,promise).then(capability.resolve,reject);});});if(result.error)reject(result.value);return capability.promise;}});var getOwnPropertyDescriptor$4=objectGetOwnPropertyDescriptor.f;var nativeStartsWith=''.startsWith;var min$4=Math.min;var CORRECT_IS_REGEXP_LOGIC=correctIsRegexpLogic('startsWith');var MDN_POLYFILL_BUG=!CORRECT_IS_REGEXP_LOGIC&&!!function(){var descriptor=getOwnPropertyDescriptor$4(String.prototype,'startsWith');return descriptor&&!descriptor.writable;}();_export({target:'String',proto:true,forced:!MDN_POLYFILL_BUG&&!CORRECT_IS_REGEXP_LOGIC},{startsWith:function startsWith(searchString){var that=String(requireObjectCoercible(this));notARegexp(searchString);var index=toLength(min$4(arguments.length>1?arguments[1]:undefined,that.length));var search=String(searchString);return nativeStartsWith?nativeStartsWith.call(that,search,index):that.slice(index,index+search.length)===search;}});var getConstructor$1=function getConstructor(input){return input!==null&&typeof input!=='undefined'?input.constructor:null;};var instanceOf$1=function instanceOf(input,constructor){return Boolean(input&&constructor&&input instanceof constructor);};var isNullOrUndefined$1=function isNullOrUndefined(input){return input===null||typeof input==='undefined';};var isObject$2=function isObject(input){return getConstructor$1(input)===Object;};var isNumber$1=function isNumber(input){return getConstructor$1(input)===Number&&!Number.isNaN(input);};var isString$1=function isString(input){return getConstructor$1(input)===String;};var isBoolean$1=function isBoolean(input){return getConstructor$1(input)===Boolean;};var isFunction$1=function isFunction(input){return getConstructor$1(input)===Function;};var isArray$2=function isArray(input){return Array.isArray(input);};var isWeakMap=function isWeakMap(input){return instanceOf$1(input,WeakMap);};var isNodeList$1=function isNodeList(input){return instanceOf$1(input,NodeList);};var isElement$1=function isElement(input){return instanceOf$1(input,Element);};var isTextNode=function isTextNode(input){return getConstructor$1(input)===Text;};var isEvent$1=function isEvent(input){return instanceOf$1(input,Event);};var isKeyboardEvent=function isKeyboardEvent(input){return instanceOf$1(input,KeyboardEvent);};var isCue=function isCue(input){return instanceOf$1(input,window.TextTrackCue)||instanceOf$1(input,window.VTTCue);};var isTrack=function isTrack(input){return instanceOf$1(input,TextTrack)||!isNullOrUndefined$1(input)&&isString$1(input.kind);};var isPromise=function isPromise(input){return instanceOf$1(input,Promise);};var isEmpty$1=function isEmpty(input){return isNullOrUndefined$1(input)||(isString$1(input)||isArray$2(input)||isNodeList$1(input))&&!input.length||isObject$2(input)&&!Object.keys(input).length;};var isUrl=function isUrl(input){if(instanceOf$1(input,window.URL)){return true;}
if(!isString$1(input)){return false;}
var string=input;if(!input.startsWith('http://')||!input.startsWith('https://')){string="http://".concat(input);}
try{return!isEmpty$1(new URL(string).hostname);}catch(e){return false;}};var is$1={nullOrUndefined:isNullOrUndefined$1,object:isObject$2,number:isNumber$1,string:isString$1,boolean:isBoolean$1,function:isFunction$1,array:isArray$2,weakMap:isWeakMap,nodeList:isNodeList$1,element:isElement$1,textNode:isTextNode,event:isEvent$1,keyboardEvent:isKeyboardEvent,cue:isCue,track:isTrack,promise:isPromise,url:isUrl,empty:isEmpty$1};var transitionEndEvent=function(){var element=document.createElement('span');var events={WebkitTransition:'webkitTransitionEnd',MozTransition:'transitionend',OTransition:'oTransitionEnd otransitionend',transition:'transitionend'};var type=Object.keys(events).find(function(event){return element.style[event]!==undefined;});return is$1.string(type)?events[type]:false;}();function repaint(element,delay){setTimeout(function(){try{element.hidden=true;element.offsetHeight;element.hidden=false;}catch(e){}},delay);}
var browser={isIE:!!document.documentMode,isEdge:window.navigator.userAgent.includes('Edge'),isWebkit:'WebkitAppearance'in document.documentElement.style&&!/Edge/.test(navigator.userAgent),isIPhone:/(iPhone|iPod)/gi.test(navigator.platform),isIos:/(iPad|iPhone|iPod)/gi.test(navigator.platform)};var createMethod$5=function(IS_RIGHT){return function(that,callbackfn,argumentsLength,memo){aFunction$1(callbackfn);var O=toObject(that);var self=indexedObject(O);var length=toLength(O.length);var index=IS_RIGHT?length-1:0;var i=IS_RIGHT?-1:1;if(argumentsLength<2)while(true){if(index in self){memo=self[index];index+=i;break;}
index+=i;if(IS_RIGHT?index<0:length<=index){throw TypeError('Reduce of empty array with no initial value');}}
for(;IS_RIGHT?index>=0:length>index;index+=i)if(index in self){memo=callbackfn(memo,self[index],index,O);}
return memo;};};var arrayReduce={left:createMethod$5(false),right:createMethod$5(true)};var $reduce=arrayReduce.left;var STRICT_METHOD$5=arrayMethodIsStrict('reduce');var USES_TO_LENGTH$9=arrayMethodUsesToLength('reduce',{1:0});_export({target:'Array',proto:true,forced:!STRICT_METHOD$5||!USES_TO_LENGTH$9},{reduce:function reduce(callbackfn){return $reduce(this,callbackfn,arguments.length,arguments.length>1?arguments[1]:undefined);}});function cloneDeep(object){return JSON.parse(JSON.stringify(object));}
function getDeep(object,path){return path.split('.').reduce(function(obj,key){return obj&&obj[key];},object);}
function extend(){var target=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};for(var _len=arguments.length,sources=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){sources[_key-1]=arguments[_key];}
if(!sources.length){return target;}
var source=sources.shift();if(!is$1.object(source)){return target;}
Object.keys(source).forEach(function(key){if(is$1.object(source[key])){if(!Object.keys(target).includes(key)){Object.assign(target,_defineProperty({},key,{}));}
extend(target[key],source[key]);}else{Object.assign(target,_defineProperty({},key,source[key]));}});return extend.apply(void 0,[target].concat(sources));}
function wrap$1(elements,wrapper){var targets=elements.length?elements:[elements];Array.from(targets).reverse().forEach(function(element,index){var child=index>0?wrapper.cloneNode(true):wrapper;var parent=element.parentNode;var sibling=element.nextSibling;child.appendChild(element);if(sibling){parent.insertBefore(child,sibling);}else{parent.appendChild(child);}});}
function setAttributes(element,attributes){if(!is$1.element(element)||is$1.empty(attributes)){return;}
Object.entries(attributes).filter(function(_ref){var _ref2=_slicedToArray(_ref,2),value=_ref2[1];return!is$1.nullOrUndefined(value);}).forEach(function(_ref3){var _ref4=_slicedToArray(_ref3,2),key=_ref4[0],value=_ref4[1];return element.setAttribute(key,value);});}
function createElement(type,attributes,text){var element=document.createElement(type);if(is$1.object(attributes)){setAttributes(element,attributes);}
if(is$1.string(text)){element.innerText=text;}
return element;}
function insertAfter(element,target){if(!is$1.element(element)||!is$1.element(target)){return;}
target.parentNode.insertBefore(element,target.nextSibling);}
function insertElement(type,parent,attributes,text){if(!is$1.element(parent)){return;}
parent.appendChild(createElement(type,attributes,text));}
function removeElement(element){if(is$1.nodeList(element)||is$1.array(element)){Array.from(element).forEach(removeElement);return;}
if(!is$1.element(element)||!is$1.element(element.parentNode)){return;}
element.parentNode.removeChild(element);}
function emptyElement(element){if(!is$1.element(element)){return;}
var length=element.childNodes.length;while(length>0){element.removeChild(element.lastChild);length-=1;}}
function replaceElement(newChild,oldChild){if(!is$1.element(oldChild)||!is$1.element(oldChild.parentNode)||!is$1.element(newChild)){return null;}
oldChild.parentNode.replaceChild(newChild,oldChild);return newChild;}
function getAttributesFromSelector(sel,existingAttributes){if(!is$1.string(sel)||is$1.empty(sel)){return{};}
var attributes={};var existing=extend({},existingAttributes);sel.split(',').forEach(function(s){var selector=s.trim();var className=selector.replace('.','');var stripped=selector.replace(/[[\]]/g,'');var parts=stripped.split('=');var _parts=_slicedToArray(parts,1),key=_parts[0];var value=parts.length>1?parts[1].replace(/["']/g,''):'';var start=selector.charAt(0);switch(start){case '.':if(is$1.string(existing.class)){attributes.class="".concat(existing.class," ").concat(className);}else{attributes.class=className;}
break;case '#':attributes.id=selector.replace('#','');break;case '[':attributes[key]=value;break;}});return extend(existing,attributes);}
function toggleHidden(element,hidden){if(!is$1.element(element)){return;}
var hide=hidden;if(!is$1.boolean(hide)){hide=!element.hidden;}
element.hidden=hide;}
function toggleClass(element,className,force){if(is$1.nodeList(element)){return Array.from(element).map(function(e){return toggleClass(e,className,force);});}
if(is$1.element(element)){var method='toggle';if(typeof force!=='undefined'){method=force?'add':'remove';}
element.classList[method](className);return element.classList.contains(className);}
return false;}
function hasClass(element,className){return is$1.element(element)&&element.classList.contains(className);}
function matches$1(element,selector){function match(){return Array.from(document.querySelectorAll(selector)).includes(this);}
var method=match;return method.call(element,selector);}
function getElements(selector){return this.elements.container.querySelectorAll(selector);}
function getElement(selector){return this.elements.container.querySelector(selector);}
function setFocus(){var element=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var tabFocus=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!is$1.element(element)){return;}
element.focus({preventScroll:true});if(tabFocus){toggleClass(element,this.config.classNames.tabFocus);}}
var defaultCodecs={'audio/ogg':'vorbis','audio/wav':'1','video/webm':'vp8, vorbis','video/mp4':'avc1.42E01E, mp4a.40.2','video/ogg':'theora'};var support={audio:'canPlayType'in document.createElement('audio'),video:'canPlayType'in document.createElement('video'),check:function check(type,provider,playsinline){var canPlayInline=browser.isIPhone&&playsinline&&support.playsinline;var api=support[type]||provider!=='html5';var ui=api&&support.rangeInput&&(type!=='video'||!browser.isIPhone||canPlayInline);return{api:api,ui:ui};},pip:function(){if(browser.isIPhone){return false;}
if(is$1.function(createElement('video').webkitSetPresentationMode)){return true;}
if(document.pictureInPictureEnabled&&!createElement('video').disablePictureInPicture){return true;}
return false;}(),airplay:is$1.function(window.WebKitPlaybackTargetAvailabilityEvent),playsinline:'playsInline'in document.createElement('video'),mime:function mime(input){if(is$1.empty(input)){return false;}
var _input$split=input.split('/'),_input$split2=_slicedToArray(_input$split,1),mediaType=_input$split2[0];var type=input;if(!this.isHTML5||mediaType!==this.type){return false;}
if(Object.keys(defaultCodecs).includes(type)){type+="; codecs=\"".concat(defaultCodecs[input],"\"");}
try{return Boolean(type&&this.media.canPlayType(type).replace(/no/,''));}catch(e){return false;}},textTracks:'textTracks'in document.createElement('video'),rangeInput:function(){var range=document.createElement('input');range.type='range';return range.type==='range';}(),touch:'ontouchstart'in document.documentElement,transitions:transitionEndEvent!==false,reducedMotion:'matchMedia'in window&&window.matchMedia('(prefers-reduced-motion)').matches};var supportsPassiveListeners=function(){var supported=false;try{var options=Object.defineProperty({},'passive',{get:function get(){supported=true;return null;}});window.addEventListener('test',null,options);window.removeEventListener('test',null,options);}catch(e){}
return supported;}();function toggleListener(element,event,callback){var _this=this;var toggle=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;var passive=arguments.length>4&&arguments[4]!==undefined?arguments[4]:true;var capture=arguments.length>5&&arguments[5]!==undefined?arguments[5]:false;if(!element||!('addEventListener'in element)||is$1.empty(event)||!is$1.function(callback)){return;}
var events=event.split(' ');var options=capture;if(supportsPassiveListeners){options={passive:passive,capture:capture};}
events.forEach(function(type){if(_this&&_this.eventListeners&&toggle){_this.eventListeners.push({element:element,type:type,callback:callback,options:options});}
element[toggle?'addEventListener':'removeEventListener'](type,callback,options);});}
function on(element){var events=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'';var callback=arguments.length>2?arguments[2]:undefined;var passive=arguments.length>3&&arguments[3]!==undefined?arguments[3]:true;var capture=arguments.length>4&&arguments[4]!==undefined?arguments[4]:false;toggleListener.call(this,element,events,callback,true,passive,capture);}
function off(element){var events=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'';var callback=arguments.length>2?arguments[2]:undefined;var passive=arguments.length>3&&arguments[3]!==undefined?arguments[3]:true;var capture=arguments.length>4&&arguments[4]!==undefined?arguments[4]:false;toggleListener.call(this,element,events,callback,false,passive,capture);}
function once(element){var _this2=this;var events=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'';var callback=arguments.length>2?arguments[2]:undefined;var passive=arguments.length>3&&arguments[3]!==undefined?arguments[3]:true;var capture=arguments.length>4&&arguments[4]!==undefined?arguments[4]:false;var onceCallback=function onceCallback(){off(element,events,onceCallback,passive,capture);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}
callback.apply(_this2,args);};toggleListener.call(this,element,events,onceCallback,true,passive,capture);}
function triggerEvent(element){var type=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'';var bubbles=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var detail=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};if(!is$1.element(element)||is$1.empty(type)){return;}
var event=new CustomEvent(type,{bubbles:bubbles,detail:_objectSpread2({},detail,{plyr:this})});element.dispatchEvent(event);}
function unbindListeners(){if(this&&this.eventListeners){this.eventListeners.forEach(function(item){var element=item.element,type=item.type,callback=item.callback,options=item.options;element.removeEventListener(type,callback,options);});this.eventListeners=[];}}
function ready(){var _this3=this;return new Promise(function(resolve){return _this3.ready?setTimeout(resolve,0):on.call(_this3,_this3.elements.container,'ready',resolve);}).then(function(){});}
function validateRatio(input){if(!is$1.array(input)&&(!is$1.string(input)||!input.includes(':'))){return false;}
var ratio=is$1.array(input)?input:input.split(':');return ratio.map(Number).every(is$1.number);}
function reduceAspectRatio(ratio){if(!is$1.array(ratio)||!ratio.every(is$1.number)){return null;}
var _ratio=_slicedToArray(ratio,2),width=_ratio[0],height=_ratio[1];var getDivider=function getDivider(w,h){return h===0?w:getDivider(h,w%h);};var divider=getDivider(width,height);return[width/divider,height/divider];}
function getAspectRatio(input){var parse=function parse(ratio){return validateRatio(ratio)?ratio.split(':').map(Number):null;};var ratio=parse(input);if(ratio===null){ratio=parse(this.config.ratio);}
if(ratio===null&&!is$1.empty(this.embed)&&is$1.array(this.embed.ratio)){ratio=this.embed.ratio;}
if(ratio===null&&this.isHTML5){var _this$media=this.media,videoWidth=_this$media.videoWidth,videoHeight=_this$media.videoHeight;ratio=reduceAspectRatio([videoWidth,videoHeight]);}
return ratio;}
function setAspectRatio(input){if(!this.isVideo){return{};}
var wrapper=this.elements.wrapper;var ratio=getAspectRatio.call(this,input);var _ref=is$1.array(ratio)?ratio:[0,0],_ref2=_slicedToArray(_ref,2),w=_ref2[0],h=_ref2[1];var padding=100/w*h;wrapper.style.paddingBottom="".concat(padding,"%");if(this.isVimeo&&this.supported.ui){var height=240;var offset=(height-padding)/(height/50);this.media.style.transform="translateY(-".concat(offset,"%)");}else if(this.isHTML5){wrapper.classList.toggle(this.config.classNames.videoFixedRatio,ratio!==null);}
return{padding:padding,ratio:ratio};}
var html5={getSources:function getSources(){var _this=this;if(!this.isHTML5){return[];}
var sources=Array.from(this.media.querySelectorAll('source'));return sources.filter(function(source){var type=source.getAttribute('type');if(is$1.empty(type)){return true;}
return support.mime.call(_this,type);});},getQualityOptions:function getQualityOptions(){if(this.config.quality.forced){return this.config.quality.options;}
return html5.getSources.call(this).map(function(source){return Number(source.getAttribute('size'));}).filter(Boolean);},setup:function setup(){if(!this.isHTML5){return;}
var player=this;player.options.speed=player.config.speed.options;if(!is$1.empty(this.config.ratio)){setAspectRatio.call(player);}
Object.defineProperty(player.media,'quality',{get:function get(){var sources=html5.getSources.call(player);var source=sources.find(function(s){return s.getAttribute('src')===player.source;});return source&&Number(source.getAttribute('size'));},set:function set(input){if(player.quality===input){return;}
if(player.config.quality.forced&&is$1.function(player.config.quality.onChange)){player.config.quality.onChange(input);}else{var sources=html5.getSources.call(player);var source=sources.find(function(s){return Number(s.getAttribute('size'))===input;});if(!source){return;}
var _player$media=player.media,currentTime=_player$media.currentTime,paused=_player$media.paused,preload=_player$media.preload,readyState=_player$media.readyState,playbackRate=_player$media.playbackRate;player.media.src=source.getAttribute('src');if(preload!=='none'||readyState){player.once('loadedmetadata',function(){player.speed=playbackRate;player.currentTime=currentTime;if(!paused){player.play();}});player.media.load();}}
triggerEvent.call(player,player.media,'qualitychange',false,{quality:input});}});},cancelRequests:function cancelRequests(){if(!this.isHTML5){return;}
removeElement(html5.getSources.call(this));this.media.setAttribute('src',this.config.blankVideo);this.media.load();this.debug.log('Cancelled network requests');}};function dedupe(array){if(!is$1.array(array)){return array;}
return array.filter(function(item,index){return array.indexOf(item)===index;});}
function closest(array,value){if(!is$1.array(array)||!array.length){return null;}
return array.reduce(function(prev,curr){return Math.abs(curr-value)<Math.abs(prev-value)?curr:prev;});}
var defineProperty$6=objectDefineProperty.f;var getOwnPropertyNames$1=objectGetOwnPropertyNames.f;var setInternalState$7=internalState.set;var MATCH$2=wellKnownSymbol('match');var NativeRegExp=global_1.RegExp;var RegExpPrototype$1=NativeRegExp.prototype;var re1=/a/g;var re2=/a/g;var CORRECT_NEW=new NativeRegExp(re1)!==re1;var UNSUPPORTED_Y$2=regexpStickyHelpers.UNSUPPORTED_Y;var FORCED$3=descriptors&&isForced_1('RegExp',(!CORRECT_NEW||UNSUPPORTED_Y$2||fails(function(){re2[MATCH$2]=false;return NativeRegExp(re1)!=re1||NativeRegExp(re2)==re2||NativeRegExp(re1,'i')!='/a/i';})));if(FORCED$3){var RegExpWrapper=function RegExp(pattern,flags){var thisIsRegExp=this instanceof RegExpWrapper;var patternIsRegExp=isRegexp(pattern);var flagsAreUndefined=flags===undefined;var sticky;if(!thisIsRegExp&&patternIsRegExp&&pattern.constructor===RegExpWrapper&&flagsAreUndefined){return pattern;}
if(CORRECT_NEW){if(patternIsRegExp&&!flagsAreUndefined)pattern=pattern.source;}else if(pattern instanceof RegExpWrapper){if(flagsAreUndefined)flags=regexpFlags.call(pattern);pattern=pattern.source;}
if(UNSUPPORTED_Y$2){sticky=!!flags&&flags.indexOf('y')>-1;if(sticky)flags=flags.replace(/y/g,'');}
var result=inheritIfRequired(CORRECT_NEW?new NativeRegExp(pattern,flags):NativeRegExp(pattern,flags),thisIsRegExp?this:RegExpPrototype$1,RegExpWrapper);if(UNSUPPORTED_Y$2&&sticky)setInternalState$7(result,{sticky:sticky});return result;};var proxy=function(key){key in RegExpWrapper||defineProperty$6(RegExpWrapper,key,{configurable:true,get:function(){return NativeRegExp[key];},set:function(it){NativeRegExp[key]=it;}});};var keys$2=getOwnPropertyNames$1(NativeRegExp);var index=0;while(keys$2.length>index)proxy(keys$2[index++]);RegExpPrototype$1.constructor=RegExpWrapper;RegExpWrapper.prototype=RegExpPrototype$1;redefine(global_1,'RegExp',RegExpWrapper);}
setSpecies('RegExp');function generateId(prefix){return "".concat(prefix,"-").concat(Math.floor(Math.random()*10000));}
function format(input){for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){args[_key-1]=arguments[_key];}
if(is$1.empty(input)){return input;}
return input.toString().replace(/{(\d+)}/g,function(match,i){return args[i].toString();});}
function getPercentage(current,max){if(current===0||max===0||Number.isNaN(current)||Number.isNaN(max)){return 0;}
return(current/max*100).toFixed(2);}
function replaceAll(){var input=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';var find=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'';var replace=arguments.length>2&&arguments[2]!==undefined?arguments[2]:'';return input.replace(new RegExp(find.toString().replace(/([.*+?^=!:${}()|[\]/\\])/g,'\\$1'),'g'),replace.toString());}
function toTitleCase(){var input=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';return input.toString().replace(/\w\S*/g,function(text){return text.charAt(0).toUpperCase()+text.substr(1).toLowerCase();});}
function toPascalCase(){var input=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';var string=input.toString();string=replaceAll(string,'-',' ');string=replaceAll(string,'_',' ');string=toTitleCase(string);return replaceAll(string,' ','');}
function toCamelCase(){var input=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';var string=input.toString();string=toPascalCase(string);return string.charAt(0).toLowerCase()+string.slice(1);}
function stripHTML(source){var fragment=document.createDocumentFragment();var element=document.createElement('div');fragment.appendChild(element);element.innerHTML=source;return fragment.firstChild.innerText;}
function getHTML(element){var wrapper=document.createElement('div');wrapper.appendChild(element);return wrapper.innerHTML;}
var resources={pip:'PIP',airplay:'AirPlay',html5:'HTML5',vimeo:'Vimeo',youtube:'YouTube'};var i18n={get:function get(){var key=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';var config=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(is$1.empty(key)||is$1.empty(config)){return '';}
var string=getDeep(config.i18n,key);if(is$1.empty(string)){if(Object.keys(resources).includes(key)){return resources[key];}
return '';}
var replace={'{seektime}':config.seekTime,'{title}':config.title};Object.entries(replace).forEach(function(_ref){var _ref2=_slicedToArray(_ref,2),k=_ref2[0],v=_ref2[1];string=replaceAll(string,k,v);});return string;}};var Storage=function(){function Storage(player){_classCallCheck(this,Storage);this.enabled=player.config.storage.enabled;this.key=player.config.storage.key;}
_createClass(Storage,[{key:"get",value:function get(key){if(!Storage.supported||!this.enabled){return null;}
var store=window.localStorage.getItem(this.key);if(is$1.empty(store)){return null;}
var json=JSON.parse(store);return is$1.string(key)&&key.length?json[key]:json;}},{key:"set",value:function set(object){if(!Storage.supported||!this.enabled){return;}
if(!is$1.object(object)){return;}
var storage=this.get();if(is$1.empty(storage)){storage={};}
extend(storage,object);window.localStorage.setItem(this.key,JSON.stringify(storage));}}],[{key:"supported",get:function get(){try{if(!('localStorage'in window)){return false;}
var test='___test';window.localStorage.setItem(test,test);window.localStorage.removeItem(test);return true;}catch(e){return false;}}}]);return Storage;}();function fetch(url){var responseType=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'text';return new Promise(function(resolve,reject){try{var request=new XMLHttpRequest();if(!('withCredentials'in request)){return;}
request.addEventListener('load',function(){if(responseType==='text'){try{resolve(JSON.parse(request.responseText));}catch(e){resolve(request.responseText);}}else{resolve(request.response);}});request.addEventListener('error',function(){throw new Error(request.status);});request.open('GET',url,true);request.responseType=responseType;request.send();}catch(e){reject(e);}});}
function loadSprite(url,id){if(!is$1.string(url)){return;}
var prefix='cache';var hasId=is$1.string(id);var isCached=false;var exists=function exists(){return document.getElementById(id)!==null;};var update=function update(container,data){container.innerHTML=data;if(hasId&&exists()){return;}
document.body.insertAdjacentElement('afterbegin',container);};if(!hasId||!exists()){var useStorage=Storage.supported;var container=document.createElement('div');container.setAttribute('hidden','');if(hasId){container.setAttribute('id',id);}
if(useStorage){var cached=window.localStorage.getItem("".concat(prefix,"-").concat(id));isCached=cached!==null;if(isCached){var data=JSON.parse(cached);update(container,data.content);}}
fetch(url).then(function(result){if(is$1.empty(result)){return;}
if(useStorage){window.localStorage.setItem("".concat(prefix,"-").concat(id),JSON.stringify({content:result}));}
update(container,result);}).catch(function(){});}}
var ceil$1=Math.ceil;var floor$5=Math.floor;_export({target:'Math',stat:true},{trunc:function trunc(it){return(it>0?floor$5:ceil$1)(it);}});var getHours=function getHours(value){return Math.trunc(value/60/60%60,10);};var getMinutes=function getMinutes(value){return Math.trunc(value/60%60,10);};var getSeconds=function getSeconds(value){return Math.trunc(value%60,10);};function formatTime(){var time=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var displayHours=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var inverted=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(!is$1.number(time)){return formatTime(undefined,displayHours,inverted);}
var format=function format(value){return "0".concat(value).slice(-2);};var hours=getHours(time);var mins=getMinutes(time);var secs=getSeconds(time);if(displayHours||hours>0){hours="".concat(hours,":");}else{hours='';}
return "".concat(inverted&&time>0?'-':'').concat(hours).concat(format(mins),":").concat(format(secs));}
var controls={getIconUrl:function getIconUrl(){var url=new URL(this.config.iconUrl,window.location);var cors=url.host!==window.location.host||browser.isIE&&!window.svg4everybody;return{url:this.config.iconUrl,cors:cors};},findElements:function findElements(){try{this.elements.controls=getElement.call(this,this.config.selectors.controls.wrapper);this.elements.buttons={play:getElements.call(this,this.config.selectors.buttons.play),pause:getElement.call(this,this.config.selectors.buttons.pause),restart:getElement.call(this,this.config.selectors.buttons.restart),rewind:getElement.call(this,this.config.selectors.buttons.rewind),fastForward:getElement.call(this,this.config.selectors.buttons.fastForward),mute:getElement.call(this,this.config.selectors.buttons.mute),pip:getElement.call(this,this.config.selectors.buttons.pip),airplay:getElement.call(this,this.config.selectors.buttons.airplay),settings:getElement.call(this,this.config.selectors.buttons.settings),captions:getElement.call(this,this.config.selectors.buttons.captions),fullscreen:getElement.call(this,this.config.selectors.buttons.fullscreen)};this.elements.progress=getElement.call(this,this.config.selectors.progress);this.elements.inputs={seek:getElement.call(this,this.config.selectors.inputs.seek),volume:getElement.call(this,this.config.selectors.inputs.volume)};this.elements.display={buffer:getElement.call(this,this.config.selectors.display.buffer),currentTime:getElement.call(this,this.config.selectors.display.currentTime),duration:getElement.call(this,this.config.selectors.display.duration)};if(is$1.element(this.elements.progress)){this.elements.display.seekTooltip=this.elements.progress.querySelector(".".concat(this.config.classNames.tooltip));}
return true;}catch(error){this.debug.warn('It looks like there is a problem with your custom controls HTML',error);this.toggleNativeControls(true);return false;}},createIcon:function createIcon(type,attributes){var namespace='http://www.w3.org/2000/svg';var iconUrl=controls.getIconUrl.call(this);var iconPath="".concat(!iconUrl.cors?iconUrl.url:'',"#").concat(this.config.iconPrefix);var icon=document.createElementNS(namespace,'svg');setAttributes(icon,extend(attributes,{role:'presentation',focusable:'false'}));var use=document.createElementNS(namespace,'use');var path="".concat(iconPath,"-").concat(type);if('href'in use){use.setAttributeNS('http://www.w3.org/1999/xlink','href',path);}
use.setAttributeNS('http://www.w3.org/1999/xlink','xlink:href',path);icon.appendChild(use);return icon;},createLabel:function createLabel(key){var attr=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var text=i18n.get(key,this.config);var attributes=_objectSpread2({},attr,{class:[attr.class,this.config.classNames.hidden].filter(Boolean).join(' ')});return createElement('span',attributes,text);},createBadge:function createBadge(text){if(is$1.empty(text)){return null;}
var badge=createElement('span',{class:this.config.classNames.menu.value});badge.appendChild(createElement('span',{class:this.config.classNames.menu.badge},text));return badge;},createButton:function createButton(buttonType,attr){var _this=this;var attributes=extend({},attr);var type=toCamelCase(buttonType);var props={element:'button',toggle:false,label:null,icon:null,labelPressed:null,iconPressed:null};['element','icon','label'].forEach(function(key){if(Object.keys(attributes).includes(key)){props[key]=attributes[key];delete attributes[key];}});if(props.element==='button'&&!Object.keys(attributes).includes('type')){attributes.type='button';}
if(Object.keys(attributes).includes('class')){if(!attributes.class.split(' ').some(function(c){return c===_this.config.classNames.control;})){extend(attributes,{class:"".concat(attributes.class," ").concat(this.config.classNames.control)});}}else{attributes.class=this.config.classNames.control;}
switch(buttonType){case 'play':props.toggle=true;props.label='play';props.labelPressed='pause';props.icon='play';props.iconPressed='pause';break;case 'mute':props.toggle=true;props.label='mute';props.labelPressed='unmute';props.icon='volume';props.iconPressed='muted';break;case 'captions':props.toggle=true;props.label='enableCaptions';props.labelPressed='disableCaptions';props.icon='captions-off';props.iconPressed='captions-on';break;case 'fullscreen':props.toggle=true;props.label='enterFullscreen';props.labelPressed='exitFullscreen';props.icon='enter-fullscreen';props.iconPressed='exit-fullscreen';break;case 'play-large':attributes.class+=" ".concat(this.config.classNames.control,"--overlaid");type='play';props.label='play';props.icon='play';break;default:if(is$1.empty(props.label)){props.label=type;}
if(is$1.empty(props.icon)){props.icon=buttonType;}}
var button=createElement(props.element);if(props.toggle){button.appendChild(controls.createIcon.call(this,props.iconPressed,{class:'icon--pressed'}));button.appendChild(controls.createIcon.call(this,props.icon,{class:'icon--not-pressed'}));button.appendChild(controls.createLabel.call(this,props.labelPressed,{class:'label--pressed'}));button.appendChild(controls.createLabel.call(this,props.label,{class:'label--not-pressed'}));}else{button.appendChild(controls.createIcon.call(this,props.icon));button.appendChild(controls.createLabel.call(this,props.label));}
extend(attributes,getAttributesFromSelector(this.config.selectors.buttons[type],attributes));setAttributes(button,attributes);if(type==='play'){if(!is$1.array(this.elements.buttons[type])){this.elements.buttons[type]=[];}
this.elements.buttons[type].push(button);}else{this.elements.buttons[type]=button;}
return button;},createRange:function createRange(type,attributes){var input=createElement('input',extend(getAttributesFromSelector(this.config.selectors.inputs[type]),{type:'range',min:0,max:100,step:0.01,value:0,autocomplete:'off',role:'slider','aria-label':i18n.get(type,this.config),'aria-valuemin':0,'aria-valuemax':100,'aria-valuenow':0},attributes));this.elements.inputs[type]=input;controls.updateRangeFill.call(this,input);RangeTouch.setup(input);return input;},createProgress:function createProgress(type,attributes){var progress=createElement('progress',extend(getAttributesFromSelector(this.config.selectors.display[type]),{min:0,max:100,value:0,role:'progressbar','aria-hidden':true},attributes));if(type!=='volume'){progress.appendChild(createElement('span',null,'0'));var suffixKey={played:'played',buffer:'buffered'}[type];var suffix=suffixKey?i18n.get(suffixKey,this.config):'';progress.innerText="% ".concat(suffix.toLowerCase());}
this.elements.display[type]=progress;return progress;},createTime:function createTime(type,attrs){var attributes=getAttributesFromSelector(this.config.selectors.display[type],attrs);var container=createElement('div',extend(attributes,{class:"".concat(attributes.class?attributes.class:''," ").concat(this.config.classNames.display.time," ").trim(),'aria-label':i18n.get(type,this.config)}),'00:00');this.elements.display[type]=container;return container;},bindMenuItemShortcuts:function bindMenuItemShortcuts(menuItem,type){var _this2=this;on.call(this,menuItem,'keydown keyup',function(event){if(![32,38,39,40].includes(event.which)){return;}
event.preventDefault();event.stopPropagation();if(event.type==='keydown'){return;}
var isRadioButton=matches$1(menuItem,'[role="menuitemradio"]');if(!isRadioButton&&[32,39].includes(event.which)){controls.showMenuPanel.call(_this2,type,true);}else{var target;if(event.which!==32){if(event.which===40||isRadioButton&&event.which===39){target=menuItem.nextElementSibling;if(!is$1.element(target)){target=menuItem.parentNode.firstElementChild;}}else{target=menuItem.previousElementSibling;if(!is$1.element(target)){target=menuItem.parentNode.lastElementChild;}}
setFocus.call(_this2,target,true);}}},false);on.call(this,menuItem,'keyup',function(event){if(event.which!==13){return;}
controls.focusFirstMenuItem.call(_this2,null,true);});},createMenuItem:function createMenuItem(_ref){var _this3=this;var value=_ref.value,list=_ref.list,type=_ref.type,title=_ref.title,_ref$badge=_ref.badge,badge=_ref$badge===void 0?null:_ref$badge,_ref$checked=_ref.checked,checked=_ref$checked===void 0?false:_ref$checked;var attributes=getAttributesFromSelector(this.config.selectors.inputs[type]);var menuItem=createElement('button',extend(attributes,{type:'button',role:'menuitemradio',class:"".concat(this.config.classNames.control," ").concat(attributes.class?attributes.class:'').trim(),'aria-checked':checked,value:value}));var flex=createElement('span');flex.innerHTML=title;if(is$1.element(badge)){flex.appendChild(badge);}
menuItem.appendChild(flex);Object.defineProperty(menuItem,'checked',{enumerable:true,get:function get(){return menuItem.getAttribute('aria-checked')==='true';},set:function set(check){if(check){Array.from(menuItem.parentNode.children).filter(function(node){return matches$1(node,'[role="menuitemradio"]');}).forEach(function(node){return node.setAttribute('aria-checked','false');});}
menuItem.setAttribute('aria-checked',check?'true':'false');}});this.listeners.bind(menuItem,'click keyup',function(event){if(is$1.keyboardEvent(event)&&event.which!==32){return;}
event.preventDefault();event.stopPropagation();menuItem.checked=true;switch(type){case 'language':_this3.currentTrack=Number(value);break;case 'quality':_this3.quality=value;break;case 'speed':_this3.speed=parseFloat(value);break;}
controls.showMenuPanel.call(_this3,'home',is$1.keyboardEvent(event));},type,false);controls.bindMenuItemShortcuts.call(this,menuItem,type);list.appendChild(menuItem);},formatTime:function formatTime$1(){var time=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var inverted=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!is$1.number(time)){return time;}
var forceHours=getHours(this.duration)>0;return formatTime(time,forceHours,inverted);},updateTimeDisplay:function updateTimeDisplay(){var target=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var time=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var inverted=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(!is$1.element(target)||!is$1.number(time)){return;}
target.innerText=controls.formatTime(time,inverted);},updateVolume:function updateVolume(){if(!this.supported.ui){return;}
if(is$1.element(this.elements.inputs.volume)){controls.setRange.call(this,this.elements.inputs.volume,this.muted?0:this.volume);}
if(is$1.element(this.elements.buttons.mute)){this.elements.buttons.mute.pressed=this.muted||this.volume===0;}},setRange:function setRange(target){var value=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;if(!is$1.element(target)){return;}
target.value=value;controls.updateRangeFill.call(this,target);},updateProgress:function updateProgress(event){var _this4=this;if(!this.supported.ui||!is$1.event(event)){return;}
var value=0;var setProgress=function setProgress(target,input){var val=is$1.number(input)?input:0;var progress=is$1.element(target)?target:_this4.elements.display.buffer;if(is$1.element(progress)){progress.value=val;var label=progress.getElementsByTagName('span')[0];if(is$1.element(label)){label.childNodes[0].nodeValue=val;}}};if(event){switch(event.type){case 'timeupdate':case 'seeking':case 'seeked':value=getPercentage(this.currentTime,this.duration);if(event.type==='timeupdate'){controls.setRange.call(this,this.elements.inputs.seek,value);}
break;case 'playing':case 'progress':setProgress(this.elements.display.buffer,this.buffered*100);break;}}},updateRangeFill:function updateRangeFill(target){var range=is$1.event(target)?target.target:target;if(!is$1.element(range)||range.getAttribute('type')!=='range'){return;}
if(matches$1(range,this.config.selectors.inputs.seek)){range.setAttribute('aria-valuenow',this.currentTime);var currentTime=controls.formatTime(this.currentTime);var duration=controls.formatTime(this.duration);var format=i18n.get('seekLabel',this.config);range.setAttribute('aria-valuetext',format.replace('{currentTime}',currentTime).replace('{duration}',duration));}else if(matches$1(range,this.config.selectors.inputs.volume)){var percent=range.value*100;range.setAttribute('aria-valuenow',percent);range.setAttribute('aria-valuetext',"".concat(percent.toFixed(1),"%"));}else{range.setAttribute('aria-valuenow',range.value);}
if(!browser.isWebkit){return;}
range.style.setProperty('--value',"".concat(range.value/range.max*100,"%"));},updateSeekTooltip:function updateSeekTooltip(event){var _this5=this;if(!this.config.tooltips.seek||!is$1.element(this.elements.inputs.seek)||!is$1.element(this.elements.display.seekTooltip)||this.duration===0){return;}
var visible="".concat(this.config.classNames.tooltip,"--visible");var toggle=function toggle(show){return toggleClass(_this5.elements.display.seekTooltip,visible,show);};if(this.touch){toggle(false);return;}
var percent=0;var clientRect=this.elements.progress.getBoundingClientRect();if(is$1.event(event)){percent=100/clientRect.width*(event.pageX-clientRect.left);}else if(hasClass(this.elements.display.seekTooltip,visible)){percent=parseFloat(this.elements.display.seekTooltip.style.left,10);}else{return;}
if(percent<0){percent=0;}else if(percent>100){percent=100;}
controls.updateTimeDisplay.call(this,this.elements.display.seekTooltip,this.duration/100*percent);this.elements.display.seekTooltip.style.left="".concat(percent,"%");if(is$1.event(event)&&['mouseenter','mouseleave'].includes(event.type)){toggle(event.type==='mouseenter');}},timeUpdate:function timeUpdate(event){var invert=!is$1.element(this.elements.display.duration)&&this.config.invertTime;controls.updateTimeDisplay.call(this,this.elements.display.currentTime,invert?this.duration-this.currentTime:this.currentTime,invert);if(event&&event.type==='timeupdate'&&this.media.seeking){return;}
controls.updateProgress.call(this,event);},durationUpdate:function durationUpdate(){if(!this.supported.ui||!this.config.invertTime&&this.currentTime){return;}
if(this.duration>=Math.pow(2,32)){toggleHidden(this.elements.display.currentTime,true);toggleHidden(this.elements.progress,true);return;}
if(is$1.element(this.elements.inputs.seek)){this.elements.inputs.seek.setAttribute('aria-valuemax',this.duration);}
var hasDuration=is$1.element(this.elements.display.duration);if(!hasDuration&&this.config.displayDuration&&this.paused){controls.updateTimeDisplay.call(this,this.elements.display.currentTime,this.duration);}
if(hasDuration){controls.updateTimeDisplay.call(this,this.elements.display.duration,this.duration);}
controls.updateSeekTooltip.call(this);},toggleMenuButton:function toggleMenuButton(setting,toggle){toggleHidden(this.elements.settings.buttons[setting],!toggle);},updateSetting:function updateSetting(setting,container,input){var pane=this.elements.settings.panels[setting];var value=null;var list=container;if(setting==='captions'){value=this.currentTrack;}else{value=!is$1.empty(input)?input:this[setting];if(is$1.empty(value)){value=this.config[setting].default;}
if(!is$1.empty(this.options[setting])&&!this.options[setting].includes(value)){this.debug.warn("Unsupported value of '".concat(value,"' for ").concat(setting));return;}
if(!this.config[setting].options.includes(value)){this.debug.warn("Disabled value of '".concat(value,"' for ").concat(setting));return;}}
if(!is$1.element(list)){list=pane&&pane.querySelector('[role="menu"]');}
if(!is$1.element(list)){return;}
var label=this.elements.settings.buttons[setting].querySelector(".".concat(this.config.classNames.menu.value));label.innerHTML=controls.getLabel.call(this,setting,value);var target=list&&list.querySelector("[value=\"".concat(value,"\"]"));if(is$1.element(target)){target.checked=true;}},getLabel:function getLabel(setting,value){switch(setting){case 'speed':return value===1?i18n.get('normal',this.config):"".concat(value,"&times;");case 'quality':if(is$1.number(value)){var label=i18n.get("qualityLabel.".concat(value),this.config);if(!label.length){return "".concat(value,"p");}
return label;}
return toTitleCase(value);case 'captions':return captions.getLabel.call(this);default:return null;}},setQualityMenu:function setQualityMenu(options){var _this6=this;if(!is$1.element(this.elements.settings.panels.quality)){return;}
var type='quality';var list=this.elements.settings.panels.quality.querySelector('[role="menu"]');if(is$1.array(options)){this.options.quality=dedupe(options).filter(function(quality){return _this6.config.quality.options.includes(quality);});}
var toggle=!is$1.empty(this.options.quality)&&this.options.quality.length>1;controls.toggleMenuButton.call(this,type,toggle);emptyElement(list);controls.checkMenu.call(this);if(!toggle){return;}
var getBadge=function getBadge(quality){var label=i18n.get("qualityBadge.".concat(quality),_this6.config);if(!label.length){return null;}
return controls.createBadge.call(_this6,label);};this.options.quality.sort(function(a,b){var sorting=_this6.config.quality.options;return sorting.indexOf(a)>sorting.indexOf(b)?1:-1;}).forEach(function(quality){controls.createMenuItem.call(_this6,{value:quality,list:list,type:type,title:controls.getLabel.call(_this6,'quality',quality),badge:getBadge(quality)});});controls.updateSetting.call(this,type,list);},setCaptionsMenu:function setCaptionsMenu(){var _this7=this;if(!is$1.element(this.elements.settings.panels.captions)){return;}
var type='captions';var list=this.elements.settings.panels.captions.querySelector('[role="menu"]');var tracks=captions.getTracks.call(this);var toggle=Boolean(tracks.length);controls.toggleMenuButton.call(this,type,toggle);emptyElement(list);controls.checkMenu.call(this);if(!toggle){return;}
var options=tracks.map(function(track,value){return{value:value,checked:_this7.captions.toggled&&_this7.currentTrack===value,title:captions.getLabel.call(_this7,track),badge:track.language&&controls.createBadge.call(_this7,track.language.toUpperCase()),list:list,type:'language'};});options.unshift({value:-1,checked:!this.captions.toggled,title:i18n.get('disabled',this.config),list:list,type:'language'});options.forEach(controls.createMenuItem.bind(this));controls.updateSetting.call(this,type,list);},setSpeedMenu:function setSpeedMenu(){var _this8=this;if(!is$1.element(this.elements.settings.panels.speed)){return;}
var type='speed';var list=this.elements.settings.panels.speed.querySelector('[role="menu"]');this.options.speed=this.options.speed.filter(function(o){return o>=_this8.minimumSpeed&&o<=_this8.maximumSpeed;});var toggle=!is$1.empty(this.options.speed)&&this.options.speed.length>1;controls.toggleMenuButton.call(this,type,toggle);emptyElement(list);controls.checkMenu.call(this);if(!toggle){return;}
this.options.speed.forEach(function(speed){controls.createMenuItem.call(_this8,{value:speed,list:list,type:type,title:controls.getLabel.call(_this8,'speed',speed)});});controls.updateSetting.call(this,type,list);},checkMenu:function checkMenu(){var buttons=this.elements.settings.buttons;var visible=!is$1.empty(buttons)&&Object.values(buttons).some(function(button){return!button.hidden;});toggleHidden(this.elements.settings.menu,!visible);},focusFirstMenuItem:function focusFirstMenuItem(pane){var tabFocus=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(this.elements.settings.popup.hidden){return;}
var target=pane;if(!is$1.element(target)){target=Object.values(this.elements.settings.panels).find(function(p){return!p.hidden;});}
var firstItem=target.querySelector('[role^="menuitem"]');setFocus.call(this,firstItem,tabFocus);},toggleMenu:function toggleMenu(input){var popup=this.elements.settings.popup;var button=this.elements.buttons.settings;if(!is$1.element(popup)||!is$1.element(button)){return;}
var hidden=popup.hidden;var show=hidden;if(is$1.boolean(input)){show=input;}else if(is$1.keyboardEvent(input)&&input.which===27){show=false;}else if(is$1.event(input)){var target=is$1.function(input.composedPath)?input.composedPath()[0]:input.target;var isMenuItem=popup.contains(target);if(isMenuItem||!isMenuItem&&input.target!==button&&show){return;}}
button.setAttribute('aria-expanded',show);toggleHidden(popup,!show);toggleClass(this.elements.container,this.config.classNames.menu.open,show);if(show&&is$1.keyboardEvent(input)){controls.focusFirstMenuItem.call(this,null,true);}else if(!show&&!hidden){setFocus.call(this,button,is$1.keyboardEvent(input));}},getMenuSize:function getMenuSize(tab){var clone=tab.cloneNode(true);clone.style.position='absolute';clone.style.opacity=0;clone.removeAttribute('hidden');tab.parentNode.appendChild(clone);var width=clone.scrollWidth;var height=clone.scrollHeight;removeElement(clone);return{width:width,height:height};},showMenuPanel:function showMenuPanel(){var _this9=this;var type=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';var tabFocus=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var target=this.elements.container.querySelector("#plyr-settings-".concat(this.id,"-").concat(type));if(!is$1.element(target)){return;}
var container=target.parentNode;var current=Array.from(container.children).find(function(node){return!node.hidden;});if(support.transitions&&!support.reducedMotion){container.style.width="".concat(current.scrollWidth,"px");container.style.height="".concat(current.scrollHeight,"px");var size=controls.getMenuSize.call(this,target);var restore=function restore(event){if(event.target!==container||!['width','height'].includes(event.propertyName)){return;}
container.style.width='';container.style.height='';off.call(_this9,container,transitionEndEvent,restore);};on.call(this,container,transitionEndEvent,restore);container.style.width="".concat(size.width,"px");container.style.height="".concat(size.height,"px");}
toggleHidden(current,true);toggleHidden(target,false);controls.focusFirstMenuItem.call(this,target,tabFocus);},setDownloadUrl:function setDownloadUrl(){var button=this.elements.buttons.download;if(!is$1.element(button)){return;}
button.setAttribute('href',this.download);},create:function create(data){var _this10=this;var bindMenuItemShortcuts=controls.bindMenuItemShortcuts,createButton=controls.createButton,createProgress=controls.createProgress,createRange=controls.createRange,createTime=controls.createTime,setQualityMenu=controls.setQualityMenu,setSpeedMenu=controls.setSpeedMenu,showMenuPanel=controls.showMenuPanel;this.elements.controls=null;if(this.config.controls.includes('play-large')){this.elements.container.appendChild(createButton.call(this,'play-large'));}
var container=createElement('div',getAttributesFromSelector(this.config.selectors.controls.wrapper));this.elements.controls=container;var defaultAttributes={class:'plyr__controls__item'};dedupe(this.config.controls).forEach(function(control){if(control==='restart'){container.appendChild(createButton.call(_this10,'restart',defaultAttributes));}
if(control==='rewind'){container.appendChild(createButton.call(_this10,'rewind',defaultAttributes));}
if(control==='play'){container.appendChild(createButton.call(_this10,'play',defaultAttributes));}
if(control==='fast-forward'){container.appendChild(createButton.call(_this10,'fast-forward',defaultAttributes));}
if(control==='progress'){var progressContainer=createElement('div',{class:"".concat(defaultAttributes.class," plyr__progress__container")});var progress=createElement('div',getAttributesFromSelector(_this10.config.selectors.progress));progress.appendChild(createRange.call(_this10,'seek',{id:"plyr-seek-".concat(data.id)}));progress.appendChild(createProgress.call(_this10,'buffer'));if(_this10.config.tooltips.seek){var tooltip=createElement('span',{class:_this10.config.classNames.tooltip},'00:00');progress.appendChild(tooltip);_this10.elements.display.seekTooltip=tooltip;}
_this10.elements.progress=progress;progressContainer.appendChild(_this10.elements.progress);container.appendChild(progressContainer);}
if(control==='current-time'){container.appendChild(createTime.call(_this10,'currentTime',defaultAttributes));}
if(control==='duration'){container.appendChild(createTime.call(_this10,'duration',defaultAttributes));}
if(control==='mute'||control==='volume'){var volume=_this10.elements.volume;if(!is$1.element(volume)||!container.contains(volume)){volume=createElement('div',extend({},defaultAttributes,{class:"".concat(defaultAttributes.class," plyr__volume").trim()}));_this10.elements.volume=volume;container.appendChild(volume);}
if(control==='mute'){volume.appendChild(createButton.call(_this10,'mute'));}
if(control==='volume'&&!browser.isIos){var attributes={max:1,step:0.05,value:_this10.config.volume};volume.appendChild(createRange.call(_this10,'volume',extend(attributes,{id:"plyr-volume-".concat(data.id)})));}}
if(control==='captions'){container.appendChild(createButton.call(_this10,'captions',defaultAttributes));}
if(control==='settings'&&!is$1.empty(_this10.config.settings)){var wrapper=createElement('div',extend({},defaultAttributes,{class:"".concat(defaultAttributes.class," plyr__menu").trim(),hidden:''}));wrapper.appendChild(createButton.call(_this10,'settings',{'aria-haspopup':true,'aria-controls':"plyr-settings-".concat(data.id),'aria-expanded':false}));var popup=createElement('div',{class:'plyr__menu__container',id:"plyr-settings-".concat(data.id),hidden:''});var inner=createElement('div');var home=createElement('div',{id:"plyr-settings-".concat(data.id,"-home")});var menu=createElement('div',{role:'menu'});home.appendChild(menu);inner.appendChild(home);_this10.elements.settings.panels.home=home;_this10.config.settings.forEach(function(type){var menuItem=createElement('button',extend(getAttributesFromSelector(_this10.config.selectors.buttons.settings),{type:'button',class:"".concat(_this10.config.classNames.control," ").concat(_this10.config.classNames.control,"--forward"),role:'menuitem','aria-haspopup':true,hidden:''}));bindMenuItemShortcuts.call(_this10,menuItem,type);on.call(_this10,menuItem,'click',function(){showMenuPanel.call(_this10,type,false);});var flex=createElement('span',null,i18n.get(type,_this10.config));var value=createElement('span',{class:_this10.config.classNames.menu.value});value.innerHTML=data[type];flex.appendChild(value);menuItem.appendChild(flex);menu.appendChild(menuItem);var pane=createElement('div',{id:"plyr-settings-".concat(data.id,"-").concat(type),hidden:''});var backButton=createElement('button',{type:'button',class:"".concat(_this10.config.classNames.control," ").concat(_this10.config.classNames.control,"--back")});backButton.appendChild(createElement('span',{'aria-hidden':true},i18n.get(type,_this10.config)));backButton.appendChild(createElement('span',{class:_this10.config.classNames.hidden},i18n.get('menuBack',_this10.config)));on.call(_this10,pane,'keydown',function(event){if(event.which!==37){return;}
event.preventDefault();event.stopPropagation();showMenuPanel.call(_this10,'home',true);},false);on.call(_this10,backButton,'click',function(){showMenuPanel.call(_this10,'home',false);});pane.appendChild(backButton);pane.appendChild(createElement('div',{role:'menu'}));inner.appendChild(pane);_this10.elements.settings.buttons[type]=menuItem;_this10.elements.settings.panels[type]=pane;});popup.appendChild(inner);wrapper.appendChild(popup);container.appendChild(wrapper);_this10.elements.settings.popup=popup;_this10.elements.settings.menu=wrapper;}
if(control==='pip'&&support.pip){container.appendChild(createButton.call(_this10,'pip',defaultAttributes));}
if(control==='airplay'&&support.airplay){container.appendChild(createButton.call(_this10,'airplay',defaultAttributes));}
if(control==='download'){var _attributes=extend({},defaultAttributes,{element:'a',href:_this10.download,target:'_blank'});if(_this10.isHTML5){_attributes.download='';}
var download=_this10.config.urls.download;if(!is$1.url(download)&&_this10.isEmbed){extend(_attributes,{icon:"logo-".concat(_this10.provider),label:_this10.provider});}
container.appendChild(createButton.call(_this10,'download',_attributes));}
if(control==='fullscreen'){container.appendChild(createButton.call(_this10,'fullscreen',defaultAttributes));}});if(this.isHTML5){setQualityMenu.call(this,html5.getQualityOptions.call(this));}
setSpeedMenu.call(this);return container;},inject:function inject(){var _this11=this;if(this.config.loadSprite){var icon=controls.getIconUrl.call(this);if(icon.cors){loadSprite(icon.url,'sprite-plyr');}}
this.id=Math.floor(Math.random()*10000);var container=null;this.elements.controls=null;var props={id:this.id,seektime:this.config.seekTime,title:this.config.title};var update=true;if(is$1.function(this.config.controls)){this.config.controls=this.config.controls.call(this,props);}
if(!this.config.controls){this.config.controls=[];}
if(is$1.element(this.config.controls)||is$1.string(this.config.controls)){container=this.config.controls;}else{container=controls.create.call(this,{id:this.id,seektime:this.config.seekTime,speed:this.speed,quality:this.quality,captions:captions.getLabel.call(this)});update=false;}
var replace=function replace(input){var result=input;Object.entries(props).forEach(function(_ref2){var _ref3=_slicedToArray(_ref2,2),key=_ref3[0],value=_ref3[1];result=replaceAll(result,"{".concat(key,"}"),value);});return result;};if(update){if(is$1.string(this.config.controls)){container=replace(container);}else if(is$1.element(container)){container.innerHTML=replace(container.innerHTML);}}
var target;if(is$1.string(this.config.selectors.controls.container)){target=document.querySelector(this.config.selectors.controls.container);}
if(!is$1.element(target)){target=this.elements.container;}
var insertMethod=is$1.element(container)?'insertAdjacentElement':'insertAdjacentHTML';target[insertMethod]('afterbegin',container);if(!is$1.element(this.elements.controls)){controls.findElements.call(this);}
if(!is$1.empty(this.elements.buttons)){var addProperty=function addProperty(button){var className=_this11.config.classNames.controlPressed;Object.defineProperty(button,'pressed',{enumerable:true,get:function get(){return hasClass(button,className);},set:function set(){var pressed=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;toggleClass(button,className,pressed);}});};Object.values(this.elements.buttons).filter(Boolean).forEach(function(button){if(is$1.array(button)||is$1.nodeList(button)){Array.from(button).filter(Boolean).forEach(addProperty);}else{addProperty(button);}});}
if(browser.isEdge){repaint(target);}
if(this.config.tooltips.controls){var _this$config=this.config,classNames=_this$config.classNames,selectors=_this$config.selectors;var selector="".concat(selectors.controls.wrapper," ").concat(selectors.labels," .").concat(classNames.hidden);var labels=getElements.call(this,selector);Array.from(labels).forEach(function(label){toggleClass(label,_this11.config.classNames.hidden,false);toggleClass(label,_this11.config.classNames.tooltip,true);});}}};function parseUrl(input){var safe=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var url=input;if(safe){var parser=document.createElement('a');parser.href=url;url=parser.href;}
try{return new URL(url);}catch(e){return null;}}
function buildUrlParams(input){var params=new URLSearchParams();if(is$1.object(input)){Object.entries(input).forEach(function(_ref){var _ref2=_slicedToArray(_ref,2),key=_ref2[0],value=_ref2[1];params.set(key,value);});}
return params;}
var captions={setup:function setup(){if(!this.supported.ui){return;}
if(!this.isVideo||this.isYouTube||this.isHTML5&&!support.textTracks){if(is$1.array(this.config.controls)&&this.config.controls.includes('settings')&&this.config.settings.includes('captions')){controls.setCaptionsMenu.call(this);}
return;}
if(!is$1.element(this.elements.captions)){this.elements.captions=createElement('div',getAttributesFromSelector(this.config.selectors.captions));insertAfter(this.elements.captions,this.elements.wrapper);}
if(browser.isIE&&window.URL){var elements=this.media.querySelectorAll('track');Array.from(elements).forEach(function(track){var src=track.getAttribute('src');var url=parseUrl(src);if(url!==null&&url.hostname!==window.location.href.hostname&&['http:','https:'].includes(url.protocol)){fetch(src,'blob').then(function(blob){track.setAttribute('src',window.URL.createObjectURL(blob));}).catch(function(){removeElement(track);});}});}
var browserLanguages=navigator.languages||[navigator.language||navigator.userLanguage||'en'];var languages=dedupe(browserLanguages.map(function(language){return language.split('-')[0];}));var language=(this.storage.get('language')||this.config.captions.language||'auto').toLowerCase();if(language==='auto'){var _languages=_slicedToArray(languages,1);language=_languages[0];}
var active=this.storage.get('captions');if(!is$1.boolean(active)){active=this.config.captions.active;}
Object.assign(this.captions,{toggled:false,active:active,language:language,languages:languages});if(this.isHTML5){var trackEvents=this.config.captions.update?'addtrack removetrack':'removetrack';on.call(this,this.media.textTracks,trackEvents,captions.update.bind(this));}
setTimeout(captions.update.bind(this),0);},update:function update(){var _this=this;var tracks=captions.getTracks.call(this,true);var _this$captions=this.captions,active=_this$captions.active,language=_this$captions.language,meta=_this$captions.meta,currentTrackNode=_this$captions.currentTrackNode;var languageExists=Boolean(tracks.find(function(track){return track.language===language;}));if(this.isHTML5&&this.isVideo){tracks.filter(function(track){return!meta.get(track);}).forEach(function(track){_this.debug.log('Track added',track);meta.set(track,{default:track.mode==='showing'});track.mode='hidden';on.call(_this,track,'cuechange',function(){return captions.updateCues.call(_this);});});}
if(languageExists&&this.language!==language||!tracks.includes(currentTrackNode)){captions.setLanguage.call(this,language);captions.toggle.call(this,active&&languageExists);}
toggleClass(this.elements.container,this.config.classNames.captions.enabled,!is$1.empty(tracks));if((this.config.controls||[]).includes('settings')&&this.config.settings.includes('captions')){controls.setCaptionsMenu.call(this);}},toggle:function toggle(input){var passive=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;if(!this.supported.ui){return;}
var toggled=this.captions.toggled;var activeClass=this.config.classNames.captions.active;var active=is$1.nullOrUndefined(input)?!toggled:input;if(active!==toggled){if(!passive){this.captions.active=active;this.storage.set({captions:active});}
if(!this.language&&active&&!passive){var tracks=captions.getTracks.call(this);var track=captions.findTrack.call(this,[this.captions.language].concat(_toConsumableArray(this.captions.languages)),true);this.captions.language=track.language;captions.set.call(this,tracks.indexOf(track));return;}
if(this.elements.buttons.captions){this.elements.buttons.captions.pressed=active;}
toggleClass(this.elements.container,activeClass,active);this.captions.toggled=active;controls.updateSetting.call(this,'captions');triggerEvent.call(this,this.media,active?'captionsenabled':'captionsdisabled');}},set:function set(index){var passive=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var tracks=captions.getTracks.call(this);if(index===-1){captions.toggle.call(this,false,passive);return;}
if(!is$1.number(index)){this.debug.warn('Invalid caption argument',index);return;}
if(!(index in tracks)){this.debug.warn('Track not found',index);return;}
if(this.captions.currentTrack!==index){this.captions.currentTrack=index;var track=tracks[index];var _ref=track||{},language=_ref.language;this.captions.currentTrackNode=track;controls.updateSetting.call(this,'captions');if(!passive){this.captions.language=language;this.storage.set({language:language});}
if(this.isVimeo){this.embed.enableTextTrack(language);}
triggerEvent.call(this,this.media,'languagechange');}
captions.toggle.call(this,true,passive);if(this.isHTML5&&this.isVideo){captions.updateCues.call(this);}},setLanguage:function setLanguage(input){var passive=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;if(!is$1.string(input)){this.debug.warn('Invalid language argument',input);return;}
var language=input.toLowerCase();this.captions.language=language;var tracks=captions.getTracks.call(this);var track=captions.findTrack.call(this,[language]);captions.set.call(this,tracks.indexOf(track),passive);},getTracks:function getTracks(){var _this2=this;var update=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var tracks=Array.from((this.media||{}).textTracks||[]);return tracks.filter(function(track){return!_this2.isHTML5||update||_this2.captions.meta.has(track);}).filter(function(track){return['captions','subtitles'].includes(track.kind);});},findTrack:function findTrack(languages){var _this3=this;var force=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var tracks=captions.getTracks.call(this);var sortIsDefault=function sortIsDefault(track){return Number((_this3.captions.meta.get(track)||{}).default);};var sorted=Array.from(tracks).sort(function(a,b){return sortIsDefault(b)-sortIsDefault(a);});var track;languages.every(function(language){track=sorted.find(function(t){return t.language===language;});return!track;});return track||(force?sorted[0]:undefined);},getCurrentTrack:function getCurrentTrack(){return captions.getTracks.call(this)[this.currentTrack];},getLabel:function getLabel(track){var currentTrack=track;if(!is$1.track(currentTrack)&&support.textTracks&&this.captions.toggled){currentTrack=captions.getCurrentTrack.call(this);}
if(is$1.track(currentTrack)){if(!is$1.empty(currentTrack.label)){return currentTrack.label;}
if(!is$1.empty(currentTrack.language)){return track.language.toUpperCase();}
return i18n.get('enabled',this.config);}
return i18n.get('disabled',this.config);},updateCues:function updateCues(input){if(!this.supported.ui){return;}
if(!is$1.element(this.elements.captions)){this.debug.warn('No captions element to render to');return;}
if(!is$1.nullOrUndefined(input)&&!Array.isArray(input)){this.debug.warn('updateCues: Invalid input',input);return;}
var cues=input;if(!cues){var track=captions.getCurrentTrack.call(this);cues=Array.from((track||{}).activeCues||[]).map(function(cue){return cue.getCueAsHTML();}).map(getHTML);}
var content=cues.map(function(cueText){return cueText.trim();}).join('\n');var changed=content!==this.elements.captions.innerHTML;if(changed){emptyElement(this.elements.captions);var caption=createElement('span',getAttributesFromSelector(this.config.selectors.caption));caption.innerHTML=content;this.elements.captions.appendChild(caption);triggerEvent.call(this,this.media,'cuechange');}}};var defaults$1={enabled:true,title:'',debug:false,autoplay:false,autopause:true,playsinline:true,seekTime:10,volume:1,muted:false,duration:null,displayDuration:true,invertTime:true,toggleInvert:true,ratio:null,clickToPlay:true,hideControls:true,resetOnEnd:false,disableContextMenu:true,loadSprite:true,iconPrefix:'plyr',iconUrl:'https://cdn.plyr.io/3.5.10/plyr.svg',blankVideo:'https://cdn.plyr.io/static/blank.mp4',quality:{default:576,options:[4320,2880,2160,1440,1080,720,576,480,360,240],forced:false,onChange:null},loop:{active:false},speed:{selected:1,options:[0.5,0.75,1,1.25,1.5,1.75,2,4]},keyboard:{focused:true,global:false},tooltips:{controls:false,seek:true},captions:{active:false,language:'auto',update:false},fullscreen:{enabled:true,fallback:true,iosNative:false},storage:{enabled:true,key:'plyr'},controls:['play-large','play','progress','current-time','mute','volume','captions','settings','pip','airplay','fullscreen'],settings:['captions','quality','speed'],i18n:{restart:'Restart',rewind:'Rewind {seektime}s',play:'Play',pause:'Pause',fastForward:'Forward {seektime}s',seek:'Seek',seekLabel:'{currentTime} of {duration}',played:'Played',buffered:'Buffered',currentTime:'Current time',duration:'Duration',volume:'Volume',mute:'Mute',unmute:'Unmute',enableCaptions:'Enable captions',disableCaptions:'Disable captions',download:'Download',enterFullscreen:'Enter fullscreen',exitFullscreen:'Exit fullscreen',frameTitle:'Player for {title}',captions:'Captions',settings:'Settings',pip:'PIP',menuBack:'Go back to previous menu',speed:'Speed',normal:'Normal',quality:'Quality',loop:'Loop',start:'Start',end:'End',all:'All',reset:'Reset',disabled:'Disabled',enabled:'Enabled',advertisement:'Ad',qualityBadge:{2160:'4K',1440:'HD',1080:'HD',720:'HD',576:'SD',480:'SD'}},urls:{download:null,vimeo:{sdk:'https://player.vimeo.com/api/player.js',iframe:'https://player.vimeo.com/video/{0}?{1}',api:'https://vimeo.com/api/v2/video/{0}.json'},youtube:{sdk:'https://www.youtube.com/iframe_api',api:'https://noembed.com/embed?url=https://www.youtube.com/watch?v={0}'},googleIMA:{sdk:'https://imasdk.googleapis.com/js/sdkloader/ima3.js'}},listeners:{seek:null,play:null,pause:null,restart:null,rewind:null,fastForward:null,mute:null,volume:null,captions:null,download:null,fullscreen:null,pip:null,airplay:null,speed:null,quality:null,loop:null,language:null},events:['ended','progress','stalled','playing','waiting','canplay','canplaythrough','loadstart','loadeddata','loadedmetadata','timeupdate','volumechange','play','pause','error','seeking','seeked','emptied','ratechange','cuechange','download','enterfullscreen','exitfullscreen','captionsenabled','captionsdisabled','languagechange','controlshidden','controlsshown','ready','statechange','qualitychange','adsloaded','adscontentpause','adscontentresume','adstarted','adsmidpoint','adscomplete','adsallcomplete','adsimpression','adsclick'],selectors:{editable:'input, textarea, select, [contenteditable]',container:'.plyr',controls:{container:null,wrapper:'.plyr__controls'},labels:'[data-plyr]',buttons:{play:'[data-plyr="play"]',pause:'[data-plyr="pause"]',restart:'[data-plyr="restart"]',rewind:'[data-plyr="rewind"]',fastForward:'[data-plyr="fast-forward"]',mute:'[data-plyr="mute"]',captions:'[data-plyr="captions"]',download:'[data-plyr="download"]',fullscreen:'[data-plyr="fullscreen"]',pip:'[data-plyr="pip"]',airplay:'[data-plyr="airplay"]',settings:'[data-plyr="settings"]',loop:'[data-plyr="loop"]'},inputs:{seek:'[data-plyr="seek"]',volume:'[data-plyr="volume"]',speed:'[data-plyr="speed"]',language:'[data-plyr="language"]',quality:'[data-plyr="quality"]'},display:{currentTime:'.plyr__time--current',duration:'.plyr__time--duration',buffer:'.plyr__progress__buffer',loop:'.plyr__progress__loop',volume:'.plyr__volume--display'},progress:'.plyr__progress',captions:'.plyr__captions',caption:'.plyr__caption'},classNames:{type:'plyr--{0}',provider:'plyr--{0}',video:'plyr__video-wrapper',embed:'plyr__video-embed',videoFixedRatio:'plyr__video-wrapper--fixed-ratio',embedContainer:'plyr__video-embed__container',poster:'plyr__poster',posterEnabled:'plyr__poster-enabled',ads:'plyr__ads',control:'plyr__control',controlPressed:'plyr__control--pressed',playing:'plyr--playing',paused:'plyr--paused',stopped:'plyr--stopped',loading:'plyr--loading',hover:'plyr--hover',tooltip:'plyr__tooltip',cues:'plyr__cues',hidden:'plyr__sr-only',hideControls:'plyr--hide-controls',isIos:'plyr--is-ios',isTouch:'plyr--is-touch',uiSupported:'plyr--full-ui',noTransition:'plyr--no-transition',display:{time:'plyr__time'},menu:{value:'plyr__menu__value',badge:'plyr__badge',open:'plyr--menu-open'},captions:{enabled:'plyr--captions-enabled',active:'plyr--captions-active'},fullscreen:{enabled:'plyr--fullscreen-enabled',fallback:'plyr--fullscreen-fallback'},pip:{supported:'plyr--pip-supported',active:'plyr--pip-active'},airplay:{supported:'plyr--airplay-supported',active:'plyr--airplay-active'},tabFocus:'plyr__tab-focus',previewThumbnails:{thumbContainer:'plyr__preview-thumb',thumbContainerShown:'plyr__preview-thumb--is-shown',imageContainer:'plyr__preview-thumb__image-container',timeContainer:'plyr__preview-thumb__time-container',scrubbingContainer:'plyr__preview-scrubbing',scrubbingContainerShown:'plyr__preview-scrubbing--is-shown'}},attributes:{embed:{provider:'data-plyr-provider',id:'data-plyr-embed-id'}},ads:{enabled:false,publisherId:'',tagUrl:''},previewThumbnails:{enabled:false,src:''},vimeo:{byline:false,portrait:false,title:false,speed:true,transparent:false,sidedock:false,controls:false,referrerPolicy:null},youtube:{noCookie:false,rel:0,showinfo:0,iv_load_policy:3,modestbranding:1}};var pip={active:'picture-in-picture',inactive:'inline'};var providers={html5:'html5',youtube:'youtube',vimeo:'vimeo'};var types={audio:'audio',video:'video'};function getProviderByUrl(url){if(/^(https?:\/\/)?(www\.)?(youtube\.com|youtube-nocookie\.com|youtu\.?be)\/.+$/.test(url)){return providers.youtube;}
if(/^https?:\/\/player.vimeo.com\/video\/\d{0,9}(?=\b|\/)/.test(url)){return providers.vimeo;}
return null;}
var noop=function noop(){};var Console=function(){function Console(){var enabled=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;_classCallCheck(this,Console);this.enabled=window.console&&enabled;if(this.enabled){this.log('Debugging enabled');}}
_createClass(Console,[{key:"log",get:function get(){return this.enabled?Function.prototype.bind.call(console.log,console):noop;}},{key:"warn",get:function get(){return this.enabled?Function.prototype.bind.call(console.warn,console):noop;}},{key:"error",get:function get(){return this.enabled?Function.prototype.bind.call(console.error,console):noop;}}]);return Console;}();var Fullscreen=function(){function Fullscreen(player){var _this=this;_classCallCheck(this,Fullscreen);this.player=player;this.prefix=Fullscreen.prefix;this.property=Fullscreen.property;this.scrollPosition={x:0,y:0};this.forceFallback=player.config.fullscreen.fallback==='force';on.call(this.player,document,this.prefix==='ms'?'MSFullscreenChange':"".concat(this.prefix,"fullscreenchange"),function(){_this.onChange();});on.call(this.player,this.player.elements.container,'dblclick',function(event){if(is$1.element(_this.player.elements.controls)&&_this.player.elements.controls.contains(event.target)){return;}
_this.toggle();});on.call(this,this.player.elements.container,'keydown',function(event){return _this.trapFocus(event);});this.update();}
_createClass(Fullscreen,[{key:"onChange",value:function onChange(){if(!this.enabled){return;}
var button=this.player.elements.buttons.fullscreen;if(is$1.element(button)){button.pressed=this.active;}
triggerEvent.call(this.player,this.target,this.active?'enterfullscreen':'exitfullscreen',true);}},{key:"toggleFallback",value:function toggleFallback(){var toggle=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(toggle){this.scrollPosition={x:window.scrollX||0,y:window.scrollY||0};}else{window.scrollTo(this.scrollPosition.x,this.scrollPosition.y);}
document.body.style.overflow=toggle?'hidden':'';toggleClass(this.target,this.player.config.classNames.fullscreen.fallback,toggle);if(browser.isIos){var viewport=document.head.querySelector('meta[name="viewport"]');var property='viewport-fit=cover';if(!viewport){viewport=document.createElement('meta');viewport.setAttribute('name','viewport');}
var hasProperty=is$1.string(viewport.content)&&viewport.content.includes(property);if(toggle){this.cleanupViewport=!hasProperty;if(!hasProperty){viewport.content+=",".concat(property);}}else if(this.cleanupViewport){viewport.content=viewport.content.split(',').filter(function(part){return part.trim()!==property;}).join(',');}}
this.onChange();}},{key:"trapFocus",value:function trapFocus(event){if(browser.isIos||!this.active||event.key!=='Tab'||event.keyCode!==9){return;}
var focused=document.activeElement;var focusable=getElements.call(this.player,'a[href], button:not(:disabled), input:not(:disabled), [tabindex]');var _focusable=_slicedToArray(focusable,1),first=_focusable[0];var last=focusable[focusable.length-1];if(focused===last&&!event.shiftKey){first.focus();event.preventDefault();}else if(focused===first&&event.shiftKey){last.focus();event.preventDefault();}}},{key:"update",value:function update(){if(this.enabled){var mode;if(this.forceFallback){mode='Fallback (forced)';}else if(Fullscreen.native){mode='Native';}else{mode='Fallback';}
this.player.debug.log("".concat(mode," fullscreen enabled"));}else{this.player.debug.log('Fullscreen not supported and fallback disabled');}
toggleClass(this.player.elements.container,this.player.config.classNames.fullscreen.enabled,this.enabled);}},{key:"enter",value:function enter(){if(!this.enabled){return;}
if(browser.isIos&&this.player.config.fullscreen.iosNative){this.target.webkitEnterFullscreen();}else if(!Fullscreen.native||this.forceFallback){this.toggleFallback(true);}else if(!this.prefix){this.target.requestFullscreen({navigationUI:'hide'});}else if(!is$1.empty(this.prefix)){this.target["".concat(this.prefix,"Request").concat(this.property)]();}}},{key:"exit",value:function exit(){if(!this.enabled){return;}
if(browser.isIos&&this.player.config.fullscreen.iosNative){this.target.webkitExitFullscreen();this.player.play();}else if(!Fullscreen.native||this.forceFallback){this.toggleFallback(false);}else if(!this.prefix){(document.cancelFullScreen||document.exitFullscreen).call(document);}else if(!is$1.empty(this.prefix)){var action=this.prefix==='moz'?'Cancel':'Exit';document["".concat(this.prefix).concat(action).concat(this.property)]();}}},{key:"toggle",value:function toggle(){if(!this.active){this.enter();}else{this.exit();}}},{key:"usingNative",get:function get(){return Fullscreen.native&&!this.forceFallback;}},{key:"enabled",get:function get(){return(Fullscreen.native||this.player.config.fullscreen.fallback)&&this.player.config.fullscreen.enabled&&this.player.supported.ui&&this.player.isVideo;}},{key:"active",get:function get(){if(!this.enabled){return false;}
if(!Fullscreen.native||this.forceFallback){return hasClass(this.target,this.player.config.classNames.fullscreen.fallback);}
var element=!this.prefix?document.fullscreenElement:document["".concat(this.prefix).concat(this.property,"Element")];return element===this.target;}},{key:"target",get:function get(){return browser.isIos&&this.player.config.fullscreen.iosNative?this.player.media:this.player.elements.container;}}],[{key:"native",get:function get(){return!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled);}},{key:"prefix",get:function get(){if(is$1.function(document.exitFullscreen)){return '';}
var value='';var prefixes=['webkit','moz','ms'];prefixes.some(function(pre){if(is$1.function(document["".concat(pre,"ExitFullscreen")])||is$1.function(document["".concat(pre,"CancelFullScreen")])){value=pre;return true;}
return false;});return value;}},{key:"property",get:function get(){return this.prefix==='moz'?'FullScreen':'Fullscreen';}}]);return Fullscreen;}();var mathSign=Math.sign||function sign(x){return(x=+x)==0||x!=x?x:x<0?-1:1;};_export({target:'Math',stat:true},{sign:mathSign});function loadImage(src){var minWidth=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;return new Promise(function(resolve,reject){var image=new Image();var handler=function handler(){delete image.onload;delete image.onerror;(image.naturalWidth>=minWidth?resolve:reject)(image);};Object.assign(image,{onload:handler,onerror:handler,src:src});});}
var ui={addStyleHook:function addStyleHook(){toggleClass(this.elements.container,this.config.selectors.container.replace('.',''),true);toggleClass(this.elements.container,this.config.classNames.uiSupported,this.supported.ui);},toggleNativeControls:function toggleNativeControls(){var toggle=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(toggle&&this.isHTML5){this.media.setAttribute('controls','');}else{this.media.removeAttribute('controls');}},build:function build(){var _this=this;this.listeners.media();if(!this.supported.ui){this.debug.warn("Basic support only for ".concat(this.provider," ").concat(this.type));ui.toggleNativeControls.call(this,true);return;}
if(!is$1.element(this.elements.controls)){controls.inject.call(this);this.listeners.controls();}
ui.toggleNativeControls.call(this);if(this.isHTML5){captions.setup.call(this);}
this.volume=null;this.muted=null;this.loop=null;this.quality=null;this.speed=null;controls.updateVolume.call(this);controls.timeUpdate.call(this);ui.checkPlaying.call(this);toggleClass(this.elements.container,this.config.classNames.pip.supported,support.pip&&this.isHTML5&&this.isVideo);toggleClass(this.elements.container,this.config.classNames.airplay.supported,support.airplay&&this.isHTML5);toggleClass(this.elements.container,this.config.classNames.isIos,browser.isIos);toggleClass(this.elements.container,this.config.classNames.isTouch,this.touch);this.ready=true;setTimeout(function(){triggerEvent.call(_this,_this.media,'ready');},0);ui.setTitle.call(this);if(this.poster){ui.setPoster.call(this,this.poster,false).catch(function(){});}
if(this.config.duration){controls.durationUpdate.call(this);}},setTitle:function setTitle(){var label=i18n.get('play',this.config);if(is$1.string(this.config.title)&&!is$1.empty(this.config.title)){label+=", ".concat(this.config.title);}
Array.from(this.elements.buttons.play||[]).forEach(function(button){button.setAttribute('aria-label',label);});if(this.isEmbed){var iframe=getElement.call(this,'iframe');if(!is$1.element(iframe)){return;}
var title=!is$1.empty(this.config.title)?this.config.title:'video';var format=i18n.get('frameTitle',this.config);iframe.setAttribute('title',format.replace('{title}',title));}},togglePoster:function togglePoster(enable){toggleClass(this.elements.container,this.config.classNames.posterEnabled,enable);},setPoster:function setPoster(poster){var _this2=this;var passive=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;if(passive&&this.poster){return Promise.reject(new Error('Poster already set'));}
this.media.setAttribute('poster',poster);if(this.isHTML5){return Promise.resolve(poster);}
return ready.call(this).then(function(){return loadImage(poster);}).catch(function(err){if(poster===_this2.poster){ui.togglePoster.call(_this2,false);}
throw err;}).then(function(){if(poster!==_this2.poster){throw new Error('setPoster cancelled by later call to setPoster');}}).then(function(){Object.assign(_this2.elements.poster.style,{backgroundImage:"url('".concat(poster,"')"),backgroundSize:''});ui.togglePoster.call(_this2,true);return poster;});},checkPlaying:function checkPlaying(event){var _this3=this;toggleClass(this.elements.container,this.config.classNames.playing,this.playing);toggleClass(this.elements.container,this.config.classNames.paused,this.paused);toggleClass(this.elements.container,this.config.classNames.stopped,this.stopped);Array.from(this.elements.buttons.play||[]).forEach(function(target){Object.assign(target,{pressed:_this3.playing});target.setAttribute('aria-label',i18n.get(_this3.playing?'pause':'play',_this3.config));});if(is$1.event(event)&&event.type==='timeupdate'){return;}
ui.toggleControls.call(this);},checkLoading:function checkLoading(event){var _this4=this;this.loading=['stalled','waiting'].includes(event.type);clearTimeout(this.timers.loading);this.timers.loading=setTimeout(function(){toggleClass(_this4.elements.container,_this4.config.classNames.loading,_this4.loading);ui.toggleControls.call(_this4);},this.loading?250:0);},toggleControls:function toggleControls(force){var controlsElement=this.elements.controls;if(controlsElement&&this.config.hideControls){var recentTouchSeek=this.touch&&this.lastSeekTime+2000>Date.now();this.toggleControls(Boolean(force||this.loading||this.paused||controlsElement.pressed||controlsElement.hover||recentTouchSeek));}}};var Listeners=function(){function Listeners(player){_classCallCheck(this,Listeners);this.player=player;this.lastKey=null;this.focusTimer=null;this.lastKeyDown=null;this.handleKey=this.handleKey.bind(this);this.toggleMenu=this.toggleMenu.bind(this);this.setTabFocus=this.setTabFocus.bind(this);this.firstTouch=this.firstTouch.bind(this);}
_createClass(Listeners,[{key:"handleKey",value:function handleKey(event){var player=this.player;var elements=player.elements;var code=event.keyCode?event.keyCode:event.which;var pressed=event.type==='keydown';var repeat=pressed&&code===this.lastKey;if(event.altKey||event.ctrlKey||event.metaKey||event.shiftKey){return;}
if(!is$1.number(code)){return;}
var seekByKey=function seekByKey(){player.currentTime=player.duration/10*(code-48);};if(pressed){var focused=document.activeElement;if(is$1.element(focused)){var editable=player.config.selectors.editable;var seek=elements.inputs.seek;if(focused!==seek&&matches$1(focused,editable)){return;}
if(event.which===32&&matches$1(focused,'button, [role^="menuitem"]')){return;}}
var preventDefault=[32,37,38,39,40,48,49,50,51,52,53,54,56,57,67,70,73,75,76,77,79];if(preventDefault.includes(code)){event.preventDefault();event.stopPropagation();}
switch(code){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:if(!repeat){seekByKey();}
break;case 32:case 75:if(!repeat){player.togglePlay();}
break;case 38:player.increaseVolume(0.1);break;case 40:player.decreaseVolume(0.1);break;case 77:if(!repeat){player.muted=!player.muted;}
break;case 39:player.forward();break;case 37:player.rewind();break;case 70:player.fullscreen.toggle();break;case 67:if(!repeat){player.toggleCaptions();}
break;case 76:player.loop=!player.loop;break;}
if(code===27&&!player.fullscreen.usingNative&&player.fullscreen.active){player.fullscreen.toggle();}
this.lastKey=code;}else{this.lastKey=null;}}},{key:"toggleMenu",value:function toggleMenu(event){controls.toggleMenu.call(this.player,event);}},{key:"firstTouch",value:function firstTouch(){var player=this.player;var elements=player.elements;player.touch=true;toggleClass(elements.container,player.config.classNames.isTouch,true);}},{key:"setTabFocus",value:function setTabFocus(event){var player=this.player;var elements=player.elements;clearTimeout(this.focusTimer);if(event.type==='keydown'&&event.which!==9){return;}
if(event.type==='keydown'){this.lastKeyDown=event.timeStamp;}
var removeCurrent=function removeCurrent(){var className=player.config.classNames.tabFocus;var current=getElements.call(player,".".concat(className));toggleClass(current,className,false);};var wasKeyDown=event.timeStamp-this.lastKeyDown<=20;if(event.type==='focus'&&!wasKeyDown){return;}
removeCurrent();this.focusTimer=setTimeout(function(){var focused=document.activeElement;if(!elements.container.contains(focused)){return;}
toggleClass(document.activeElement,player.config.classNames.tabFocus,true);},10);}},{key:"global",value:function global(){var toggle=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;var player=this.player;if(player.config.keyboard.global){toggleListener.call(player,window,'keydown keyup',this.handleKey,toggle,false);}
toggleListener.call(player,document.body,'click',this.toggleMenu,toggle);once.call(player,document.body,'touchstart',this.firstTouch);toggleListener.call(player,document.body,'keydown focus blur',this.setTabFocus,toggle,false,true);}},{key:"container",value:function container(){var player=this.player;var config=player.config,elements=player.elements,timers=player.timers;if(!config.keyboard.global&&config.keyboard.focused){on.call(player,elements.container,'keydown keyup',this.handleKey,false);}
on.call(player,elements.container,'mousemove mouseleave touchstart touchmove enterfullscreen exitfullscreen',function(event){var controlsElement=elements.controls;if(controlsElement&&event.type==='enterfullscreen'){controlsElement.pressed=false;controlsElement.hover=false;}
var show=['touchstart','touchmove','mousemove'].includes(event.type);var delay=0;if(show){ui.toggleControls.call(player,true);delay=player.touch?3000:2000;}
clearTimeout(timers.controls);timers.controls=setTimeout(function(){return ui.toggleControls.call(player,false);},delay);});var setGutter=function setGutter(ratio,padding,toggle){if(!player.isVimeo){return;}
var target=player.elements.wrapper.firstChild;var _ratio=_slicedToArray(ratio,2),y=_ratio[1];var _getAspectRatio$call=getAspectRatio.call(player),_getAspectRatio$call2=_slicedToArray(_getAspectRatio$call,2),videoX=_getAspectRatio$call2[0],videoY=_getAspectRatio$call2[1];target.style.maxWidth=toggle?"".concat(y/videoY*videoX,"px"):null;target.style.margin=toggle?'0 auto':null;};var setPlayerSize=function setPlayerSize(measure){if(!measure){return setAspectRatio.call(player);}
var rect=elements.container.getBoundingClientRect();var width=rect.width,height=rect.height;return setAspectRatio.call(player,"".concat(width,":").concat(height));};var resized=function resized(){clearTimeout(timers.resized);timers.resized=setTimeout(setPlayerSize,50);};on.call(player,elements.container,'enterfullscreen exitfullscreen',function(event){var _player$fullscreen=player.fullscreen,target=_player$fullscreen.target,usingNative=_player$fullscreen.usingNative;if(target!==elements.container){return;}
if(!player.isEmbed&&is$1.empty(player.config.ratio)){return;}
var isEnter=event.type==='enterfullscreen';var _setPlayerSize=setPlayerSize(isEnter),padding=_setPlayerSize.padding,ratio=_setPlayerSize.ratio;setGutter(ratio,padding,isEnter);if(!usingNative){if(isEnter){on.call(player,window,'resize',resized);}else{off.call(player,window,'resize',resized);}}});}},{key:"media",value:function media(){var _this=this;var player=this.player;var elements=player.elements;on.call(player,player.media,'timeupdate seeking seeked',function(event){return controls.timeUpdate.call(player,event);});on.call(player,player.media,'durationchange loadeddata loadedmetadata',function(event){return controls.durationUpdate.call(player,event);});on.call(player,player.media,'ended',function(){if(player.isHTML5&&player.isVideo&&player.config.resetOnEnd){player.restart();player.pause();}});on.call(player,player.media,'progress playing seeking seeked',function(event){return controls.updateProgress.call(player,event);});on.call(player,player.media,'volumechange',function(event){return controls.updateVolume.call(player,event);});on.call(player,player.media,'playing play pause ended emptied timeupdate',function(event){return ui.checkPlaying.call(player,event);});on.call(player,player.media,'waiting canplay seeked playing',function(event){return ui.checkLoading.call(player,event);});if(player.supported.ui&&player.config.clickToPlay&&!player.isAudio){var wrapper=getElement.call(player,".".concat(player.config.classNames.video));if(!is$1.element(wrapper)){return;}
on.call(player,elements.container,'click',function(event){var targets=[elements.container,wrapper];if(!targets.includes(event.target)&&!wrapper.contains(event.target)){return;}
if(player.touch&&player.config.hideControls){return;}
if(player.ended){_this.proxy(event,player.restart,'restart');_this.proxy(event,player.play,'play');}else{_this.proxy(event,player.togglePlay,'play');}});}
if(player.supported.ui&&player.config.disableContextMenu){on.call(player,elements.wrapper,'contextmenu',function(event){event.preventDefault();},false);}
on.call(player,player.media,'volumechange',function(){player.storage.set({volume:player.volume,muted:player.muted});});on.call(player,player.media,'ratechange',function(){controls.updateSetting.call(player,'speed');player.storage.set({speed:player.speed});});on.call(player,player.media,'qualitychange',function(event){controls.updateSetting.call(player,'quality',null,event.detail.quality);});on.call(player,player.media,'ready qualitychange',function(){controls.setDownloadUrl.call(player);});var proxyEvents=player.config.events.concat(['keyup','keydown']).join(' ');on.call(player,player.media,proxyEvents,function(event){var _event$detail=event.detail,detail=_event$detail===void 0?{}:_event$detail;if(event.type==='error'){detail=player.media.error;}
triggerEvent.call(player,elements.container,event.type,true,detail);});}},{key:"proxy",value:function proxy(event,defaultHandler,customHandlerKey){var player=this.player;var customHandler=player.config.listeners[customHandlerKey];var hasCustomHandler=is$1.function(customHandler);var returned=true;if(hasCustomHandler){returned=customHandler.call(player,event);}
if(returned!==false&&is$1.function(defaultHandler)){defaultHandler.call(player,event);}}},{key:"bind",value:function bind(element,type,defaultHandler,customHandlerKey){var _this2=this;var passive=arguments.length>4&&arguments[4]!==undefined?arguments[4]:true;var player=this.player;var customHandler=player.config.listeners[customHandlerKey];var hasCustomHandler=is$1.function(customHandler);on.call(player,element,type,function(event){return _this2.proxy(event,defaultHandler,customHandlerKey);},passive&&!hasCustomHandler);}},{key:"controls",value:function controls$1(){var _this3=this;var player=this.player;var elements=player.elements;var inputEvent=browser.isIE?'change':'input';if(elements.buttons.play){Array.from(elements.buttons.play).forEach(function(button){_this3.bind(button,'click',player.togglePlay,'play');});}
this.bind(elements.buttons.restart,'click',player.restart,'restart');this.bind(elements.buttons.rewind,'click',player.rewind,'rewind');this.bind(elements.buttons.fastForward,'click',player.forward,'fastForward');this.bind(elements.buttons.mute,'click',function(){player.muted=!player.muted;},'mute');this.bind(elements.buttons.captions,'click',function(){return player.toggleCaptions();});this.bind(elements.buttons.download,'click',function(){triggerEvent.call(player,player.media,'download');},'download');this.bind(elements.buttons.fullscreen,'click',function(){player.fullscreen.toggle();},'fullscreen');this.bind(elements.buttons.pip,'click',function(){player.pip='toggle';},'pip');this.bind(elements.buttons.airplay,'click',player.airplay,'airplay');this.bind(elements.buttons.settings,'click',function(event){event.stopPropagation();event.preventDefault();controls.toggleMenu.call(player,event);},null,false);this.bind(elements.buttons.settings,'keyup',function(event){var code=event.which;if(![13,32].includes(code)){return;}
if(code===13){controls.focusFirstMenuItem.call(player,null,true);return;}
event.preventDefault();event.stopPropagation();controls.toggleMenu.call(player,event);},null,false);this.bind(elements.settings.menu,'keydown',function(event){if(event.which===27){controls.toggleMenu.call(player,event);}});this.bind(elements.inputs.seek,'mousedown mousemove',function(event){var rect=elements.progress.getBoundingClientRect();var percent=100/rect.width*(event.pageX-rect.left);event.currentTarget.setAttribute('seek-value',percent);});this.bind(elements.inputs.seek,'mousedown mouseup keydown keyup touchstart touchend',function(event){var seek=event.currentTarget;var code=event.keyCode?event.keyCode:event.which;var attribute='play-on-seeked';if(is$1.keyboardEvent(event)&&code!==39&&code!==37){return;}
player.lastSeekTime=Date.now();var play=seek.hasAttribute(attribute);var done=['mouseup','touchend','keyup'].includes(event.type);if(play&&done){seek.removeAttribute(attribute);player.play();}else if(!done&&player.playing){seek.setAttribute(attribute,'');player.pause();}});if(browser.isIos){var inputs=getElements.call(player,'input[type="range"]');Array.from(inputs).forEach(function(input){return _this3.bind(input,inputEvent,function(event){return repaint(event.target);});});}
this.bind(elements.inputs.seek,inputEvent,function(event){var seek=event.currentTarget;var seekTo=seek.getAttribute('seek-value');if(is$1.empty(seekTo)){seekTo=seek.value;}
seek.removeAttribute('seek-value');player.currentTime=seekTo/seek.max*player.duration;},'seek');this.bind(elements.progress,'mouseenter mouseleave mousemove',function(event){return controls.updateSeekTooltip.call(player,event);});this.bind(elements.progress,'mousemove touchmove',function(event){var previewThumbnails=player.previewThumbnails;if(previewThumbnails&&previewThumbnails.loaded){previewThumbnails.startMove(event);}});this.bind(elements.progress,'mouseleave touchend click',function(){var previewThumbnails=player.previewThumbnails;if(previewThumbnails&&previewThumbnails.loaded){previewThumbnails.endMove(false,true);}});this.bind(elements.progress,'mousedown touchstart',function(event){var previewThumbnails=player.previewThumbnails;if(previewThumbnails&&previewThumbnails.loaded){previewThumbnails.startScrubbing(event);}});this.bind(elements.progress,'mouseup touchend',function(event){var previewThumbnails=player.previewThumbnails;if(previewThumbnails&&previewThumbnails.loaded){previewThumbnails.endScrubbing(event);}});if(browser.isWebkit){Array.from(getElements.call(player,'input[type="range"]')).forEach(function(element){_this3.bind(element,'input',function(event){return controls.updateRangeFill.call(player,event.target);});});}
if(player.config.toggleInvert&&!is$1.element(elements.display.duration)){this.bind(elements.display.currentTime,'click',function(){if(player.currentTime===0){return;}
player.config.invertTime=!player.config.invertTime;controls.timeUpdate.call(player);});}
this.bind(elements.inputs.volume,inputEvent,function(event){player.volume=event.target.value;},'volume');this.bind(elements.controls,'mouseenter mouseleave',function(event){elements.controls.hover=!player.touch&&event.type==='mouseenter';});this.bind(elements.controls,'mousedown mouseup touchstart touchend touchcancel',function(event){elements.controls.pressed=['mousedown','touchstart'].includes(event.type);});this.bind(elements.controls,'focusin',function(){var config=player.config,timers=player.timers;toggleClass(elements.controls,config.classNames.noTransition,true);ui.toggleControls.call(player,true);setTimeout(function(){toggleClass(elements.controls,config.classNames.noTransition,false);},0);var delay=_this3.touch?3000:4000;clearTimeout(timers.controls);timers.controls=setTimeout(function(){return ui.toggleControls.call(player,false);},delay);});this.bind(elements.inputs.volume,'wheel',function(event){var inverted=event.webkitDirectionInvertedFromDevice;var _map=[event.deltaX,-event.deltaY].map(function(value){return inverted?-value:value;}),_map2=_slicedToArray(_map,2),x=_map2[0],y=_map2[1];var direction=Math.sign(Math.abs(x)>Math.abs(y)?x:y);player.increaseVolume(direction/50);var volume=player.media.volume;if(direction===1&&volume<1||direction===-1&&volume>0){event.preventDefault();}},'volume',false);}}]);return Listeners;}();var HAS_SPECIES_SUPPORT$3=arrayMethodHasSpeciesSupport('splice');var USES_TO_LENGTH$a=arrayMethodUsesToLength('splice',{ACCESSORS:true,0:0,1:2});var max$3=Math.max;var min$5=Math.min;var MAX_SAFE_INTEGER$1=0x1FFFFFFFFFFFFF;var MAXIMUM_ALLOWED_LENGTH_EXCEEDED='Maximum allowed length exceeded';_export({target:'Array',proto:true,forced:!HAS_SPECIES_SUPPORT$3||!USES_TO_LENGTH$a},{splice:function splice(start,deleteCount){var O=toObject(this);var len=toLength(O.length);var actualStart=toAbsoluteIndex(start,len);var argumentsLength=arguments.length;var insertCount,actualDeleteCount,A,k,from,to;if(argumentsLength===0){insertCount=actualDeleteCount=0;}else if(argumentsLength===1){insertCount=0;actualDeleteCount=len-actualStart;}else{insertCount=argumentsLength-2;actualDeleteCount=min$5(max$3(toInteger(deleteCount),0),len-actualStart);}
if(len+insertCount-actualDeleteCount>MAX_SAFE_INTEGER$1){throw TypeError(MAXIMUM_ALLOWED_LENGTH_EXCEEDED);}
A=arraySpeciesCreate(O,actualDeleteCount);for(k=0;k<actualDeleteCount;k++){from=actualStart+k;if(from in O)createProperty(A,k,O[from]);}
A.length=actualDeleteCount;if(insertCount<actualDeleteCount){for(k=actualStart;k<len-actualDeleteCount;k++){from=k+actualDeleteCount;to=k+insertCount;if(from in O)O[to]=O[from];else delete O[to];}
for(k=len;k>len-actualDeleteCount+insertCount;k--)delete O[k-1];}else if(insertCount>actualDeleteCount){for(k=len-actualDeleteCount;k>actualStart;k--){from=k+actualDeleteCount-1;to=k+insertCount-1;if(from in O)O[to]=O[from];else delete O[to];}}
for(k=0;k<insertCount;k++){O[k+actualStart]=arguments[k+2];}
O.length=len-actualDeleteCount+insertCount;return A;}});var loadjs_umd=createCommonjsModule(function(module,exports){(function(root,factory){{module.exports=factory();}})(commonjsGlobal,function(){var devnull=function devnull(){},bundleIdCache={},bundleResultCache={},bundleCallbackQueue={};function subscribe(bundleIds,callbackFn){bundleIds=bundleIds.push?bundleIds:[bundleIds];var depsNotFound=[],i=bundleIds.length,numWaiting=i,fn,bundleId,r,q;fn=function fn(bundleId,pathsNotFound){if(pathsNotFound.length)depsNotFound.push(bundleId);numWaiting--;if(!numWaiting)callbackFn(depsNotFound);};while(i--){bundleId=bundleIds[i];r=bundleResultCache[bundleId];if(r){fn(bundleId,r);continue;}
q=bundleCallbackQueue[bundleId]=bundleCallbackQueue[bundleId]||[];q.push(fn);}}
function publish(bundleId,pathsNotFound){if(!bundleId)return;var q=bundleCallbackQueue[bundleId];bundleResultCache[bundleId]=pathsNotFound;if(!q)return;while(q.length){q[0](bundleId,pathsNotFound);q.splice(0,1);}}
function executeCallbacks(args,depsNotFound){if(args.call)args={success:args};if(depsNotFound.length)(args.error||devnull)(depsNotFound);else(args.success||devnull)(args);}
function loadFile(path,callbackFn,args,numTries){var doc=document,async=args.async,maxTries=(args.numRetries||0)+1,beforeCallbackFn=args.before||devnull,pathname=path.replace(/[\?|#].*$/,''),pathStripped=path.replace(/^(css|img)!/,''),isLegacyIECss,e;numTries=numTries||0;if(/(^css!|\.css$)/.test(pathname)){e=doc.createElement('link');e.rel='stylesheet';e.href=pathStripped;isLegacyIECss='hideFocus'in e;if(isLegacyIECss&&e.relList){isLegacyIECss=0;e.rel='preload';e.as='style';}}else if(/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(pathname)){e=doc.createElement('img');e.src=pathStripped;}else{e=doc.createElement('script');e.src=path;e.async=async===undefined?true:async;}
e.onload=e.onerror=e.onbeforeload=function(ev){var result=ev.type[0];if(isLegacyIECss){try{if(!e.sheet.cssText.length)result='e';}catch(x){if(x.code!=18)result='e';}}
if(result=='e'){numTries+=1;if(numTries<maxTries){return loadFile(path,callbackFn,args,numTries);}}else if(e.rel=='preload'&&e.as=='style'){return e.rel='stylesheet';}
callbackFn(path,result,ev.defaultPrevented);};if(beforeCallbackFn(path,e)!==false)doc.head.appendChild(e);}
function loadFiles(paths,callbackFn,args){paths=paths.push?paths:[paths];var numWaiting=paths.length,x=numWaiting,pathsNotFound=[],fn,i;fn=function fn(path,result,defaultPrevented){if(result=='e')pathsNotFound.push(path);if(result=='b'){if(defaultPrevented)pathsNotFound.push(path);else return;}
numWaiting--;if(!numWaiting)callbackFn(pathsNotFound);};for(i=0;i<x;i++){loadFile(paths[i],fn,args);}}
function loadjs(paths,arg1,arg2){var bundleId,args;if(arg1&&arg1.trim)bundleId=arg1;args=(bundleId?arg2:arg1)||{};if(bundleId){if(bundleId in bundleIdCache){throw "LoadJS";}else{bundleIdCache[bundleId]=true;}}
function loadFn(resolve,reject){loadFiles(paths,function(pathsNotFound){executeCallbacks(args,pathsNotFound);if(resolve){executeCallbacks({success:resolve,error:reject},pathsNotFound);}
publish(bundleId,pathsNotFound);},args);}
if(args.returnPromise)return new Promise(loadFn);else loadFn();}
loadjs.ready=function ready(deps,args){subscribe(deps,function(depsNotFound){executeCallbacks(args,depsNotFound);});return loadjs;};loadjs.done=function done(bundleId){publish(bundleId,[]);};loadjs.reset=function reset(){bundleIdCache={};bundleResultCache={};bundleCallbackQueue={};};loadjs.isDefined=function isDefined(bundleId){return bundleId in bundleIdCache;};return loadjs;});});function loadScript(url){return new Promise(function(resolve,reject){loadjs_umd(url,{success:resolve,error:reject});});}
function parseId(url){if(is$1.empty(url)){return null;}
if(is$1.number(Number(url))){return url;}
var regex=/^.*(vimeo.com\/|video\/)(\d+).*/;return url.match(regex)?RegExp.$2:url;}
function assurePlaybackState(play){if(play&&!this.embed.hasPlayed){this.embed.hasPlayed=true;}
if(this.media.paused===play){this.media.paused=!play;triggerEvent.call(this,this.media,play?'play':'pause');}}
var vimeo={setup:function setup(){var player=this;toggleClass(player.elements.wrapper,player.config.classNames.embed,true);player.options.speed=player.config.speed.options;setAspectRatio.call(player);if(!is$1.object(window.Vimeo)){loadScript(player.config.urls.vimeo.sdk).then(function(){vimeo.ready.call(player);}).catch(function(error){player.debug.warn('Vimeo SDK (player.js) failed to load',error);});}else{vimeo.ready.call(player);}},ready:function ready(){var _this=this;var player=this;var config=player.config.vimeo;var params=buildUrlParams(extend({},{loop:player.config.loop.active,autoplay:player.autoplay,muted:player.muted,gesture:'media',playsinline:!this.config.fullscreen.iosNative},config));var source=player.media.getAttribute('src');if(is$1.empty(source)){source=player.media.getAttribute(player.config.attributes.embed.id);}
var id=parseId(source);var iframe=createElement('iframe');var src=format(player.config.urls.vimeo.iframe,id,params);iframe.setAttribute('src',src);iframe.setAttribute('allowfullscreen','');iframe.setAttribute('allowtransparency','');iframe.setAttribute('allow','autoplay');if(!is$1.empty(config.referrerPolicy)){iframe.setAttribute('referrerPolicy',config.referrerPolicy);}
var poster=player.poster;var wrapper=createElement('div',{poster:poster,class:player.config.classNames.embedContainer});wrapper.appendChild(iframe);player.media=replaceElement(wrapper,player.media);fetch(format(player.config.urls.vimeo.api,id),'json').then(function(response){if(is$1.empty(response)){return;}
var url=new URL(response[0].thumbnail_large);url.pathname="".concat(url.pathname.split('_')[0],".jpg");ui.setPoster.call(player,url.href).catch(function(){});});player.embed=new window.Vimeo.Player(iframe,{autopause:player.config.autopause,muted:player.muted});player.media.paused=true;player.media.currentTime=0;if(player.supported.ui){player.embed.disableTextTrack();}
player.media.play=function(){assurePlaybackState.call(player,true);return player.embed.play();};player.media.pause=function(){assurePlaybackState.call(player,false);return player.embed.pause();};player.media.stop=function(){player.pause();player.currentTime=0;};var currentTime=player.media.currentTime;Object.defineProperty(player.media,'currentTime',{get:function get(){return currentTime;},set:function set(time){var embed=player.embed,media=player.media,paused=player.paused,volume=player.volume;var restorePause=paused&&!embed.hasPlayed;media.seeking=true;triggerEvent.call(player,media,'seeking');Promise.resolve(restorePause&&embed.setVolume(0)).then(function(){return embed.setCurrentTime(time);}).then(function(){return restorePause&&embed.pause();}).then(function(){return restorePause&&embed.setVolume(volume);}).catch(function(){});}});var speed=player.config.speed.selected;Object.defineProperty(player.media,'playbackRate',{get:function get(){return speed;},set:function set(input){player.embed.setPlaybackRate(input).then(function(){speed=input;triggerEvent.call(player,player.media,'ratechange');});}});var volume=player.config.volume;Object.defineProperty(player.media,'volume',{get:function get(){return volume;},set:function set(input){player.embed.setVolume(input).then(function(){volume=input;triggerEvent.call(player,player.media,'volumechange');});}});var muted=player.config.muted;Object.defineProperty(player.media,'muted',{get:function get(){return muted;},set:function set(input){var toggle=is$1.boolean(input)?input:false;player.embed.setVolume(toggle?0:player.config.volume).then(function(){muted=toggle;triggerEvent.call(player,player.media,'volumechange');});}});var loop=player.config.loop;Object.defineProperty(player.media,'loop',{get:function get(){return loop;},set:function set(input){var toggle=is$1.boolean(input)?input:player.config.loop.active;player.embed.setLoop(toggle).then(function(){loop=toggle;});}});var currentSrc;player.embed.getVideoUrl().then(function(value){currentSrc=value;controls.setDownloadUrl.call(player);}).catch(function(error){_this.debug.warn(error);});Object.defineProperty(player.media,'currentSrc',{get:function get(){return currentSrc;}});Object.defineProperty(player.media,'ended',{get:function get(){return player.currentTime===player.duration;}});Promise.all([player.embed.getVideoWidth(),player.embed.getVideoHeight()]).then(function(dimensions){var _dimensions=_slicedToArray(dimensions,2),width=_dimensions[0],height=_dimensions[1];player.embed.ratio=[width,height];setAspectRatio.call(_this);});player.embed.setAutopause(player.config.autopause).then(function(state){player.config.autopause=state;});player.embed.getVideoTitle().then(function(title){player.config.title=title;ui.setTitle.call(_this);});player.embed.getCurrentTime().then(function(value){currentTime=value;triggerEvent.call(player,player.media,'timeupdate');});player.embed.getDuration().then(function(value){player.media.duration=value;triggerEvent.call(player,player.media,'durationchange');});player.embed.getTextTracks().then(function(tracks){player.media.textTracks=tracks;captions.setup.call(player);});player.embed.on('cuechange',function(_ref){var _ref$cues=_ref.cues,cues=_ref$cues===void 0?[]:_ref$cues;var strippedCues=cues.map(function(cue){return stripHTML(cue.text);});captions.updateCues.call(player,strippedCues);});player.embed.on('loaded',function(){player.embed.getPaused().then(function(paused){assurePlaybackState.call(player,!paused);if(!paused){triggerEvent.call(player,player.media,'playing');}});if(is$1.element(player.embed.element)&&player.supported.ui){var frame=player.embed.element;frame.setAttribute('tabindex',-1);}});player.embed.on('bufferstart',function(){triggerEvent.call(player,player.media,'waiting');});player.embed.on('bufferend',function(){triggerEvent.call(player,player.media,'playing');});player.embed.on('play',function(){assurePlaybackState.call(player,true);triggerEvent.call(player,player.media,'playing');});player.embed.on('pause',function(){assurePlaybackState.call(player,false);});player.embed.on('timeupdate',function(data){player.media.seeking=false;currentTime=data.seconds;triggerEvent.call(player,player.media,'timeupdate');});player.embed.on('progress',function(data){player.media.buffered=data.percent;triggerEvent.call(player,player.media,'progress');if(parseInt(data.percent,10)===1){triggerEvent.call(player,player.media,'canplaythrough');}
player.embed.getDuration().then(function(value){if(value!==player.media.duration){player.media.duration=value;triggerEvent.call(player,player.media,'durationchange');}});});player.embed.on('seeked',function(){player.media.seeking=false;triggerEvent.call(player,player.media,'seeked');});player.embed.on('ended',function(){player.media.paused=true;triggerEvent.call(player,player.media,'ended');});player.embed.on('error',function(detail){player.media.error=detail;triggerEvent.call(player,player.media,'error');});setTimeout(function(){return ui.build.call(player);},0);}};function parseId$1(url){if(is$1.empty(url)){return null;}
var regex=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/;return url.match(regex)?RegExp.$2:url;}
function assurePlaybackState$1(play){if(play&&!this.embed.hasPlayed){this.embed.hasPlayed=true;}
if(this.media.paused===play){this.media.paused=!play;triggerEvent.call(this,this.media,play?'play':'pause');}}
function getHost$1(config){if(config.noCookie){return 'https://www.youtube-nocookie.com';}
if(window.location.protocol==='http:'){return 'http://www.youtube.com';}
return undefined;}
var youtube={setup:function setup(){var _this=this;toggleClass(this.elements.wrapper,this.config.classNames.embed,true);if(is$1.object(window.YT)&&is$1.function(window.YT.Player)){youtube.ready.call(this);}else{var callback=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=function(){if(is$1.function(callback)){callback();}
youtube.ready.call(_this);};loadScript(this.config.urls.youtube.sdk).catch(function(error){_this.debug.warn('YouTube API failed to load',error);});}},getTitle:function getTitle(videoId){var _this2=this;var url=format(this.config.urls.youtube.api,videoId);fetch(url).then(function(data){if(is$1.object(data)){var title=data.title,height=data.height,width=data.width;_this2.config.title=title;ui.setTitle.call(_this2);_this2.embed.ratio=[width,height];}
setAspectRatio.call(_this2);}).catch(function(){setAspectRatio.call(_this2);});},ready:function ready(){var player=this;var currentId=player.media&&player.media.getAttribute('id');if(!is$1.empty(currentId)&&currentId.startsWith('youtube-')){return;}
var source=player.media.getAttribute('src');if(is$1.empty(source)){source=player.media.getAttribute(this.config.attributes.embed.id);}
var videoId=parseId$1(source);var id=generateId(player.provider);var poster=player.poster;var container=createElement('div',{id:id,poster:poster});player.media=replaceElement(container,player.media);var posterSrc=function posterSrc(s){return "https://i.ytimg.com/vi/".concat(videoId,"/").concat(s,"default.jpg");};loadImage(posterSrc('maxres'),121).catch(function(){return loadImage(posterSrc('sd'),121);}).catch(function(){return loadImage(posterSrc('hq'));}).then(function(image){return ui.setPoster.call(player,image.src);}).then(function(src){if(!src.includes('maxres')){player.elements.poster.style.backgroundSize='cover';}}).catch(function(){});var config=player.config.youtube;player.embed=new window.YT.Player(id,{videoId:videoId,host:getHost$1(config),playerVars:extend({},{autoplay:player.config.autoplay?1:0,hl:player.config.hl,controls:player.supported.ui?0:1,disablekb:1,playsinline:!player.config.fullscreen.iosNative?1:0,cc_load_policy:player.captions.active?1:0,cc_lang_pref:player.config.captions.language,widget_referrer:window?window.location.href:null},config),events:{onError:function onError(event){if(!player.media.error){var code=event.data;var message={2:'The request contains an invalid parameter value. For example, this error occurs if you specify a video ID that does not have 11 characters, or if the video ID contains invalid characters, such as exclamation points or asterisks.',5:'The requested content cannot be played in an HTML5 player or another error related to the HTML5 player has occurred.',100:'The video requested was not found. This error occurs when a video has been removed (for any reason) or has been marked as private.',101:'The owner of the requested video does not allow it to be played in embedded players.',150:'The owner of the requested video does not allow it to be played in embedded players.'}[code]||'An unknown error occured';player.media.error={code:code,message:message};triggerEvent.call(player,player.media,'error');}},onPlaybackRateChange:function onPlaybackRateChange(event){var instance=event.target;player.media.playbackRate=instance.getPlaybackRate();triggerEvent.call(player,player.media,'ratechange');},onReady:function onReady(event){if(is$1.function(player.media.play)){return;}
var instance=event.target;youtube.getTitle.call(player,videoId);player.media.play=function(){assurePlaybackState$1.call(player,true);instance.playVideo();};player.media.pause=function(){assurePlaybackState$1.call(player,false);instance.pauseVideo();};player.media.stop=function(){instance.stopVideo();};player.media.duration=instance.getDuration();player.media.paused=true;player.media.currentTime=0;Object.defineProperty(player.media,'currentTime',{get:function get(){return Number(instance.getCurrentTime());},set:function set(time){if(player.paused&&!player.embed.hasPlayed){player.embed.mute();}
player.media.seeking=true;triggerEvent.call(player,player.media,'seeking');instance.seekTo(time);}});Object.defineProperty(player.media,'playbackRate',{get:function get(){return instance.getPlaybackRate();},set:function set(input){instance.setPlaybackRate(input);}});var volume=player.config.volume;Object.defineProperty(player.media,'volume',{get:function get(){return volume;},set:function set(input){volume=input;instance.setVolume(volume*100);triggerEvent.call(player,player.media,'volumechange');}});var muted=player.config.muted;Object.defineProperty(player.media,'muted',{get:function get(){return muted;},set:function set(input){var toggle=is$1.boolean(input)?input:muted;muted=toggle;instance[toggle?'mute':'unMute']();triggerEvent.call(player,player.media,'volumechange');}});Object.defineProperty(player.media,'currentSrc',{get:function get(){return instance.getVideoUrl();}});Object.defineProperty(player.media,'ended',{get:function get(){return player.currentTime===player.duration;}});var speeds=instance.getAvailablePlaybackRates();player.options.speed=speeds.filter(function(s){return player.config.speed.options.includes(s);});if(player.supported.ui){player.media.setAttribute('tabindex',-1);}
triggerEvent.call(player,player.media,'timeupdate');triggerEvent.call(player,player.media,'durationchange');clearInterval(player.timers.buffering);player.timers.buffering=setInterval(function(){player.media.buffered=instance.getVideoLoadedFraction();if(player.media.lastBuffered===null||player.media.lastBuffered<player.media.buffered){triggerEvent.call(player,player.media,'progress');}
player.media.lastBuffered=player.media.buffered;if(player.media.buffered===1){clearInterval(player.timers.buffering);triggerEvent.call(player,player.media,'canplaythrough');}},200);setTimeout(function(){return ui.build.call(player);},50);},onStateChange:function onStateChange(event){var instance=event.target;clearInterval(player.timers.playing);var seeked=player.media.seeking&&[1,2].includes(event.data);if(seeked){player.media.seeking=false;triggerEvent.call(player,player.media,'seeked');}
switch(event.data){case-1:triggerEvent.call(player,player.media,'timeupdate');player.media.buffered=instance.getVideoLoadedFraction();triggerEvent.call(player,player.media,'progress');break;case 0:assurePlaybackState$1.call(player,false);if(player.media.loop){instance.stopVideo();instance.playVideo();}else{triggerEvent.call(player,player.media,'ended');}
break;case 1:if(!player.config.autoplay&&player.media.paused&&!player.embed.hasPlayed){player.media.pause();}else{assurePlaybackState$1.call(player,true);triggerEvent.call(player,player.media,'playing');player.timers.playing=setInterval(function(){triggerEvent.call(player,player.media,'timeupdate');},50);if(player.media.duration!==instance.getDuration()){player.media.duration=instance.getDuration();triggerEvent.call(player,player.media,'durationchange');}}
break;case 2:if(!player.muted){player.embed.unMute();}
assurePlaybackState$1.call(player,false);break;case 3:triggerEvent.call(player,player.media,'waiting');break;}
triggerEvent.call(player,player.elements.container,'statechange',false,{code:event.data});}}});}};var media={setup:function setup(){if(!this.media){this.debug.warn('No media element found!');return;}
toggleClass(this.elements.container,this.config.classNames.type.replace('{0}',this.type),true);toggleClass(this.elements.container,this.config.classNames.provider.replace('{0}',this.provider),true);if(this.isEmbed){toggleClass(this.elements.container,this.config.classNames.type.replace('{0}','video'),true);}
if(this.isVideo){this.elements.wrapper=createElement('div',{class:this.config.classNames.video});wrap$1(this.media,this.elements.wrapper);if(this.isEmbed){this.elements.poster=createElement('div',{class:this.config.classNames.poster});this.elements.wrapper.appendChild(this.elements.poster);}}
if(this.isHTML5){html5.setup.call(this);}else if(this.isYouTube){youtube.setup.call(this);}else if(this.isVimeo){vimeo.setup.call(this);}}};var destroy=function destroy(instance){if(instance.manager){instance.manager.destroy();}
if(instance.elements.displayContainer){instance.elements.displayContainer.destroy();}
instance.elements.container.remove();};var Ads=function(){function Ads(player){var _this=this;_classCallCheck(this,Ads);this.player=player;this.config=player.config.ads;this.playing=false;this.initialized=false;this.elements={container:null,displayContainer:null};this.manager=null;this.loader=null;this.cuePoints=null;this.events={};this.safetyTimer=null;this.countdownTimer=null;this.managerPromise=new Promise(function(resolve,reject){_this.on('loaded',resolve);_this.on('error',reject);});this.load();}
_createClass(Ads,[{key:"load",value:function load(){var _this2=this;if(!this.enabled){return;}
if(!is$1.object(window.google)||!is$1.object(window.google.ima)){loadScript(this.player.config.urls.googleIMA.sdk).then(function(){_this2.ready();}).catch(function(){_this2.trigger('error',new Error('Google IMA SDK failed to load'));});}else{this.ready();}}},{key:"ready",value:function ready(){var _this3=this;if(!this.enabled){destroy(this);}
this.startSafetyTimer(12000,'ready()');this.managerPromise.then(function(){_this3.clearSafetyTimer('onAdsManagerLoaded()');});this.listeners();this.setupIMA();}},{key:"setupIMA",value:function setupIMA(){this.elements.container=createElement('div',{class:this.player.config.classNames.ads});this.player.elements.container.appendChild(this.elements.container);google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED);google.ima.settings.setLocale(this.player.config.ads.language);google.ima.settings.setDisableCustomPlaybackForIOS10Plus(this.player.config.playsinline);this.elements.displayContainer=new google.ima.AdDisplayContainer(this.elements.container,this.player.media);this.requestAds();}},{key:"requestAds",value:function requestAds(){var _this4=this;var container=this.player.elements.container;try{this.loader=new google.ima.AdsLoader(this.elements.displayContainer);this.loader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(event){return _this4.onAdsManagerLoaded(event);},false);this.loader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,function(error){return _this4.onAdError(error);},false);var request=new google.ima.AdsRequest();request.adTagUrl=this.tagUrl;request.linearAdSlotWidth=container.offsetWidth;request.linearAdSlotHeight=container.offsetHeight;request.nonLinearAdSlotWidth=container.offsetWidth;request.nonLinearAdSlotHeight=container.offsetHeight;request.forceNonLinearFullSlot=false;request.setAdWillPlayMuted(!this.player.muted);this.loader.requestAds(request);}catch(e){this.onAdError(e);}}},{key:"pollCountdown",value:function pollCountdown(){var _this5=this;var start=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(!start){clearInterval(this.countdownTimer);this.elements.container.removeAttribute('data-badge-text');return;}
var update=function update(){var time=formatTime(Math.max(_this5.manager.getRemainingTime(),0));var label="".concat(i18n.get('advertisement',_this5.player.config)," - ").concat(time);_this5.elements.container.setAttribute('data-badge-text',label);};this.countdownTimer=setInterval(update,100);}},{key:"onAdsManagerLoaded",value:function onAdsManagerLoaded(event){var _this6=this;if(!this.enabled){return;}
var settings=new google.ima.AdsRenderingSettings();settings.restoreCustomPlaybackStateOnAdBreakComplete=true;settings.enablePreloading=true;this.manager=event.getAdsManager(this.player,settings);this.cuePoints=this.manager.getCuePoints();this.manager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,function(error){return _this6.onAdError(error);});Object.keys(google.ima.AdEvent.Type).forEach(function(type){_this6.manager.addEventListener(google.ima.AdEvent.Type[type],function(e){return _this6.onAdEvent(e);});});this.trigger('loaded');}},{key:"addCuePoints",value:function addCuePoints(){var _this7=this;if(!is$1.empty(this.cuePoints)){this.cuePoints.forEach(function(cuePoint){if(cuePoint!==0&&cuePoint!==-1&&cuePoint<_this7.player.duration){var seekElement=_this7.player.elements.progress;if(is$1.element(seekElement)){var cuePercentage=100/_this7.player.duration*cuePoint;var cue=createElement('span',{class:_this7.player.config.classNames.cues});cue.style.left="".concat(cuePercentage.toString(),"%");seekElement.appendChild(cue);}}});}}},{key:"onAdEvent",value:function onAdEvent(event){var _this8=this;var container=this.player.elements.container;var ad=event.getAd();var adData=event.getAdData();var dispatchEvent=function dispatchEvent(type){triggerEvent.call(_this8.player,_this8.player.media,"ads".concat(type.replace(/_/g,'').toLowerCase()));};dispatchEvent(event.type);switch(event.type){case google.ima.AdEvent.Type.LOADED:this.trigger('loaded');this.pollCountdown(true);if(!ad.isLinear()){ad.width=container.offsetWidth;ad.height=container.offsetHeight;}
break;case google.ima.AdEvent.Type.STARTED:this.manager.setVolume(this.player.volume);break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:this.loadAds();break;case google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED:this.pauseContent();break;case google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED:this.pollCountdown();this.resumeContent();break;case google.ima.AdEvent.Type.LOG:if(adData.adError){this.player.debug.warn("Non-fatal ad error: ".concat(adData.adError.getMessage()));}
break;}}},{key:"onAdError",value:function onAdError(event){this.cancel();this.player.debug.warn('Ads error',event);}},{key:"listeners",value:function listeners(){var _this9=this;var container=this.player.elements.container;var time;this.player.on('canplay',function(){_this9.addCuePoints();});this.player.on('ended',function(){_this9.loader.contentComplete();});this.player.on('timeupdate',function(){time=_this9.player.currentTime;});this.player.on('seeked',function(){var seekedTime=_this9.player.currentTime;if(is$1.empty(_this9.cuePoints)){return;}
_this9.cuePoints.forEach(function(cuePoint,index){if(time<cuePoint&&cuePoint<seekedTime){_this9.manager.discardAdBreak();_this9.cuePoints.splice(index,1);}});});window.addEventListener('resize',function(){if(_this9.manager){_this9.manager.resize(container.offsetWidth,container.offsetHeight,google.ima.ViewMode.NORMAL);}});}},{key:"play",value:function play(){var _this10=this;var container=this.player.elements.container;if(!this.managerPromise){this.resumeContent();}
this.managerPromise.then(function(){_this10.manager.setVolume(_this10.player.volume);_this10.elements.displayContainer.initialize();try{if(!_this10.initialized){_this10.manager.init(container.offsetWidth,container.offsetHeight,google.ima.ViewMode.NORMAL);_this10.manager.start();}
_this10.initialized=true;}catch(adError){_this10.onAdError(adError);}}).catch(function(){});}},{key:"resumeContent",value:function resumeContent(){this.elements.container.style.zIndex='';this.playing=false;this.player.media.play();}},{key:"pauseContent",value:function pauseContent(){this.elements.container.style.zIndex=3;this.playing=true;this.player.media.pause();}},{key:"cancel",value:function cancel(){if(this.initialized){this.resumeContent();}
this.trigger('error');this.loadAds();}},{key:"loadAds",value:function loadAds(){var _this11=this;this.managerPromise.then(function(){if(_this11.manager){_this11.manager.destroy();}
_this11.managerPromise=new Promise(function(resolve){_this11.on('loaded',resolve);_this11.player.debug.log(_this11.manager);});_this11.requestAds();}).catch(function(){});}},{key:"trigger",value:function trigger(event){var _this12=this;for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){args[_key-1]=arguments[_key];}
var handlers=this.events[event];if(is$1.array(handlers)){handlers.forEach(function(handler){if(is$1.function(handler)){handler.apply(_this12,args);}});}}},{key:"on",value:function on(event,callback){if(!is$1.array(this.events[event])){this.events[event]=[];}
this.events[event].push(callback);return this;}},{key:"startSafetyTimer",value:function startSafetyTimer(time,from){var _this13=this;this.player.debug.log("Safety timer invoked from: ".concat(from));this.safetyTimer=setTimeout(function(){_this13.cancel();_this13.clearSafetyTimer('startSafetyTimer()');},time);}},{key:"clearSafetyTimer",value:function clearSafetyTimer(from){if(!is$1.nullOrUndefined(this.safetyTimer)){this.player.debug.log("Safety timer cleared from: ".concat(from));clearTimeout(this.safetyTimer);this.safetyTimer=null;}}},{key:"enabled",get:function get(){var config=this.config;return this.player.isHTML5&&this.player.isVideo&&config.enabled&&(!is$1.empty(config.publisherId)||is$1.url(config.tagUrl));}},{key:"tagUrl",get:function get(){var config=this.config;if(is$1.url(config.tagUrl)){return config.tagUrl;}
var params={AV_PUBLISHERID:'58c25bb0073ef448b1087ad6',AV_CHANNELID:'5a0458dc28a06145e4519d21',AV_URL:window.location.hostname,cb:Date.now(),AV_WIDTH:640,AV_HEIGHT:480,AV_CDIM2:config.publisherId};var base='https://go.aniview.com/api/adserver6/vast/';return "".concat(base,"?").concat(buildUrlParams(params));}}]);return Ads;}();var $findIndex=arrayIteration.findIndex;var FIND_INDEX='findIndex';var SKIPS_HOLES$1=true;var USES_TO_LENGTH$b=arrayMethodUsesToLength(FIND_INDEX);if(FIND_INDEX in[])Array(1)[FIND_INDEX](function(){SKIPS_HOLES$1=false;});_export({target:'Array',proto:true,forced:SKIPS_HOLES$1||!USES_TO_LENGTH$b},{findIndex:function findIndex(callbackfn){return $findIndex(this,callbackfn,arguments.length>1?arguments[1]:undefined);}});addToUnscopables(FIND_INDEX);var min$6=Math.min;var nativeLastIndexOf=[].lastIndexOf;var NEGATIVE_ZERO$1=!!nativeLastIndexOf&&1/[1].lastIndexOf(1,-0)<0;var STRICT_METHOD$6=arrayMethodIsStrict('lastIndexOf');var USES_TO_LENGTH$c=arrayMethodUsesToLength('indexOf',{ACCESSORS:true,1:0});var FORCED$4=NEGATIVE_ZERO$1||!STRICT_METHOD$6||!USES_TO_LENGTH$c;var arrayLastIndexOf=FORCED$4?function lastIndexOf(searchElement){if(NEGATIVE_ZERO$1)return nativeLastIndexOf.apply(this,arguments)||0;var O=toIndexedObject(this);var length=toLength(O.length);var index=length-1;if(arguments.length>1)index=min$6(index,toInteger(arguments[1]));if(index<0)index=length+index;for(;index>=0;index--)if(index in O&&O[index]===searchElement)return index||0;return-1;}:nativeLastIndexOf;_export({target:'Array',proto:true,forced:arrayLastIndexOf!==[].lastIndexOf},{lastIndexOf:arrayLastIndexOf});var parseVtt=function parseVtt(vttDataString){var processedList=[];var frames=vttDataString.split(/\r\n\r\n|\n\n|\r\r/);frames.forEach(function(frame){var result={};var lines=frame.split(/\r\n|\n|\r/);lines.forEach(function(line){if(!is$1.number(result.startTime)){var matchTimes=line.match(/([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})( ?--> ?)([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})/);if(matchTimes){result.startTime=Number(matchTimes[1]||0)*60*60+Number(matchTimes[2])*60+Number(matchTimes[3])+Number("0.".concat(matchTimes[4]));result.endTime=Number(matchTimes[6]||0)*60*60+Number(matchTimes[7])*60+Number(matchTimes[8])+Number("0.".concat(matchTimes[9]));}}else if(!is$1.empty(line.trim())&&is$1.empty(result.text)){var lineSplit=line.trim().split('#xywh=');var _lineSplit=_slicedToArray(lineSplit,1);result.text=_lineSplit[0];if(lineSplit[1]){var _lineSplit$1$split=lineSplit[1].split(',');var _lineSplit$1$split2=_slicedToArray(_lineSplit$1$split,4);result.x=_lineSplit$1$split2[0];result.y=_lineSplit$1$split2[1];result.w=_lineSplit$1$split2[2];result.h=_lineSplit$1$split2[3];}}});if(result.text){processedList.push(result);}});return processedList;};var fitRatio=function fitRatio(ratio,outer){var targetRatio=outer.width/outer.height;var result={};if(ratio>targetRatio){result.width=outer.width;result.height=1/ratio*outer.width;}else{result.height=outer.height;result.width=ratio*outer.height;}
return result;};var PreviewThumbnails=function(){function PreviewThumbnails(player){_classCallCheck(this,PreviewThumbnails);this.player=player;this.thumbnails=[];this.loaded=false;this.lastMouseMoveTime=Date.now();this.mouseDown=false;this.loadedImages=[];this.elements={thumb:{},scrubbing:{}};this.load();}
_createClass(PreviewThumbnails,[{key:"load",value:function load(){var _this=this;if(this.player.elements.display.seekTooltip){this.player.elements.display.seekTooltip.hidden=this.enabled;}
if(!this.enabled){return;}
this.getThumbnails().then(function(){if(!_this.enabled){return;}
_this.render();_this.determineContainerAutoSizing();_this.loaded=true;});}},{key:"getThumbnails",value:function getThumbnails(){var _this2=this;return new Promise(function(resolve){var src=_this2.player.config.previewThumbnails.src;if(is$1.empty(src)){throw new Error('Missing previewThumbnails.src config attribute');}
var urls=is$1.string(src)?[src]:src;var promises=urls.map(function(u){return _this2.getThumbnail(u);});Promise.all(promises).then(function(){_this2.thumbnails.sort(function(x,y){return x.height-y.height;});_this2.player.debug.log('Preview thumbnails',_this2.thumbnails);resolve();});});}},{key:"getThumbnail",value:function getThumbnail(url){var _this3=this;return new Promise(function(resolve){fetch(url).then(function(response){var thumbnail={frames:parseVtt(response),height:null,urlPrefix:''};if(!thumbnail.frames[0].text.startsWith('/')&&!thumbnail.frames[0].text.startsWith('http://')&&!thumbnail.frames[0].text.startsWith('https://')){thumbnail.urlPrefix=url.substring(0,url.lastIndexOf('/')+1);}
var tempImage=new Image();tempImage.onload=function(){thumbnail.height=tempImage.naturalHeight;thumbnail.width=tempImage.naturalWidth;_this3.thumbnails.push(thumbnail);resolve();};tempImage.src=thumbnail.urlPrefix+thumbnail.frames[0].text;});});}},{key:"startMove",value:function startMove(event){if(!this.loaded){return;}
if(!is$1.event(event)||!['touchmove','mousemove'].includes(event.type)){return;}
if(!this.player.media.duration){return;}
if(event.type==='touchmove'){this.seekTime=this.player.media.duration*(this.player.elements.inputs.seek.value/100);}else{var clientRect=this.player.elements.progress.getBoundingClientRect();var percentage=100/clientRect.width*(event.pageX-clientRect.left);this.seekTime=this.player.media.duration*(percentage/100);if(this.seekTime<0){this.seekTime=0;}
if(this.seekTime>this.player.media.duration-1){this.seekTime=this.player.media.duration-1;}
this.mousePosX=event.pageX;this.elements.thumb.time.innerText=formatTime(this.seekTime);}
this.showImageAtCurrentTime();}},{key:"endMove",value:function endMove(){this.toggleThumbContainer(false,true);}},{key:"startScrubbing",value:function startScrubbing(event){if(is$1.nullOrUndefined(event.button)||event.button===false||event.button===0){this.mouseDown=true;if(this.player.media.duration){this.toggleScrubbingContainer(true);this.toggleThumbContainer(false,true);this.showImageAtCurrentTime();}}}},{key:"endScrubbing",value:function endScrubbing(){var _this4=this;this.mouseDown=false;if(Math.ceil(this.lastTime)===Math.ceil(this.player.media.currentTime)){this.toggleScrubbingContainer(false);}else{once.call(this.player,this.player.media,'timeupdate',function(){if(!_this4.mouseDown){_this4.toggleScrubbingContainer(false);}});}}},{key:"listeners",value:function listeners(){var _this5=this;this.player.on('play',function(){_this5.toggleThumbContainer(false,true);});this.player.on('seeked',function(){_this5.toggleThumbContainer(false);});this.player.on('timeupdate',function(){_this5.lastTime=_this5.player.media.currentTime;});}},{key:"render",value:function render(){this.elements.thumb.container=createElement('div',{class:this.player.config.classNames.previewThumbnails.thumbContainer});this.elements.thumb.imageContainer=createElement('div',{class:this.player.config.classNames.previewThumbnails.imageContainer});this.elements.thumb.container.appendChild(this.elements.thumb.imageContainer);var timeContainer=createElement('div',{class:this.player.config.classNames.previewThumbnails.timeContainer});this.elements.thumb.time=createElement('span',{},'00:00');timeContainer.appendChild(this.elements.thumb.time);this.elements.thumb.container.appendChild(timeContainer);if(is$1.element(this.player.elements.progress)){this.player.elements.progress.appendChild(this.elements.thumb.container);}
this.elements.scrubbing.container=createElement('div',{class:this.player.config.classNames.previewThumbnails.scrubbingContainer});this.player.elements.wrapper.appendChild(this.elements.scrubbing.container);}},{key:"destroy",value:function destroy(){if(this.elements.thumb.container){this.elements.thumb.container.remove();}
if(this.elements.scrubbing.container){this.elements.scrubbing.container.remove();}}},{key:"showImageAtCurrentTime",value:function showImageAtCurrentTime(){var _this6=this;if(this.mouseDown){this.setScrubbingContainerSize();}else{this.setThumbContainerSizeAndPos();}
var thumbNum=this.thumbnails[0].frames.findIndex(function(frame){return _this6.seekTime>=frame.startTime&&_this6.seekTime<=frame.endTime;});var hasThumb=thumbNum>=0;var qualityIndex=0;if(!this.mouseDown){this.toggleThumbContainer(hasThumb);}
if(!hasThumb){return;}
this.thumbnails.forEach(function(thumbnail,index){if(_this6.loadedImages.includes(thumbnail.frames[thumbNum].text)){qualityIndex=index;}});if(thumbNum!==this.showingThumb){this.showingThumb=thumbNum;this.loadImage(qualityIndex);}}},{key:"loadImage",value:function loadImage(){var _this7=this;var qualityIndex=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var thumbNum=this.showingThumb;var thumbnail=this.thumbnails[qualityIndex];var urlPrefix=thumbnail.urlPrefix;var frame=thumbnail.frames[thumbNum];var thumbFilename=thumbnail.frames[thumbNum].text;var thumbUrl=urlPrefix+thumbFilename;if(!this.currentImageElement||this.currentImageElement.dataset.filename!==thumbFilename){if(this.loadingImage&&this.usingSprites){this.loadingImage.onload=null;}
var previewImage=new Image();previewImage.src=thumbUrl;previewImage.dataset.index=thumbNum;previewImage.dataset.filename=thumbFilename;this.showingThumbFilename=thumbFilename;this.player.debug.log("Loading image: ".concat(thumbUrl));previewImage.onload=function(){return _this7.showImage(previewImage,frame,qualityIndex,thumbNum,thumbFilename,true);};this.loadingImage=previewImage;this.removeOldImages(previewImage);}else{this.showImage(this.currentImageElement,frame,qualityIndex,thumbNum,thumbFilename,false);this.currentImageElement.dataset.index=thumbNum;this.removeOldImages(this.currentImageElement);}}},{key:"showImage",value:function showImage(previewImage,frame,qualityIndex,thumbNum,thumbFilename){var newImage=arguments.length>5&&arguments[5]!==undefined?arguments[5]:true;this.player.debug.log("Showing thumb: ".concat(thumbFilename,". num: ").concat(thumbNum,". qual: ").concat(qualityIndex,". newimg: ").concat(newImage));this.setImageSizeAndOffset(previewImage,frame);if(newImage){this.currentImageContainer.appendChild(previewImage);this.currentImageElement=previewImage;if(!this.loadedImages.includes(thumbFilename)){this.loadedImages.push(thumbFilename);}}
this.preloadNearby(thumbNum,true).then(this.preloadNearby(thumbNum,false)).then(this.getHigherQuality(qualityIndex,previewImage,frame,thumbFilename));}},{key:"removeOldImages",value:function removeOldImages(currentImage){var _this8=this;Array.from(this.currentImageContainer.children).forEach(function(image){if(image.tagName.toLowerCase()!=='img'){return;}
var removeDelay=_this8.usingSprites?500:1000;if(image.dataset.index!==currentImage.dataset.index&&!image.dataset.deleting){image.dataset.deleting=true;var currentImageContainer=_this8.currentImageContainer;setTimeout(function(){currentImageContainer.removeChild(image);_this8.player.debug.log("Removing thumb: ".concat(image.dataset.filename));},removeDelay);}});}},{key:"preloadNearby",value:function preloadNearby(thumbNum){var _this9=this;var forward=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;return new Promise(function(resolve){setTimeout(function(){var oldThumbFilename=_this9.thumbnails[0].frames[thumbNum].text;if(_this9.showingThumbFilename===oldThumbFilename){var thumbnailsClone;if(forward){thumbnailsClone=_this9.thumbnails[0].frames.slice(thumbNum);}else{thumbnailsClone=_this9.thumbnails[0].frames.slice(0,thumbNum).reverse();}
var foundOne=false;thumbnailsClone.forEach(function(frame){var newThumbFilename=frame.text;if(newThumbFilename!==oldThumbFilename){if(!_this9.loadedImages.includes(newThumbFilename)){foundOne=true;_this9.player.debug.log("Preloading thumb filename: ".concat(newThumbFilename));var urlPrefix=_this9.thumbnails[0].urlPrefix;var thumbURL=urlPrefix+newThumbFilename;var previewImage=new Image();previewImage.src=thumbURL;previewImage.onload=function(){_this9.player.debug.log("Preloaded thumb filename: ".concat(newThumbFilename));if(!_this9.loadedImages.includes(newThumbFilename))_this9.loadedImages.push(newThumbFilename);resolve();};}}});if(!foundOne){resolve();}}},300);});}},{key:"getHigherQuality",value:function getHigherQuality(currentQualityIndex,previewImage,frame,thumbFilename){var _this10=this;if(currentQualityIndex<this.thumbnails.length-1){var previewImageHeight=previewImage.naturalHeight;if(this.usingSprites){previewImageHeight=frame.h;}
if(previewImageHeight<this.thumbContainerHeight){setTimeout(function(){if(_this10.showingThumbFilename===thumbFilename){_this10.player.debug.log("Showing higher quality thumb for: ".concat(thumbFilename));_this10.loadImage(currentQualityIndex+1);}},300);}}}},{key:"toggleThumbContainer",value:function toggleThumbContainer(){var toggle=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var clearShowing=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var className=this.player.config.classNames.previewThumbnails.thumbContainerShown;this.elements.thumb.container.classList.toggle(className,toggle);if(!toggle&&clearShowing){this.showingThumb=null;this.showingThumbFilename=null;}}},{key:"toggleScrubbingContainer",value:function toggleScrubbingContainer(){var toggle=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var className=this.player.config.classNames.previewThumbnails.scrubbingContainerShown;this.elements.scrubbing.container.classList.toggle(className,toggle);if(!toggle){this.showingThumb=null;this.showingThumbFilename=null;}}},{key:"determineContainerAutoSizing",value:function determineContainerAutoSizing(){if(this.elements.thumb.imageContainer.clientHeight>20||this.elements.thumb.imageContainer.clientWidth>20){this.sizeSpecifiedInCSS=true;}}},{key:"setThumbContainerSizeAndPos",value:function setThumbContainerSizeAndPos(){if(!this.sizeSpecifiedInCSS){var thumbWidth=Math.floor(this.thumbContainerHeight*this.thumbAspectRatio);this.elements.thumb.imageContainer.style.height="".concat(this.thumbContainerHeight,"px");this.elements.thumb.imageContainer.style.width="".concat(thumbWidth,"px");}else if(this.elements.thumb.imageContainer.clientHeight>20&&this.elements.thumb.imageContainer.clientWidth<20){var _thumbWidth=Math.floor(this.elements.thumb.imageContainer.clientHeight*this.thumbAspectRatio);this.elements.thumb.imageContainer.style.width="".concat(_thumbWidth,"px");}else if(this.elements.thumb.imageContainer.clientHeight<20&&this.elements.thumb.imageContainer.clientWidth>20){var thumbHeight=Math.floor(this.elements.thumb.imageContainer.clientWidth/this.thumbAspectRatio);this.elements.thumb.imageContainer.style.height="".concat(thumbHeight,"px");}
this.setThumbContainerPos();}},{key:"setThumbContainerPos",value:function setThumbContainerPos(){var seekbarRect=this.player.elements.progress.getBoundingClientRect();var plyrRect=this.player.elements.container.getBoundingClientRect();var container=this.elements.thumb.container;var minVal=plyrRect.left-seekbarRect.left+10;var maxVal=plyrRect.right-seekbarRect.left-container.clientWidth-10;var previewPos=this.mousePosX-seekbarRect.left-container.clientWidth/2;if(previewPos<minVal){previewPos=minVal;}
if(previewPos>maxVal){previewPos=maxVal;}
container.style.left="".concat(previewPos,"px");}},{key:"setScrubbingContainerSize",value:function setScrubbingContainerSize(){var _fitRatio=fitRatio(this.thumbAspectRatio,{width:this.player.media.clientWidth,height:this.player.media.clientHeight}),width=_fitRatio.width,height=_fitRatio.height;this.elements.scrubbing.container.style.width="".concat(width,"px");this.elements.scrubbing.container.style.height="".concat(height,"px");}},{key:"setImageSizeAndOffset",value:function setImageSizeAndOffset(previewImage,frame){if(!this.usingSprites){return;}
var multiplier=this.thumbContainerHeight/frame.h;previewImage.style.height="".concat(previewImage.naturalHeight*multiplier,"px");previewImage.style.width="".concat(previewImage.naturalWidth*multiplier,"px");previewImage.style.left="-".concat(frame.x*multiplier,"px");previewImage.style.top="-".concat(frame.y*multiplier,"px");}},{key:"enabled",get:function get(){return this.player.isHTML5&&this.player.isVideo&&this.player.config.previewThumbnails.enabled;}},{key:"currentImageContainer",get:function get(){if(this.mouseDown){return this.elements.scrubbing.container;}
return this.elements.thumb.imageContainer;}},{key:"usingSprites",get:function get(){return Object.keys(this.thumbnails[0].frames[0]).includes('w');}},{key:"thumbAspectRatio",get:function get(){if(this.usingSprites){return this.thumbnails[0].frames[0].w/this.thumbnails[0].frames[0].h;}
return this.thumbnails[0].width/this.thumbnails[0].height;}},{key:"thumbContainerHeight",get:function get(){if(this.mouseDown){var _fitRatio2=fitRatio(this.thumbAspectRatio,{width:this.player.media.clientWidth,height:this.player.media.clientHeight}),height=_fitRatio2.height;return height;}
if(this.sizeSpecifiedInCSS){return this.elements.thumb.imageContainer.clientHeight;}
return Math.floor(this.player.media.clientWidth/this.thumbAspectRatio/4);}},{key:"currentImageElement",get:function get(){if(this.mouseDown){return this.currentScrubbingImageElement;}
return this.currentThumbnailImageElement;},set:function set(element){if(this.mouseDown){this.currentScrubbingImageElement=element;}else{this.currentThumbnailImageElement=element;}}}]);return PreviewThumbnails;}();var source={insertElements:function insertElements(type,attributes){var _this=this;if(is$1.string(attributes)){insertElement(type,this.media,{src:attributes});}else if(is$1.array(attributes)){attributes.forEach(function(attribute){insertElement(type,_this.media,attribute);});}},change:function change(input){var _this2=this;if(!getDeep(input,'sources.length')){this.debug.warn('Invalid source format');return;}
html5.cancelRequests.call(this);this.destroy.call(this,function(){_this2.options.quality=[];removeElement(_this2.media);_this2.media=null;if(is$1.element(_this2.elements.container)){_this2.elements.container.removeAttribute('class');}
var sources=input.sources,type=input.type;var _sources=_slicedToArray(sources,1),_sources$=_sources[0],_sources$$provider=_sources$.provider,provider=_sources$$provider===void 0?providers.html5:_sources$$provider,src=_sources$.src;var tagName=provider==='html5'?type:'div';var attributes=provider==='html5'?{}:{src:src};Object.assign(_this2,{provider:provider,type:type,supported:support.check(type,provider,_this2.config.playsinline),media:createElement(tagName,attributes)});_this2.elements.container.appendChild(_this2.media);if(is$1.boolean(input.autoplay)){_this2.config.autoplay=input.autoplay;}
if(_this2.isHTML5){if(_this2.config.crossorigin){_this2.media.setAttribute('crossorigin','');}
if(_this2.config.autoplay){_this2.media.setAttribute('autoplay','');}
if(!is$1.empty(input.poster)){_this2.poster=input.poster;}
if(_this2.config.loop.active){_this2.media.setAttribute('loop','');}
if(_this2.config.muted){_this2.media.setAttribute('muted','');}
if(_this2.config.playsinline){_this2.media.setAttribute('playsinline','');}}
ui.addStyleHook.call(_this2);if(_this2.isHTML5){source.insertElements.call(_this2,'source',sources);}
_this2.config.title=input.title;media.setup.call(_this2);if(_this2.isHTML5){if(Object.keys(input).includes('tracks')){source.insertElements.call(_this2,'track',input.tracks);}}
if(_this2.isHTML5||_this2.isEmbed&&!_this2.supported.ui){ui.build.call(_this2);}
if(_this2.isHTML5){_this2.media.load();}
if(!is$1.empty(input.previewThumbnails)){Object.assign(_this2.config.previewThumbnails,input.previewThumbnails);if(_this2.previewThumbnails&&_this2.previewThumbnails.loaded){_this2.previewThumbnails.destroy();_this2.previewThumbnails=null;}
if(_this2.config.previewThumbnails.enabled){_this2.previewThumbnails=new PreviewThumbnails(_this2);}}
_this2.fullscreen.update();},true);}};function clamp(){var input=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var min=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var max=arguments.length>2&&arguments[2]!==undefined?arguments[2]:255;return Math.min(Math.max(input,min),max);}
var Plyr=function(){function Plyr(target,options){var _this=this;_classCallCheck(this,Plyr);this.timers={};this.ready=false;this.loading=false;this.failed=false;this.touch=support.touch;this.media=target;if(is$1.string(this.media)){this.media=document.querySelectorAll(this.media);}
if(window.jQuery&&this.media instanceof jQuery||is$1.nodeList(this.media)||is$1.array(this.media)){this.media=this.media[0];}
this.config=extend({},defaults$1,Plyr.defaults,options||{},function(){try{return JSON.parse(_this.media.getAttribute('data-plyr-config'));}catch(e){return{};}}());this.elements={container:null,captions:null,buttons:{},display:{},progress:{},inputs:{},settings:{popup:null,menu:null,panels:{},buttons:{}}};this.captions={active:null,currentTrack:-1,meta:new WeakMap()};this.fullscreen={active:false};this.options={speed:[],quality:[]};this.debug=new Console(this.config.debug);this.debug.log('Config',this.config);this.debug.log('Support',support);if(is$1.nullOrUndefined(this.media)||!is$1.element(this.media)){this.debug.error('Setup failed: no suitable element passed');return;}
if(this.media.plyr){this.debug.warn('Target already setup');return;}
if(!this.config.enabled){this.debug.error('Setup failed: disabled by config');return;}
if(!support.check().api){this.debug.error('Setup failed: no support');return;}
var clone=this.media.cloneNode(true);clone.autoplay=false;this.elements.original=clone;var type=this.media.tagName.toLowerCase();var iframe=null;var url=null;switch(type){case 'div':iframe=this.media.querySelector('iframe');if(is$1.element(iframe)){url=parseUrl(iframe.getAttribute('src'));this.provider=getProviderByUrl(url.toString());this.elements.container=this.media;this.media=iframe;this.elements.container.className='';if(url.search.length){var truthy=['1','true'];if(truthy.includes(url.searchParams.get('autoplay'))){this.config.autoplay=true;}
if(truthy.includes(url.searchParams.get('loop'))){this.config.loop.active=true;}
if(this.isYouTube){this.config.playsinline=truthy.includes(url.searchParams.get('playsinline'));this.config.youtube.hl=url.searchParams.get('hl');}else{this.config.playsinline=true;}}}else{this.provider=this.media.getAttribute(this.config.attributes.embed.provider);this.media.removeAttribute(this.config.attributes.embed.provider);}
if(is$1.empty(this.provider)||!Object.keys(providers).includes(this.provider)){this.debug.error('Setup failed: Invalid provider');return;}
this.type=types.video;break;case 'video':case 'audio':this.type=type;this.provider=providers.html5;if(this.media.hasAttribute('crossorigin')){this.config.crossorigin=true;}
if(this.media.hasAttribute('autoplay')){this.config.autoplay=true;}
if(this.media.hasAttribute('playsinline')||this.media.hasAttribute('webkit-playsinline')){this.config.playsinline=true;}
if(this.media.hasAttribute('muted')){this.config.muted=true;}
if(this.media.hasAttribute('loop')){this.config.loop.active=true;}
break;default:this.debug.error('Setup failed: unsupported type');return;}
this.supported=support.check(this.type,this.provider,this.config.playsinline);if(!this.supported.api){this.debug.error('Setup failed: no support');return;}
this.eventListeners=[];this.listeners=new Listeners(this);this.storage=new Storage(this);this.media.plyr=this;if(!is$1.element(this.elements.container)){this.elements.container=createElement('div',{tabindex:0});wrap$1(this.media,this.elements.container);}
ui.addStyleHook.call(this);media.setup.call(this);if(this.config.debug){on.call(this,this.elements.container,this.config.events.join(' '),function(event){_this.debug.log("event: ".concat(event.type));});}
if(this.isHTML5||this.isEmbed&&!this.supported.ui){ui.build.call(this);}
this.listeners.container();this.listeners.global();this.fullscreen=new Fullscreen(this);if(this.config.ads.enabled){this.ads=new Ads(this);}
if(this.isHTML5&&this.config.autoplay){setTimeout(function(){return _this.play();},10);}
this.lastSeekTime=0;if(this.config.previewThumbnails.enabled){this.previewThumbnails=new PreviewThumbnails(this);}}
_createClass(Plyr,[{key:"play",value:function play(){var _this2=this;if(!is$1.function(this.media.play)){return null;}
if(this.ads&&this.ads.enabled){this.ads.managerPromise.then(function(){return _this2.ads.play();}).catch(function(){return _this2.media.play();});}
return this.media.play();}},{key:"pause",value:function pause(){if(!this.playing||!is$1.function(this.media.pause)){return null;}
return this.media.pause();}},{key:"togglePlay",value:function togglePlay(input){var toggle=is$1.boolean(input)?input:!this.playing;if(toggle){return this.play();}
return this.pause();}},{key:"stop",value:function stop(){if(this.isHTML5){this.pause();this.restart();}else if(is$1.function(this.media.stop)){this.media.stop();}}},{key:"restart",value:function restart(){this.currentTime=0;}},{key:"rewind",value:function rewind(seekTime){this.currentTime-=is$1.number(seekTime)?seekTime:this.config.seekTime;}},{key:"forward",value:function forward(seekTime){this.currentTime+=is$1.number(seekTime)?seekTime:this.config.seekTime;}},{key:"increaseVolume",value:function increaseVolume(step){var volume=this.media.muted?0:this.volume;this.volume=volume+(is$1.number(step)?step:0);}},{key:"decreaseVolume",value:function decreaseVolume(step){this.increaseVolume(-step);}},{key:"toggleCaptions",value:function toggleCaptions(input){captions.toggle.call(this,input,false);}},{key:"airplay",value:function airplay(){if(support.airplay){this.media.webkitShowPlaybackTargetPicker();}}},{key:"toggleControls",value:function toggleControls(toggle){if(this.supported.ui&&!this.isAudio){var isHidden=hasClass(this.elements.container,this.config.classNames.hideControls);var force=typeof toggle==='undefined'?undefined:!toggle;var hiding=toggleClass(this.elements.container,this.config.classNames.hideControls,force);if(hiding&&this.config.controls.includes('settings')&&!is$1.empty(this.config.settings)){controls.toggleMenu.call(this,false);}
if(hiding!==isHidden){var eventName=hiding?'controlshidden':'controlsshown';triggerEvent.call(this,this.media,eventName);}
return!hiding;}
return false;}},{key:"on",value:function on$1(event,callback){on.call(this,this.elements.container,event,callback);}},{key:"once",value:function once$1(event,callback){once.call(this,this.elements.container,event,callback);}},{key:"off",value:function off$1(event,callback){off(this.elements.container,event,callback);}},{key:"destroy",value:function destroy(callback){var _this3=this;var soft=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!this.ready){return;}
var done=function done(){document.body.style.overflow='';_this3.embed=null;if(soft){if(Object.keys(_this3.elements).length){removeElement(_this3.elements.buttons.play);removeElement(_this3.elements.captions);removeElement(_this3.elements.controls);removeElement(_this3.elements.wrapper);_this3.elements.buttons.play=null;_this3.elements.captions=null;_this3.elements.controls=null;_this3.elements.wrapper=null;}
if(is$1.function(callback)){callback();}}else{unbindListeners.call(_this3);replaceElement(_this3.elements.original,_this3.elements.container);triggerEvent.call(_this3,_this3.elements.original,'destroyed',true);if(is$1.function(callback)){callback.call(_this3.elements.original);}
_this3.ready=false;setTimeout(function(){_this3.elements=null;_this3.media=null;},200);}};this.stop();clearTimeout(this.timers.loading);clearTimeout(this.timers.controls);clearTimeout(this.timers.resized);if(this.isHTML5){ui.toggleNativeControls.call(this,true);done();}else if(this.isYouTube){clearInterval(this.timers.buffering);clearInterval(this.timers.playing);if(this.embed!==null&&is$1.function(this.embed.destroy)){this.embed.destroy();}
done();}else if(this.isVimeo){if(this.embed!==null){this.embed.unload().then(done);}
setTimeout(done,200);}}},{key:"supports",value:function supports(type){return support.mime.call(this,type);}},{key:"isHTML5",get:function get(){return this.provider===providers.html5;}},{key:"isEmbed",get:function get(){return this.isYouTube||this.isVimeo;}},{key:"isYouTube",get:function get(){return this.provider===providers.youtube;}},{key:"isVimeo",get:function get(){return this.provider===providers.vimeo;}},{key:"isVideo",get:function get(){return this.type===types.video;}},{key:"isAudio",get:function get(){return this.type===types.audio;}},{key:"playing",get:function get(){return Boolean(this.ready&&!this.paused&&!this.ended);}},{key:"paused",get:function get(){return Boolean(this.media.paused);}},{key:"stopped",get:function get(){return Boolean(this.paused&&this.currentTime===0);}},{key:"ended",get:function get(){return Boolean(this.media.ended);}},{key:"currentTime",set:function set(input){if(!this.duration){return;}
var inputIsValid=is$1.number(input)&&input>0;this.media.currentTime=inputIsValid?Math.min(input,this.duration):0;this.debug.log("Seeking to ".concat(this.currentTime," seconds"));},get:function get(){return Number(this.media.currentTime);}},{key:"buffered",get:function get(){var buffered=this.media.buffered;if(is$1.number(buffered)){return buffered;}
if(buffered&&buffered.length&&this.duration>0){return buffered.end(0)/this.duration;}
return 0;}},{key:"seeking",get:function get(){return Boolean(this.media.seeking);}},{key:"duration",get:function get(){var fauxDuration=parseFloat(this.config.duration);var realDuration=(this.media||{}).duration;var duration=!is$1.number(realDuration)||realDuration===Infinity?0:realDuration;return fauxDuration||duration;}},{key:"volume",set:function set(value){var volume=value;var max=1;var min=0;if(is$1.string(volume)){volume=Number(volume);}
if(!is$1.number(volume)){volume=this.storage.get('volume');}
if(!is$1.number(volume)){volume=this.config.volume;}
if(volume>max){volume=max;}
if(volume<min){volume=min;}
this.config.volume=volume;this.media.volume=volume;if(!is$1.empty(value)&&this.muted&&volume>0){this.muted=false;}},get:function get(){return Number(this.media.volume);}},{key:"muted",set:function set(mute){var toggle=mute;if(!is$1.boolean(toggle)){toggle=this.storage.get('muted');}
if(!is$1.boolean(toggle)){toggle=this.config.muted;}
this.config.muted=toggle;this.media.muted=toggle;},get:function get(){return Boolean(this.media.muted);}},{key:"hasAudio",get:function get(){if(!this.isHTML5){return true;}
if(this.isAudio){return true;}
return Boolean(this.media.mozHasAudio)||Boolean(this.media.webkitAudioDecodedByteCount)||Boolean(this.media.audioTracks&&this.media.audioTracks.length);}},{key:"speed",set:function set(input){var _this4=this;var speed=null;if(is$1.number(input)){speed=input;}
if(!is$1.number(speed)){speed=this.storage.get('speed');}
if(!is$1.number(speed)){speed=this.config.speed.selected;}
var min=this.minimumSpeed,max=this.maximumSpeed;speed=clamp(speed,min,max);this.config.speed.selected=speed;setTimeout(function(){_this4.media.playbackRate=speed;},0);},get:function get(){return Number(this.media.playbackRate);}},{key:"minimumSpeed",get:function get(){if(this.isYouTube){return Math.min.apply(Math,_toConsumableArray(this.options.speed));}
if(this.isVimeo){return 0.5;}
return 0.0625;}},{key:"maximumSpeed",get:function get(){if(this.isYouTube){return Math.max.apply(Math,_toConsumableArray(this.options.speed));}
if(this.isVimeo){return 2;}
return 16;}},{key:"quality",set:function set(input){var config=this.config.quality;var options=this.options.quality;if(!options.length){return;}
var quality=[!is$1.empty(input)&&Number(input),this.storage.get('quality'),config.selected,config.default].find(is$1.number);var updateStorage=true;if(!options.includes(quality)){var value=closest(options,quality);this.debug.warn("Unsupported quality option: ".concat(quality,", using ").concat(value," instead"));quality=value;updateStorage=false;}
config.selected=quality;this.media.quality=quality;if(updateStorage){this.storage.set({quality:quality});}},get:function get(){return this.media.quality;}},{key:"loop",set:function set(input){var toggle=is$1.boolean(input)?input:this.config.loop.active;this.config.loop.active=toggle;this.media.loop=toggle;},get:function get(){return Boolean(this.media.loop);}},{key:"source",set:function set(input){source.change.call(this,input);},get:function get(){return this.media.currentSrc;}},{key:"download",get:function get(){var download=this.config.urls.download;return is$1.url(download)?download:this.source;},set:function set(input){if(!is$1.url(input)){return;}
this.config.urls.download=input;controls.setDownloadUrl.call(this);}},{key:"poster",set:function set(input){if(!this.isVideo){this.debug.warn('Poster can only be set for video');return;}
ui.setPoster.call(this,input,false).catch(function(){});},get:function get(){if(!this.isVideo){return null;}
return this.media.getAttribute('poster');}},{key:"ratio",get:function get(){if(!this.isVideo){return null;}
var ratio=reduceAspectRatio(getAspectRatio.call(this));return is$1.array(ratio)?ratio.join(':'):ratio;},set:function set(input){if(!this.isVideo){this.debug.warn('Aspect ratio can only be set for video');return;}
if(!is$1.string(input)||!validateRatio(input)){this.debug.error("Invalid aspect ratio specified (".concat(input,")"));return;}
this.config.ratio=input;setAspectRatio.call(this);}},{key:"autoplay",set:function set(input){var toggle=is$1.boolean(input)?input:this.config.autoplay;this.config.autoplay=toggle;},get:function get(){return Boolean(this.config.autoplay);}},{key:"currentTrack",set:function set(input){captions.set.call(this,input,false);},get:function get(){var _this$captions=this.captions,toggled=_this$captions.toggled,currentTrack=_this$captions.currentTrack;return toggled?currentTrack:-1;}},{key:"language",set:function set(input){captions.setLanguage.call(this,input,false);},get:function get(){return(captions.getCurrentTrack.call(this)||{}).language;}},{key:"pip",set:function set(input){if(!support.pip){return;}
var toggle=is$1.boolean(input)?input:!this.pip;if(is$1.function(this.media.webkitSetPresentationMode)){this.media.webkitSetPresentationMode(toggle?pip.active:pip.inactive);}
if(is$1.function(this.media.requestPictureInPicture)){if(!this.pip&&toggle){this.media.requestPictureInPicture();}else if(this.pip&&!toggle){document.exitPictureInPicture();}}},get:function get(){if(!support.pip){return null;}
if(!is$1.empty(this.media.webkitPresentationMode)){return this.media.webkitPresentationMode===pip.active;}
return this.media===document.pictureInPictureElement;}}],[{key:"supported",value:function supported(type,provider,inline){return support.check(type,provider,inline);}},{key:"loadSprite",value:function loadSprite$1(url,id){return loadSprite(url,id);}},{key:"setup",value:function setup(selector){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var targets=null;if(is$1.string(selector)){targets=Array.from(document.querySelectorAll(selector));}else if(is$1.nodeList(selector)){targets=Array.from(selector);}else if(is$1.array(selector)){targets=selector.filter(is$1.element);}
if(is$1.empty(targets)){return null;}
return targets.map(function(t){return new Plyr(t,options);});}}]);return Plyr;}();Plyr.defaults=cloneDeep(defaults$1);return Plyr;})));